var ze=Object.defineProperty;var Xe=(t,e,s)=>e in t?ze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var It=(t,e,s)=>(Xe(t,typeof e!="symbol"?e+"":e,s),s),ae=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var B=(t,e,s)=>(ae(t,e,"read from private field"),s?s.call(t):e.get(t)),pt=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},yt=(t,e,s,n)=>(ae(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s),oe=(t,e,s,n)=>({set _(i){yt(t,e,i,s)},get _(){return B(t,e,n)}}),mt=(t,e,s)=>(ae(t,e,"access private method"),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const h of i)if(h.type==="childList")for(const b of h.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&n(b)}).observe(document,{childList:!0,subtree:!0});function s(i){const h={};return i.integrity&&(h.integrity=i.integrity),i.referrerpolicy&&(h.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?h.credentials="include":i.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function n(i){if(i.ep)return;i.ep=!0;const h=s(i);fetch(i.href,h)}})();function makeMap(t,e){const s=Object.create(null),n=t.split(",");for(let i=0;i<n.length;i++)s[n[i]]=!0;return e?i=>!!s[i.toLowerCase()]:i=>!!s[i]}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}function normalizeStyle(t){if(isArray(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],i=isString(n)?parseStringStyle(n):normalizeStyle(n);if(i)for(const h in i)e[h]=i[h]}return e}else{if(isString(t))return t;if(isObject(t))return t}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:(.+)/;function parseStringStyle(t){const e={};return t.split(listDelimiterRE).forEach(s=>{if(s){const n=s.split(propertyDelimiterRE);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function normalizeClass(t){let e="";if(isString(t))e=t;else if(isArray(t))for(let s=0;s<t.length;s++){const n=normalizeClass(t[s]);n&&(e+=n+" ")}else if(isObject(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=t=>onRE.test(t),isModelListener=t=>t.startsWith("onUpdate:"),extend=Object.assign,remove=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},hasOwnProperty=Object.prototype.hasOwnProperty,hasOwn=(t,e)=>hasOwnProperty.call(t,e),isArray=Array.isArray,isMap=t=>toTypeString(t)==="[object Map]",isSet=t=>toTypeString(t)==="[object Set]",isFunction=t=>typeof t=="function",isString=t=>typeof t=="string",isSymbol=t=>typeof t=="symbol",isObject=t=>t!==null&&typeof t=="object",isPromise=t=>isObject(t)&&isFunction(t.then)&&isFunction(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(e,s)=>s?s.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize(t)}`:""),hasChanged=(t,e)=>!Object.is(t,e),invokeArrayFns=(t,e)=>{for(let s=0;s<t.length;s++)t[s](e)},def=(t,e,s)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:s})},toNumber=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let activeEffectScope;class EffectScope{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&activeEffectScope&&(this.parent=activeEffectScope,this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(e){if(this.active){const s=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=s}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this.active){let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.scopes)for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);if(this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function recordEffectScope(t,e=activeEffectScope){e&&e.active&&e.effects.push(t)}const createDep=t=>{const e=new Set(t);return e.w=0,e.n=0,e},wasTracked=t=>(t.w&trackOpBit)>0,newTracked=t=>(t.n&trackOpBit)>0,initDepMarkers=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=trackOpBit},finalizeDepMarkers=t=>{const{deps:e}=t;if(e.length){let s=0;for(let n=0;n<e.length;n++){const i=e[n];wasTracked(i)&&!newTracked(i)?i.delete(t):e[s++]=i,i.w&=~trackOpBit,i.n&=~trackOpBit}e.length=s}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(e,s=null,n){this.fn=e,this.scheduler=s,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,n)}run(){if(!this.active)return this.fn();let e=activeEffect,s=shouldTrack;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=s,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(t){const{deps:e}=t;if(e.length){for(let s=0;s<e.length;s++)e[s].delete(t);e.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function track(t,e,s){if(shouldTrack&&activeEffect){let n=targetMap.get(t);n||targetMap.set(t,n=new Map);let i=n.get(s);i||n.set(s,i=createDep()),trackEffects(i)}}function trackEffects(t,e){let s=!1;effectTrackDepth<=maxMarkerBits?newTracked(t)||(t.n|=trackOpBit,s=!wasTracked(t)):s=!t.has(activeEffect),s&&(t.add(activeEffect),activeEffect.deps.push(t))}function trigger(t,e,s,n,i,h){const b=targetMap.get(t);if(!b)return;let R=[];if(e==="clear")R=[...b.values()];else if(s==="length"&&isArray(t))b.forEach((T,g)=>{(g==="length"||g>=n)&&R.push(T)});else switch(s!==void 0&&R.push(b.get(s)),e){case"add":isArray(t)?isIntegerKey(s)&&R.push(b.get("length")):(R.push(b.get(ITERATE_KEY)),isMap(t)&&R.push(b.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray(t)||(R.push(b.get(ITERATE_KEY)),isMap(t)&&R.push(b.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(t)&&R.push(b.get(ITERATE_KEY));break}if(R.length===1)R[0]&&triggerEffects(R[0]);else{const T=[];for(const g of R)g&&T.push(...g);triggerEffects(createDep(T))}}function triggerEffects(t,e){const s=isArray(t)?t:[...t];for(const n of s)n.computed&&triggerEffect(n);for(const n of s)n.computed||triggerEffect(n)}function triggerEffect(t,e){(t!==activeEffect||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol)),get=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...s){const n=toRaw(this);for(let h=0,b=this.length;h<b;h++)track(n,"get",h+"");const i=n[e](...s);return i===-1||i===!1?n[e](...s.map(toRaw)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...s){pauseTracking();const n=toRaw(this)[e].apply(this,s);return resetTracking(),n}}),t}function createGetter(t=!1,e=!1){return function(n,i,h){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&h===(t?e?shallowReadonlyMap:readonlyMap:e?shallowReactiveMap:reactiveMap).get(n))return n;const b=isArray(n);if(!t&&b&&hasOwn(arrayInstrumentations,i))return Reflect.get(arrayInstrumentations,i,h);const R=Reflect.get(n,i,h);return(isSymbol(i)?builtInSymbols.has(i):isNonTrackableKeys(i))||(t||track(n,"get",i),e)?R:isRef(R)?b&&isIntegerKey(i)?R:R.value:isObject(R)?t?readonly(R):reactive(R):R}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(t=!1){return function(s,n,i,h){let b=s[n];if(isReadonly(b)&&isRef(b)&&!isRef(i))return!1;if(!t&&(!isShallow(i)&&!isReadonly(i)&&(b=toRaw(b),i=toRaw(i)),!isArray(s)&&isRef(b)&&!isRef(i)))return b.value=i,!0;const R=isArray(s)&&isIntegerKey(n)?Number(n)<s.length:hasOwn(s,n),T=Reflect.set(s,n,i,h);return s===toRaw(h)&&(R?hasChanged(i,b)&&trigger(s,"set",n,i):trigger(s,"add",n,i)),T}}function deleteProperty(t,e){const s=hasOwn(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&s&&trigger(t,"delete",e,void 0),n}function has(t,e){const s=Reflect.has(t,e);return(!isSymbol(e)||!builtInSymbols.has(e))&&track(t,"has",e),s}function ownKeys(t){return track(t,"iterate",isArray(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}const mutableHandlers={get,set,deleteProperty,has,ownKeys},readonlyHandlers={get:readonlyGet,set(t,e){return!0},deleteProperty(t,e){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function get$1(t,e,s=!1,n=!1){t=t.__v_raw;const i=toRaw(t),h=toRaw(e);s||(e!==h&&track(i,"get",e),track(i,"get",h));const{has:b}=getProto(i),R=n?toShallow:s?toReadonly:toReactive;if(b.call(i,e))return R(t.get(e));if(b.call(i,h))return R(t.get(h));t!==i&&t.get(e)}function has$1(t,e=!1){const s=this.__v_raw,n=toRaw(s),i=toRaw(t);return e||(t!==i&&track(n,"has",t),track(n,"has",i)),t===i?s.has(t):s.has(t)||s.has(i)}function size(t,e=!1){return t=t.__v_raw,!e&&track(toRaw(t),"iterate",ITERATE_KEY),Reflect.get(t,"size",t)}function add(t){t=toRaw(t);const e=toRaw(this);return getProto(e).has.call(e,t)||(e.add(t),trigger(e,"add",t,t)),this}function set$1(t,e){e=toRaw(e);const s=toRaw(this),{has:n,get:i}=getProto(s);let h=n.call(s,t);h||(t=toRaw(t),h=n.call(s,t));const b=i.call(s,t);return s.set(t,e),h?hasChanged(e,b)&&trigger(s,"set",t,e):trigger(s,"add",t,e),this}function deleteEntry(t){const e=toRaw(this),{has:s,get:n}=getProto(e);let i=s.call(e,t);i||(t=toRaw(t),i=s.call(e,t)),n&&n.call(e,t);const h=e.delete(t);return i&&trigger(e,"delete",t,void 0),h}function clear(){const t=toRaw(this),e=t.size!==0,s=t.clear();return e&&trigger(t,"clear",void 0,void 0),s}function createForEach(t,e){return function(n,i){const h=this,b=h.__v_raw,R=toRaw(b),T=e?toShallow:t?toReadonly:toReactive;return!t&&track(R,"iterate",ITERATE_KEY),b.forEach((g,x)=>n.call(i,T(g),T(x),h))}}function createIterableMethod(t,e,s){return function(...n){const i=this.__v_raw,h=toRaw(i),b=isMap(h),R=t==="entries"||t===Symbol.iterator&&b,T=t==="keys"&&b,g=i[t](...n),x=s?toShallow:e?toReadonly:toReactive;return!e&&track(h,"iterate",T?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:M,done:P}=g.next();return P?{value:M,done:P}:{value:R?[x(M[0]),x(M[1])]:x(M),done:P}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...e){return t==="delete"?!1:this}}function createInstrumentations(){const t={get(h){return get$1(this,h)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},e={get(h){return get$1(this,h,!1,!0)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},s={get(h){return get$1(this,h,!0)},get size(){return size(this,!0)},has(h){return has$1.call(this,h,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},n={get(h){return get$1(this,h,!0,!0)},get size(){return size(this,!0)},has(h){return has$1.call(this,h,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(h=>{t[h]=createIterableMethod(h,!1,!1),s[h]=createIterableMethod(h,!0,!1),e[h]=createIterableMethod(h,!1,!0),n[h]=createIterableMethod(h,!0,!0)}),[t,s,e,n]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(t,e){const s=e?t?shallowReadonlyInstrumentations:shallowInstrumentations:t?readonlyInstrumentations:mutableInstrumentations;return(n,i,h)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(hasOwn(s,i)&&i in n?s:n,i,h)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(t,e,s,n,i){if(!isObject(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const h=i.get(t);if(h)return h;const b=getTargetType(t);if(b===0)return t;const R=new Proxy(t,b===2?n:s);return i.set(t,R),R}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return isReactive(t)||isReadonly(t)}function toRaw(t){const e=t&&t.__v_raw;return e?toRaw(e):t}function markRaw(t){return def(t,"__v_skip",!0),t}const toReactive=t=>isObject(t)?reactive(t):t,toReadonly=t=>isObject(t)?readonly(t):t;function trackRefValue(t){shouldTrack&&activeEffect&&(t=toRaw(t),trackEffects(t.dep||(t.dep=createDep())))}function triggerRefValue(t,e){t=toRaw(t),t.dep&&triggerEffects(t.dep)}function isRef(t){return!!(t&&t.__v_isRef===!0)}function ref(t){return createRef(t,!1)}function createRef(t,e){return isRef(t)?t:new RefImpl(t,e)}class RefImpl{constructor(e,s){this.__v_isShallow=s,this.dep=void 0,this.__v_isRef=!0,this._rawValue=s?e:toRaw(e),this._value=s?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){const s=this.__v_isShallow||isShallow(e)||isReadonly(e);e=s?e:toRaw(e),hasChanged(e,this._rawValue)&&(this._rawValue=e,this._value=s?e:toReactive(e),triggerRefValue(this))}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,e,s)=>unref(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const i=t[e];return isRef(i)&&!isRef(s)?(i.value=s,!0):Reflect.set(t,e,s,n)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}var _a;class ComputedRefImpl{constructor(e,s,n,i){this._setter=s,this.dep=void 0,this.__v_isRef=!0,this[_a]=!1,this._dirty=!0,this.effect=new ReactiveEffect(e,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const e=toRaw(this);return trackRefValue(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}_a="__v_isReadonly";function computed$1(t,e,s=!1){let n,i;const h=isFunction(t);return h?(n=t,i=NOOP):(n=t.get,i=t.set),new ComputedRefImpl(n,i,h||!i,s)}function callWithErrorHandling(t,e,s,n){let i;try{i=n?t(...n):t()}catch(h){handleError(h,e,s)}return i}function callWithAsyncErrorHandling(t,e,s,n){if(isFunction(t)){const h=callWithErrorHandling(t,e,s,n);return h&&isPromise(h)&&h.catch(b=>{handleError(b,e,s)}),h}const i=[];for(let h=0;h<t.length;h++)i.push(callWithAsyncErrorHandling(t[h],e,s,n));return i}function handleError(t,e,s,n=!0){const i=e?e.vnode:null;if(e){let h=e.parent;const b=e.proxy,R=s;for(;h;){const g=h.ec;if(g){for(let x=0;x<g.length;x++)if(g[x](t,b,R)===!1)return}h=h.parent}const T=e.appContext.config.errorHandler;if(T){callWithErrorHandling(T,null,10,[t,b,R]);return}}logError(t,s,i,n)}function logError(t,e,s,n=!0){console.error(t)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const e=currentFlushPromise||resolvedPromise;return t?e.then(this?t.bind(this):t):e}function findInsertionIndex(t){let e=flushIndex+1,s=queue.length;for(;e<s;){const n=e+s>>>1;getId(queue[n])<t?e=n+1:s=n}return e}function queueJob(t){(!queue.length||!queue.includes(t,isFlushing&&t.allowRecurse?flushIndex+1:flushIndex))&&(t.id==null?queue.push(t):queue.splice(findInsertionIndex(t.id),0,t),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(t){const e=queue.indexOf(t);e>flushIndex&&queue.splice(e,1)}function queuePostFlushCb(t){isArray(t)?pendingPostFlushCbs.push(...t):(!activePostFlushCbs||!activePostFlushCbs.includes(t,t.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(t),queueFlush()}function flushPreFlushCbs(t,e=flushIndex){for(;e<queue.length;e++){const s=queue[e];s&&s.pre&&(queue.splice(e,1),e--,s())}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,activePostFlushCbs.sort((s,n)=>getId(s)-getId(n)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?1/0:t.id,comparator=(t,e)=>{const s=getId(t)-getId(e);if(s===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return s};function flushJobs(t){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const s=queue[flushIndex];s&&s.active!==!1&&callWithErrorHandling(s,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$1(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||EMPTY_OBJ;let i=s;const h=e.startsWith("update:"),b=h&&e.slice(7);if(b&&b in n){const x=`${b==="modelValue"?"model":b}Modifiers`,{number:M,trim:P}=n[x]||EMPTY_OBJ;P&&(i=s.map(k=>k.trim())),M&&(i=s.map(toNumber))}let R,T=n[R=toHandlerKey(e)]||n[R=toHandlerKey(camelize(e))];!T&&h&&(T=n[R=toHandlerKey(hyphenate(e))]),T&&callWithAsyncErrorHandling(T,t,6,i);const g=n[R+"Once"];if(g){if(!t.emitted)t.emitted={};else if(t.emitted[R])return;t.emitted[R]=!0,callWithAsyncErrorHandling(g,t,6,i)}}function normalizeEmitsOptions(t,e,s=!1){const n=e.emitsCache,i=n.get(t);if(i!==void 0)return i;const h=t.emits;let b={},R=!1;if(!isFunction(t)){const T=g=>{const x=normalizeEmitsOptions(g,e,!0);x&&(R=!0,extend(b,x))};!s&&e.mixins.length&&e.mixins.forEach(T),t.extends&&T(t.extends),t.mixins&&t.mixins.forEach(T)}return!h&&!R?(isObject(t)&&n.set(t,null),null):(isArray(h)?h.forEach(T=>b[T]=null):extend(b,h),isObject(t)&&n.set(t,b),b)}function isEmitListener(t,e){return!t||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(t,e[0].toLowerCase()+e.slice(1))||hasOwn(t,hyphenate(e))||hasOwn(t,e))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const e=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,e}function pushScopeId(t){currentScopeId=t}function popScopeId(){currentScopeId=null}function withCtx(t,e=currentRenderingInstance,s){if(!e||t._n)return t;const n=(...i)=>{n._d&&setBlockTracking(-1);const h=setCurrentRenderingInstance(e),b=t(...i);return setCurrentRenderingInstance(h),n._d&&setBlockTracking(1),b};return n._n=!0,n._c=!0,n._d=!0,n}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:e,vnode:s,proxy:n,withProxy:i,props:h,propsOptions:[b],slots:R,attrs:T,emit:g,render:x,renderCache:M,data:P,setupState:k,ctx:m,inheritAttrs:r}=t;let o,u;const w=setCurrentRenderingInstance(t);try{if(s.shapeFlag&4){const f=i||n;o=normalizeVNode(x.call(f,f,M,h,k,P,m)),u=T}else{const f=e;o=normalizeVNode(f.length>1?f(h,{attrs:T,slots:R,emit:g}):f(h,null)),u=e.props?T:getFunctionalFallthrough(T)}}catch(f){blockStack.length=0,handleError(f,t,1),o=createVNode(Comment)}let A=o;if(u&&r!==!1){const f=Object.keys(u),{shapeFlag:D}=A;f.length&&D&7&&(b&&f.some(isModelListener)&&(u=filterModelListeners(u,b)),A=cloneVNode(A,u))}return s.dirs&&(A=cloneVNode(A),A.dirs=A.dirs?A.dirs.concat(s.dirs):s.dirs),s.transition&&(A.transition=s.transition),o=A,setCurrentRenderingInstance(w),o}const getFunctionalFallthrough=t=>{let e;for(const s in t)(s==="class"||s==="style"||isOn(s))&&((e||(e={}))[s]=t[s]);return e},filterModelListeners=(t,e)=>{const s={};for(const n in t)(!isModelListener(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function shouldUpdateComponent(t,e,s){const{props:n,children:i,component:h}=t,{props:b,children:R,patchFlag:T}=e,g=h.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&T>=0){if(T&1024)return!0;if(T&16)return n?hasPropsChanged(n,b,g):!!b;if(T&8){const x=e.dynamicProps;for(let M=0;M<x.length;M++){const P=x[M];if(b[P]!==n[P]&&!isEmitListener(g,P))return!0}}}else return(i||R)&&(!R||!R.$stable)?!0:n===b?!1:n?b?hasPropsChanged(n,b,g):!0:!!b;return!1}function hasPropsChanged(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const h=n[i];if(e[h]!==t[h]&&!isEmitListener(s,h))return!0}return!1}function updateHOCHostEl({vnode:t,parent:e},s){for(;e&&e.subTree===t;)(t=e.vnode).el=s,e=e.parent}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,e){e&&e.pendingBranch?isArray(t)?e.effects.push(...t):e.effects.push(t):queuePostFlushCb(t)}function provide(t,e){if(currentInstance){let s=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===s&&(s=currentInstance.provides=Object.create(n)),s[t]=e}}function inject(t,e,s=!1){const n=currentInstance||currentRenderingInstance;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return s&&isFunction(e)?e.call(n.proxy):e}}const INITIAL_WATCHER_VALUE={};function watch(t,e,s){return doWatch(t,e,s)}function doWatch(t,e,{immediate:s,deep:n,flush:i,onTrack:h,onTrigger:b}=EMPTY_OBJ){const R=currentInstance;let T,g=!1,x=!1;if(isRef(t)?(T=()=>t.value,g=isShallow(t)):isReactive(t)?(T=()=>t,n=!0):isArray(t)?(x=!0,g=t.some(u=>isReactive(u)||isShallow(u)),T=()=>t.map(u=>{if(isRef(u))return u.value;if(isReactive(u))return traverse(u);if(isFunction(u))return callWithErrorHandling(u,R,2)})):isFunction(t)?e?T=()=>callWithErrorHandling(t,R,2):T=()=>{if(!(R&&R.isUnmounted))return M&&M(),callWithAsyncErrorHandling(t,R,3,[P])}:T=NOOP,e&&n){const u=T;T=()=>traverse(u())}let M,P=u=>{M=o.onStop=()=>{callWithErrorHandling(u,R,4)}};if(isInSSRComponentSetup)return P=NOOP,e?s&&callWithAsyncErrorHandling(e,R,3,[T(),x?[]:void 0,P]):T(),NOOP;let k=x?[]:INITIAL_WATCHER_VALUE;const m=()=>{if(!!o.active)if(e){const u=o.run();(n||g||(x?u.some((w,A)=>hasChanged(w,k[A])):hasChanged(u,k)))&&(M&&M(),callWithAsyncErrorHandling(e,R,3,[u,k===INITIAL_WATCHER_VALUE?void 0:k,P]),k=u)}else o.run()};m.allowRecurse=!!e;let r;i==="sync"?r=m:i==="post"?r=()=>queuePostRenderEffect(m,R&&R.suspense):(m.pre=!0,R&&(m.id=R.uid),r=()=>queueJob(m));const o=new ReactiveEffect(T,r);return e?s?m():k=o.run():i==="post"?queuePostRenderEffect(o.run.bind(o),R&&R.suspense):o.run(),()=>{o.stop(),R&&R.scope&&remove(R.scope.effects,o)}}function instanceWatch(t,e,s){const n=this.proxy,i=isString(t)?t.includes(".")?createPathGetter(n,t):()=>n[t]:t.bind(n,n);let h;isFunction(e)?h=e:(h=e.handler,s=e);const b=currentInstance;setCurrentInstance(this);const R=doWatch(i,h.bind(n),s);return b?setCurrentInstance(b):unsetCurrentInstance(),R}function createPathGetter(t,e){const s=e.split(".");return()=>{let n=t;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}function traverse(t,e){if(!isObject(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),isRef(t))traverse(t.value,e);else if(isArray(t))for(let s=0;s<t.length;s++)traverse(t[s],e);else if(isSet(t)||isMap(t))t.forEach(s=>{traverse(s,e)});else if(isPlainObject(t))for(const s in t)traverse(t[s],e);return t}function useTransitionState(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{t.isMounted=!0}),onBeforeUnmount(()=>{t.isUnmounting=!0}),t}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(t,{slots:e}){const s=getCurrentInstance(),n=useTransitionState();let i;return()=>{const h=e.default&&getTransitionRawChildren(e.default(),!0);if(!h||!h.length)return;let b=h[0];if(h.length>1){for(const r of h)if(r.type!==Comment){b=r;break}}const R=toRaw(t),{mode:T}=R;if(n.isLeaving)return emptyPlaceholder(b);const g=getKeepAliveChild(b);if(!g)return emptyPlaceholder(b);const x=resolveTransitionHooks(g,R,n,s);setTransitionHooks(g,x);const M=s.subTree,P=M&&getKeepAliveChild(M);let k=!1;const{getTransitionKey:m}=g.type;if(m){const r=m();i===void 0?i=r:r!==i&&(i=r,k=!0)}if(P&&P.type!==Comment&&(!isSameVNodeType(g,P)||k)){const r=resolveTransitionHooks(P,R,n,s);if(setTransitionHooks(P,r),T==="out-in")return n.isLeaving=!0,r.afterLeave=()=>{n.isLeaving=!1,s.update()},emptyPlaceholder(b);T==="in-out"&&g.type!==Comment&&(r.delayLeave=(o,u,w)=>{const A=getLeavingNodesForType(n,P);A[String(P.key)]=P,o._leaveCb=()=>{u(),o._leaveCb=void 0,delete x.delayedLeave},x.delayedLeave=w})}return b}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(t,e){const{leavingVNodes:s}=t;let n=s.get(e.type);return n||(n=Object.create(null),s.set(e.type,n)),n}function resolveTransitionHooks(t,e,s,n){const{appear:i,mode:h,persisted:b=!1,onBeforeEnter:R,onEnter:T,onAfterEnter:g,onEnterCancelled:x,onBeforeLeave:M,onLeave:P,onAfterLeave:k,onLeaveCancelled:m,onBeforeAppear:r,onAppear:o,onAfterAppear:u,onAppearCancelled:w}=e,A=String(t.key),f=getLeavingNodesForType(s,t),D=(d,v)=>{d&&callWithAsyncErrorHandling(d,n,9,v)},O=(d,v)=>{const _=v[1];D(d,v),isArray(d)?d.every(I=>I.length<=1)&&_():d.length<=1&&_()},U={mode:h,persisted:b,beforeEnter(d){let v=R;if(!s.isMounted)if(i)v=r||R;else return;d._leaveCb&&d._leaveCb(!0);const _=f[A];_&&isSameVNodeType(t,_)&&_.el._leaveCb&&_.el._leaveCb(),D(v,[d])},enter(d){let v=T,_=g,I=x;if(!s.isMounted)if(i)v=o||T,_=u||g,I=w||x;else return;let j=!1;const it=d._enterCb=Y=>{j||(j=!0,Y?D(I,[d]):D(_,[d]),U.delayedLeave&&U.delayedLeave(),d._enterCb=void 0)};v?O(v,[d,it]):it()},leave(d,v){const _=String(t.key);if(d._enterCb&&d._enterCb(!0),s.isUnmounting)return v();D(M,[d]);let I=!1;const j=d._leaveCb=it=>{I||(I=!0,v(),it?D(m,[d]):D(k,[d]),d._leaveCb=void 0,f[_]===t&&delete f[_])};f[_]=t,P?O(P,[d,j]):j()},clone(d){return resolveTransitionHooks(d,e,s,n)}};return U}function emptyPlaceholder(t){if(isKeepAlive(t))return t=cloneVNode(t),t.children=null,t}function getKeepAliveChild(t){return isKeepAlive(t)?t.children?t.children[0]:void 0:t}function setTransitionHooks(t,e){t.shapeFlag&6&&t.component?setTransitionHooks(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function getTransitionRawChildren(t,e=!1,s){let n=[],i=0;for(let h=0;h<t.length;h++){let b=t[h];const R=s==null?b.key:String(s)+String(b.key!=null?b.key:h);b.type===Fragment?(b.patchFlag&128&&i++,n=n.concat(getTransitionRawChildren(b.children,e,R))):(e||b.type!==Comment)&&n.push(R!=null?cloneVNode(b,{key:R}):b)}if(i>1)for(let h=0;h<n.length;h++)n[h].patchFlag=-2;return n}function defineComponent(t){return isFunction(t)?{setup:t,name:t.name}:t}const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,e){registerKeepAliveHook(t,"a",e)}function onDeactivated(t,e){registerKeepAliveHook(t,"da",e)}function registerKeepAliveHook(t,e,s=currentInstance){const n=t.__wdc||(t.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(injectHook(e,n,s),s){let i=s.parent;for(;i&&i.parent;)isKeepAlive(i.parent.vnode)&&injectToKeepAliveRoot(n,e,s,i),i=i.parent}}function injectToKeepAliveRoot(t,e,s,n){const i=injectHook(e,t,n,!0);onUnmounted(()=>{remove(n[e],i)},s)}function injectHook(t,e,s=currentInstance,n=!1){if(s){const i=s[t]||(s[t]=[]),h=e.__weh||(e.__weh=(...b)=>{if(s.isUnmounted)return;pauseTracking(),setCurrentInstance(s);const R=callWithAsyncErrorHandling(e,s,t,b);return unsetCurrentInstance(),resetTracking(),R});return n?i.unshift(h):i.push(h),h}}const createHook=t=>(e,s=currentInstance)=>(!isInSSRComponentSetup||t==="sp")&&injectHook(t,e,s),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,e=currentInstance){injectHook("ec",t,e)}function withDirectives(t,e){const s=currentRenderingInstance;if(s===null)return t;const n=getExposeProxy(s)||s.proxy,i=t.dirs||(t.dirs=[]);for(let h=0;h<e.length;h++){let[b,R,T,g=EMPTY_OBJ]=e[h];isFunction(b)&&(b={mounted:b,updated:b}),b.deep&&traverse(R),i.push({dir:b,instance:n,value:R,oldValue:void 0,arg:T,modifiers:g})}return t}function invokeDirectiveHook(t,e,s,n){const i=t.dirs,h=e&&e.dirs;for(let b=0;b<i.length;b++){const R=i[b];h&&(R.oldValue=h[b].value);let T=R.dir[n];T&&(pauseTracking(),callWithAsyncErrorHandling(T,s,8,[t.el,R,t,e]),resetTracking())}}const NULL_DYNAMIC_COMPONENT=Symbol(),getPublicInstance=t=>t?isStatefulComponent(t)?getExposeProxy(t)||t.proxy:getPublicInstance(t.parent):null,publicPropertiesMap=extend(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>queueJob(t.update)),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),PublicInstanceProxyHandlers={get({_:t},e){const{ctx:s,setupState:n,data:i,props:h,accessCache:b,type:R,appContext:T}=t;let g;if(e[0]!=="$"){const k=b[e];if(k!==void 0)switch(k){case 1:return n[e];case 2:return i[e];case 4:return s[e];case 3:return h[e]}else{if(n!==EMPTY_OBJ&&hasOwn(n,e))return b[e]=1,n[e];if(i!==EMPTY_OBJ&&hasOwn(i,e))return b[e]=2,i[e];if((g=t.propsOptions[0])&&hasOwn(g,e))return b[e]=3,h[e];if(s!==EMPTY_OBJ&&hasOwn(s,e))return b[e]=4,s[e];shouldCacheAccess&&(b[e]=0)}}const x=publicPropertiesMap[e];let M,P;if(x)return e==="$attrs"&&track(t,"get",e),x(t);if((M=R.__cssModules)&&(M=M[e]))return M;if(s!==EMPTY_OBJ&&hasOwn(s,e))return b[e]=4,s[e];if(P=T.config.globalProperties,hasOwn(P,e))return P[e]},set({_:t},e,s){const{data:n,setupState:i,ctx:h}=t;return i!==EMPTY_OBJ&&hasOwn(i,e)?(i[e]=s,!0):n!==EMPTY_OBJ&&hasOwn(n,e)?(n[e]=s,!0):hasOwn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(h[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:i,propsOptions:h}},b){let R;return!!s[b]||t!==EMPTY_OBJ&&hasOwn(t,b)||e!==EMPTY_OBJ&&hasOwn(e,b)||(R=h[0])&&hasOwn(R,b)||hasOwn(n,b)||hasOwn(publicPropertiesMap,b)||hasOwn(i.config.globalProperties,b)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:hasOwn(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};let shouldCacheAccess=!0;function applyOptions(t){const e=resolveMergedOptions(t),s=t.proxy,n=t.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,t,"bc");const{data:i,computed:h,methods:b,watch:R,provide:T,inject:g,created:x,beforeMount:M,mounted:P,beforeUpdate:k,updated:m,activated:r,deactivated:o,beforeDestroy:u,beforeUnmount:w,destroyed:A,unmounted:f,render:D,renderTracked:O,renderTriggered:U,errorCaptured:d,serverPrefetch:v,expose:_,inheritAttrs:I,components:j,directives:it,filters:Y}=e;if(g&&resolveInjections(g,n,null,t.appContext.config.unwrapInjectedRef),b)for(const G in b){const nt=b[G];isFunction(nt)&&(n[G]=nt.bind(s))}if(i){const G=i.call(s,s);isObject(G)&&(t.data=reactive(G))}if(shouldCacheAccess=!0,h)for(const G in h){const nt=h[G],ct=isFunction(nt)?nt.bind(s,s):isFunction(nt.get)?nt.get.bind(s,s):NOOP,dt=!isFunction(nt)&&isFunction(nt.set)?nt.set.bind(s):NOOP,ft=computed({get:ct,set:dt});Object.defineProperty(n,G,{enumerable:!0,configurable:!0,get:()=>ft.value,set:H=>ft.value=H})}if(R)for(const G in R)createWatcher(R[G],n,s,G);if(T){const G=isFunction(T)?T.call(s):T;Reflect.ownKeys(G).forEach(nt=>{provide(nt,G[nt])})}x&&callHook(x,t,"c");function et(G,nt){isArray(nt)?nt.forEach(ct=>G(ct.bind(s))):nt&&G(nt.bind(s))}if(et(onBeforeMount,M),et(onMounted,P),et(onBeforeUpdate,k),et(onUpdated,m),et(onActivated,r),et(onDeactivated,o),et(onErrorCaptured,d),et(onRenderTracked,O),et(onRenderTriggered,U),et(onBeforeUnmount,w),et(onUnmounted,f),et(onServerPrefetch,v),isArray(_))if(_.length){const G=t.exposed||(t.exposed={});_.forEach(nt=>{Object.defineProperty(G,nt,{get:()=>s[nt],set:ct=>s[nt]=ct})})}else t.exposed||(t.exposed={});D&&t.render===NOOP&&(t.render=D),I!=null&&(t.inheritAttrs=I),j&&(t.components=j),it&&(t.directives=it)}function resolveInjections(t,e,s=NOOP,n=!1){isArray(t)&&(t=normalizeInject(t));for(const i in t){const h=t[i];let b;isObject(h)?"default"in h?b=inject(h.from||i,h.default,!0):b=inject(h.from||i):b=inject(h),isRef(b)&&n?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>b.value,set:R=>b.value=R}):e[i]=b}}function callHook(t,e,s){callWithAsyncErrorHandling(isArray(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function createWatcher(t,e,s,n){const i=n.includes(".")?createPathGetter(s,n):()=>s[n];if(isString(t)){const h=e[t];isFunction(h)&&watch(i,h)}else if(isFunction(t))watch(i,t.bind(s));else if(isObject(t))if(isArray(t))t.forEach(h=>createWatcher(h,e,s,n));else{const h=isFunction(t.handler)?t.handler.bind(s):e[t.handler];isFunction(h)&&watch(i,h,t)}}function resolveMergedOptions(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:i,optionsCache:h,config:{optionMergeStrategies:b}}=t.appContext,R=h.get(e);let T;return R?T=R:!i.length&&!s&&!n?T=e:(T={},i.length&&i.forEach(g=>mergeOptions(T,g,b,!0)),mergeOptions(T,e,b)),isObject(e)&&h.set(e,T),T}function mergeOptions(t,e,s,n=!1){const{mixins:i,extends:h}=e;h&&mergeOptions(t,h,s,!0),i&&i.forEach(b=>mergeOptions(t,b,s,!0));for(const b in e)if(!(n&&b==="expose")){const R=internalOptionMergeStrats[b]||s&&s[b];t[b]=R?R(t[b],e[b]):e[b]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,e){return e?t?function(){return extend(isFunction(t)?t.call(this,this):t,isFunction(e)?e.call(this,this):e)}:e:t}function mergeInject(t,e){return mergeObjectOptions(normalizeInject(t),normalizeInject(e))}function normalizeInject(t){if(isArray(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function mergeAsArray(t,e){return t?[...new Set([].concat(t,e))]:e}function mergeObjectOptions(t,e){return t?extend(extend(Object.create(null),t),e):e}function mergeWatchOptions(t,e){if(!t)return e;if(!e)return t;const s=extend(Object.create(null),t);for(const n in e)s[n]=mergeAsArray(t[n],e[n]);return s}function initProps(t,e,s,n=!1){const i={},h={};def(h,InternalObjectKey,1),t.propsDefaults=Object.create(null),setFullProps(t,e,i,h);for(const b in t.propsOptions[0])b in i||(i[b]=void 0);s?t.props=n?i:shallowReactive(i):t.type.props?t.props=i:t.props=h,t.attrs=h}function updateProps(t,e,s,n){const{props:i,attrs:h,vnode:{patchFlag:b}}=t,R=toRaw(i),[T]=t.propsOptions;let g=!1;if((n||b>0)&&!(b&16)){if(b&8){const x=t.vnode.dynamicProps;for(let M=0;M<x.length;M++){let P=x[M];if(isEmitListener(t.emitsOptions,P))continue;const k=e[P];if(T)if(hasOwn(h,P))k!==h[P]&&(h[P]=k,g=!0);else{const m=camelize(P);i[m]=resolvePropValue(T,R,m,k,t,!1)}else k!==h[P]&&(h[P]=k,g=!0)}}}else{setFullProps(t,e,i,h)&&(g=!0);let x;for(const M in R)(!e||!hasOwn(e,M)&&((x=hyphenate(M))===M||!hasOwn(e,x)))&&(T?s&&(s[M]!==void 0||s[x]!==void 0)&&(i[M]=resolvePropValue(T,R,M,void 0,t,!0)):delete i[M]);if(h!==R)for(const M in h)(!e||!hasOwn(e,M)&&!0)&&(delete h[M],g=!0)}g&&trigger(t,"set","$attrs")}function setFullProps(t,e,s,n){const[i,h]=t.propsOptions;let b=!1,R;if(e)for(let T in e){if(isReservedProp(T))continue;const g=e[T];let x;i&&hasOwn(i,x=camelize(T))?!h||!h.includes(x)?s[x]=g:(R||(R={}))[x]=g:isEmitListener(t.emitsOptions,T)||(!(T in n)||g!==n[T])&&(n[T]=g,b=!0)}if(h){const T=toRaw(s),g=R||EMPTY_OBJ;for(let x=0;x<h.length;x++){const M=h[x];s[M]=resolvePropValue(i,T,M,g[M],t,!hasOwn(g,M))}}return b}function resolvePropValue(t,e,s,n,i,h){const b=t[s];if(b!=null){const R=hasOwn(b,"default");if(R&&n===void 0){const T=b.default;if(b.type!==Function&&isFunction(T)){const{propsDefaults:g}=i;s in g?n=g[s]:(setCurrentInstance(i),n=g[s]=T.call(null,e),unsetCurrentInstance())}else n=T}b[0]&&(h&&!R?n=!1:b[1]&&(n===""||n===hyphenate(s))&&(n=!0))}return n}function normalizePropsOptions(t,e,s=!1){const n=e.propsCache,i=n.get(t);if(i)return i;const h=t.props,b={},R=[];let T=!1;if(!isFunction(t)){const x=M=>{T=!0;const[P,k]=normalizePropsOptions(M,e,!0);extend(b,P),k&&R.push(...k)};!s&&e.mixins.length&&e.mixins.forEach(x),t.extends&&x(t.extends),t.mixins&&t.mixins.forEach(x)}if(!h&&!T)return isObject(t)&&n.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray(h))for(let x=0;x<h.length;x++){const M=camelize(h[x]);validatePropName(M)&&(b[M]=EMPTY_OBJ)}else if(h)for(const x in h){const M=camelize(x);if(validatePropName(M)){const P=h[x],k=b[M]=isArray(P)||isFunction(P)?{type:P}:P;if(k){const m=getTypeIndex(Boolean,k.type),r=getTypeIndex(String,k.type);k[0]=m>-1,k[1]=r<0||m<r,(m>-1||hasOwn(k,"default"))&&R.push(M)}}}const g=[b,R];return isObject(t)&&n.set(t,g),g}function validatePropName(t){return t[0]!=="$"}function getType(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function isSameType(t,e){return getType(t)===getType(e)}function getTypeIndex(t,e){return isArray(e)?e.findIndex(s=>isSameType(s,t)):isFunction(e)&&isSameType(e,t)?0:-1}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot=(t,e,s)=>{if(e._n)return e;const n=withCtx((...i)=>normalizeSlotValue(e(...i)),s);return n._c=!1,n},normalizeObjectSlots=(t,e,s)=>{const n=t._ctx;for(const i in t){if(isInternalKey(i))continue;const h=t[i];if(isFunction(h))e[i]=normalizeSlot(i,h,n);else if(h!=null){const b=normalizeSlotValue(h);e[i]=()=>b}}},normalizeVNodeSlots=(t,e)=>{const s=normalizeSlotValue(e);t.slots.default=()=>s},initSlots=(t,e)=>{if(t.vnode.shapeFlag&32){const s=e._;s?(t.slots=toRaw(e),def(e,"_",s)):normalizeObjectSlots(e,t.slots={})}else t.slots={},e&&normalizeVNodeSlots(t,e);def(t.slots,InternalObjectKey,1)},updateSlots=(t,e,s)=>{const{vnode:n,slots:i}=t;let h=!0,b=EMPTY_OBJ;if(n.shapeFlag&32){const R=e._;R?s&&R===1?h=!1:(extend(i,e),!s&&R===1&&delete i._):(h=!e.$stable,normalizeObjectSlots(e,i)),b=e}else e&&(normalizeVNodeSlots(t,e),b={default:1});if(h)for(const R in i)!isInternalKey(R)&&!(R in b)&&delete i[R]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(t,e){return function(n,i=null){isFunction(n)||(n=Object.assign({},n)),i!=null&&!isObject(i)&&(i=null);const h=createAppContext(),b=new Set;let R=!1;const T=h.app={_uid:uid++,_component:n,_props:i,_container:null,_context:h,_instance:null,version,get config(){return h.config},set config(g){},use(g,...x){return b.has(g)||(g&&isFunction(g.install)?(b.add(g),g.install(T,...x)):isFunction(g)&&(b.add(g),g(T,...x))),T},mixin(g){return h.mixins.includes(g)||h.mixins.push(g),T},component(g,x){return x?(h.components[g]=x,T):h.components[g]},directive(g,x){return x?(h.directives[g]=x,T):h.directives[g]},mount(g,x,M){if(!R){const P=createVNode(n,i);return P.appContext=h,x&&e?e(P,g):t(P,g,M),R=!0,T._container=g,g.__vue_app__=T,getExposeProxy(P.component)||P.component.proxy}},unmount(){R&&(t(null,T._container),delete T._container.__vue_app__)},provide(g,x){return h.provides[g]=x,T}};return T}}function setRef(t,e,s,n,i=!1){if(isArray(t)){t.forEach((P,k)=>setRef(P,e&&(isArray(e)?e[k]:e),s,n,i));return}if(isAsyncWrapper(n)&&!i)return;const h=n.shapeFlag&4?getExposeProxy(n.component)||n.component.proxy:n.el,b=i?null:h,{i:R,r:T}=t,g=e&&e.r,x=R.refs===EMPTY_OBJ?R.refs={}:R.refs,M=R.setupState;if(g!=null&&g!==T&&(isString(g)?(x[g]=null,hasOwn(M,g)&&(M[g]=null)):isRef(g)&&(g.value=null)),isFunction(T))callWithErrorHandling(T,R,12,[b,x]);else{const P=isString(T),k=isRef(T);if(P||k){const m=()=>{if(t.f){const r=P?x[T]:T.value;i?isArray(r)&&remove(r,h):isArray(r)?r.includes(h)||r.push(h):P?(x[T]=[h],hasOwn(M,T)&&(M[T]=x[T])):(T.value=[h],t.k&&(x[t.k]=T.value))}else P?(x[T]=b,hasOwn(M,T)&&(M[T]=b)):k&&(T.value=b,t.k&&(x[t.k]=b))};b?(m.id=-1,queuePostRenderEffect(m,s)):m()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,e){const s=getGlobalThis();s.__VUE__=!0;const{insert:n,remove:i,patchProp:h,createElement:b,createText:R,createComment:T,setText:g,setElementText:x,parentNode:M,nextSibling:P,setScopeId:k=NOOP,cloneNode:m,insertStaticContent:r}=t,o=(a,c,E,F=null,V=null,rt=null,X=!1,Q=null,$=!!c.dynamicChildren)=>{if(a===c)return;a&&!isSameVNodeType(a,c)&&(F=z(a),S(a,V,rt,!0),a=null),c.patchFlag===-2&&($=!1,c.dynamicChildren=null);const{type:K,ref:ht,shapeFlag:L}=c;switch(K){case Text:u(a,c,E,F);break;case Comment:w(a,c,E,F);break;case Static:a==null&&A(c,E,F,X);break;case Fragment:it(a,c,E,F,V,rt,X,Q,$);break;default:L&1?O(a,c,E,F,V,rt,X,Q,$):L&6?Y(a,c,E,F,V,rt,X,Q,$):(L&64||L&128)&&K.process(a,c,E,F,V,rt,X,Q,$,tt)}ht!=null&&V&&setRef(ht,a&&a.ref,rt,c||a,!c)},u=(a,c,E,F)=>{if(a==null)n(c.el=R(c.children),E,F);else{const V=c.el=a.el;c.children!==a.children&&g(V,c.children)}},w=(a,c,E,F)=>{a==null?n(c.el=T(c.children||""),E,F):c.el=a.el},A=(a,c,E,F)=>{[a.el,a.anchor]=r(a.children,c,E,F,a.el,a.anchor)},f=({el:a,anchor:c},E,F)=>{let V;for(;a&&a!==c;)V=P(a),n(a,E,F),a=V;n(c,E,F)},D=({el:a,anchor:c})=>{let E;for(;a&&a!==c;)E=P(a),i(a),a=E;i(c)},O=(a,c,E,F,V,rt,X,Q,$)=>{X=X||c.type==="svg",a==null?U(c,E,F,V,rt,X,Q,$):_(a,c,V,rt,X,Q,$)},U=(a,c,E,F,V,rt,X,Q)=>{let $,K;const{type:ht,props:L,shapeFlag:lt,transition:gt,patchFlag:bt,dirs:St}=a;if(a.el&&m!==void 0&&bt===-1)$=a.el=m(a.el);else{if($=a.el=b(a.type,rt,L&&L.is,L),lt&8?x($,a.children):lt&16&&v(a.children,$,null,F,V,rt&&ht!=="foreignObject",X,Q),St&&invokeDirectiveHook(a,null,F,"created"),L){for(const xt in L)xt!=="value"&&!isReservedProp(xt)&&h($,xt,null,L[xt],rt,a.children,F,V,W);"value"in L&&h($,"value",null,L.value),(K=L.onVnodeBeforeMount)&&invokeVNodeHook(K,F,a)}d($,a,a.scopeId,X,F)}St&&invokeDirectiveHook(a,null,F,"beforeMount");const Et=(!V||V&&!V.pendingBranch)&&gt&&!gt.persisted;Et&&gt.beforeEnter($),n($,c,E),((K=L&&L.onVnodeMounted)||Et||St)&&queuePostRenderEffect(()=>{K&&invokeVNodeHook(K,F,a),Et&&gt.enter($),St&&invokeDirectiveHook(a,null,F,"mounted")},V)},d=(a,c,E,F,V)=>{if(E&&k(a,E),F)for(let rt=0;rt<F.length;rt++)k(a,F[rt]);if(V){let rt=V.subTree;if(c===rt){const X=V.vnode;d(a,X,X.scopeId,X.slotScopeIds,V.parent)}}},v=(a,c,E,F,V,rt,X,Q,$=0)=>{for(let K=$;K<a.length;K++){const ht=a[K]=Q?cloneIfMounted(a[K]):normalizeVNode(a[K]);o(null,ht,c,E,F,V,rt,X,Q)}},_=(a,c,E,F,V,rt,X)=>{const Q=c.el=a.el;let{patchFlag:$,dynamicChildren:K,dirs:ht}=c;$|=a.patchFlag&16;const L=a.props||EMPTY_OBJ,lt=c.props||EMPTY_OBJ;let gt;E&&toggleRecurse(E,!1),(gt=lt.onVnodeBeforeUpdate)&&invokeVNodeHook(gt,E,c,a),ht&&invokeDirectiveHook(c,a,E,"beforeUpdate"),E&&toggleRecurse(E,!0);const bt=V&&c.type!=="foreignObject";if(K?I(a.dynamicChildren,K,Q,E,F,bt,rt):X||ct(a,c,Q,null,E,F,bt,rt,!1),$>0){if($&16)j(Q,c,L,lt,E,F,V);else if($&2&&L.class!==lt.class&&h(Q,"class",null,lt.class,V),$&4&&h(Q,"style",L.style,lt.style,V),$&8){const St=c.dynamicProps;for(let Et=0;Et<St.length;Et++){const xt=St[Et],kt=L[xt],Ut=lt[xt];(Ut!==kt||xt==="value")&&h(Q,xt,kt,Ut,V,a.children,E,F,W)}}$&1&&a.children!==c.children&&x(Q,c.children)}else!X&&K==null&&j(Q,c,L,lt,E,F,V);((gt=lt.onVnodeUpdated)||ht)&&queuePostRenderEffect(()=>{gt&&invokeVNodeHook(gt,E,c,a),ht&&invokeDirectiveHook(c,a,E,"updated")},F)},I=(a,c,E,F,V,rt,X)=>{for(let Q=0;Q<c.length;Q++){const $=a[Q],K=c[Q],ht=$.el&&($.type===Fragment||!isSameVNodeType($,K)||$.shapeFlag&70)?M($.el):E;o($,K,ht,null,F,V,rt,X,!0)}},j=(a,c,E,F,V,rt,X)=>{if(E!==F){for(const Q in F){if(isReservedProp(Q))continue;const $=F[Q],K=E[Q];$!==K&&Q!=="value"&&h(a,Q,K,$,X,c.children,V,rt,W)}if(E!==EMPTY_OBJ)for(const Q in E)!isReservedProp(Q)&&!(Q in F)&&h(a,Q,E[Q],null,X,c.children,V,rt,W);"value"in F&&h(a,"value",E.value,F.value)}},it=(a,c,E,F,V,rt,X,Q,$)=>{const K=c.el=a?a.el:R(""),ht=c.anchor=a?a.anchor:R("");let{patchFlag:L,dynamicChildren:lt,slotScopeIds:gt}=c;gt&&(Q=Q?Q.concat(gt):gt),a==null?(n(K,E,F),n(ht,E,F),v(c.children,E,ht,V,rt,X,Q,$)):L>0&&L&64&&lt&&a.dynamicChildren?(I(a.dynamicChildren,lt,E,V,rt,X,Q),(c.key!=null||V&&c===V.subTree)&&traverseStaticChildren(a,c,!0)):ct(a,c,E,ht,V,rt,X,Q,$)},Y=(a,c,E,F,V,rt,X,Q,$)=>{c.slotScopeIds=Q,a==null?c.shapeFlag&512?V.ctx.activate(c,E,F,X,$):ot(c,E,F,V,rt,X,$):et(a,c,$)},ot=(a,c,E,F,V,rt,X)=>{const Q=a.component=createComponentInstance(a,F,V);if(isKeepAlive(a)&&(Q.ctx.renderer=tt),setupComponent(Q),Q.asyncDep){if(V&&V.registerDep(Q,G),!a.el){const $=Q.subTree=createVNode(Comment);w(null,$,c,E)}return}G(Q,a,c,E,V,rt,X)},et=(a,c,E)=>{const F=c.component=a.component;if(shouldUpdateComponent(a,c,E))if(F.asyncDep&&!F.asyncResolved){nt(F,c,E);return}else F.next=c,invalidateJob(F.update),F.update();else c.el=a.el,F.vnode=c},G=(a,c,E,F,V,rt,X)=>{const Q=()=>{if(a.isMounted){let{next:ht,bu:L,u:lt,parent:gt,vnode:bt}=a,St=ht,Et;toggleRecurse(a,!1),ht?(ht.el=bt.el,nt(a,ht,X)):ht=bt,L&&invokeArrayFns(L),(Et=ht.props&&ht.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Et,gt,ht,bt),toggleRecurse(a,!0);const xt=renderComponentRoot(a),kt=a.subTree;a.subTree=xt,o(kt,xt,M(kt.el),z(kt),a,V,rt),ht.el=xt.el,St===null&&updateHOCHostEl(a,xt.el),lt&&queuePostRenderEffect(lt,V),(Et=ht.props&&ht.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Et,gt,ht,bt),V)}else{let ht;const{el:L,props:lt}=c,{bm:gt,m:bt,parent:St}=a,Et=isAsyncWrapper(c);if(toggleRecurse(a,!1),gt&&invokeArrayFns(gt),!Et&&(ht=lt&&lt.onVnodeBeforeMount)&&invokeVNodeHook(ht,St,c),toggleRecurse(a,!0),L&&C){const xt=()=>{a.subTree=renderComponentRoot(a),C(L,a.subTree,a,V,null)};Et?c.type.__asyncLoader().then(()=>!a.isUnmounted&&xt()):xt()}else{const xt=a.subTree=renderComponentRoot(a);o(null,xt,E,F,a,V,rt),c.el=xt.el}if(bt&&queuePostRenderEffect(bt,V),!Et&&(ht=lt&&lt.onVnodeMounted)){const xt=c;queuePostRenderEffect(()=>invokeVNodeHook(ht,St,xt),V)}(c.shapeFlag&256||St&&isAsyncWrapper(St.vnode)&&St.vnode.shapeFlag&256)&&a.a&&queuePostRenderEffect(a.a,V),a.isMounted=!0,c=E=F=null}},$=a.effect=new ReactiveEffect(Q,()=>queueJob(K),a.scope),K=a.update=()=>$.run();K.id=a.uid,toggleRecurse(a,!0),K()},nt=(a,c,E)=>{c.component=a;const F=a.vnode.props;a.vnode=c,a.next=null,updateProps(a,c.props,F,E),updateSlots(a,c.children,E),pauseTracking(),flushPreFlushCbs(),resetTracking()},ct=(a,c,E,F,V,rt,X,Q,$=!1)=>{const K=a&&a.children,ht=a?a.shapeFlag:0,L=c.children,{patchFlag:lt,shapeFlag:gt}=c;if(lt>0){if(lt&128){ft(K,L,E,F,V,rt,X,Q,$);return}else if(lt&256){dt(K,L,E,F,V,rt,X,Q,$);return}}gt&8?(ht&16&&W(K,V,rt),L!==K&&x(E,L)):ht&16?gt&16?ft(K,L,E,F,V,rt,X,Q,$):W(K,V,rt,!0):(ht&8&&x(E,""),gt&16&&v(L,E,F,V,rt,X,Q,$))},dt=(a,c,E,F,V,rt,X,Q,$)=>{a=a||EMPTY_ARR,c=c||EMPTY_ARR;const K=a.length,ht=c.length,L=Math.min(K,ht);let lt;for(lt=0;lt<L;lt++){const gt=c[lt]=$?cloneIfMounted(c[lt]):normalizeVNode(c[lt]);o(a[lt],gt,E,null,V,rt,X,Q,$)}K>ht?W(a,V,rt,!0,!1,L):v(c,E,F,V,rt,X,Q,$,L)},ft=(a,c,E,F,V,rt,X,Q,$)=>{let K=0;const ht=c.length;let L=a.length-1,lt=ht-1;for(;K<=L&&K<=lt;){const gt=a[K],bt=c[K]=$?cloneIfMounted(c[K]):normalizeVNode(c[K]);if(isSameVNodeType(gt,bt))o(gt,bt,E,null,V,rt,X,Q,$);else break;K++}for(;K<=L&&K<=lt;){const gt=a[L],bt=c[lt]=$?cloneIfMounted(c[lt]):normalizeVNode(c[lt]);if(isSameVNodeType(gt,bt))o(gt,bt,E,null,V,rt,X,Q,$);else break;L--,lt--}if(K>L){if(K<=lt){const gt=lt+1,bt=gt<ht?c[gt].el:F;for(;K<=lt;)o(null,c[K]=$?cloneIfMounted(c[K]):normalizeVNode(c[K]),E,bt,V,rt,X,Q,$),K++}}else if(K>lt)for(;K<=L;)S(a[K],V,rt,!0),K++;else{const gt=K,bt=K,St=new Map;for(K=bt;K<=lt;K++){const ut=c[K]=$?cloneIfMounted(c[K]):normalizeVNode(c[K]);ut.key!=null&&St.set(ut.key,K)}let Et,xt=0;const kt=lt-bt+1;let Ut=!1,wt=0;const Ot=new Array(kt);for(K=0;K<kt;K++)Ot[K]=0;for(K=gt;K<=L;K++){const ut=a[K];if(xt>=kt){S(ut,V,rt,!0);continue}let _t;if(ut.key!=null)_t=St.get(ut.key);else for(Et=bt;Et<=lt;Et++)if(Ot[Et-bt]===0&&isSameVNodeType(ut,c[Et])){_t=Et;break}_t===void 0?S(ut,V,rt,!0):(Ot[_t-bt]=K+1,_t>=wt?wt=_t:Ut=!0,o(ut,c[_t],E,null,V,rt,X,Q,$),xt++)}const Yt=Ut?getSequence(Ot):EMPTY_ARR;for(Et=Yt.length-1,K=kt-1;K>=0;K--){const ut=bt+K,_t=c[ut],at=ut+1<ht?c[ut+1].el:F;Ot[K]===0?o(null,_t,E,at,V,rt,X,Q,$):Ut&&(Et<0||K!==Yt[Et]?H(_t,E,at,2):Et--)}}},H=(a,c,E,F,V=null)=>{const{el:rt,type:X,transition:Q,children:$,shapeFlag:K}=a;if(K&6){H(a.component.subTree,c,E,F);return}if(K&128){a.suspense.move(c,E,F);return}if(K&64){X.move(a,c,E,tt);return}if(X===Fragment){n(rt,c,E);for(let L=0;L<$.length;L++)H($[L],c,E,F);n(a.anchor,c,E);return}if(X===Static){f(a,c,E);return}if(F!==2&&K&1&&Q)if(F===0)Q.beforeEnter(rt),n(rt,c,E),queuePostRenderEffect(()=>Q.enter(rt),V);else{const{leave:L,delayLeave:lt,afterLeave:gt}=Q,bt=()=>n(rt,c,E),St=()=>{L(rt,()=>{bt(),gt&&gt()})};lt?lt(rt,bt,St):St()}else n(rt,c,E)},S=(a,c,E,F=!1,V=!1)=>{const{type:rt,props:X,ref:Q,children:$,dynamicChildren:K,shapeFlag:ht,patchFlag:L,dirs:lt}=a;if(Q!=null&&setRef(Q,null,E,a,!0),ht&256){c.ctx.deactivate(a);return}const gt=ht&1&&lt,bt=!isAsyncWrapper(a);let St;if(bt&&(St=X&&X.onVnodeBeforeUnmount)&&invokeVNodeHook(St,c,a),ht&6)q(a.component,E,F);else{if(ht&128){a.suspense.unmount(E,F);return}gt&&invokeDirectiveHook(a,null,c,"beforeUnmount"),ht&64?a.type.remove(a,c,E,V,tt,F):K&&(rt!==Fragment||L>0&&L&64)?W(K,c,E,!1,!0):(rt===Fragment&&L&384||!V&&ht&16)&&W($,c,E),F&&y(a)}(bt&&(St=X&&X.onVnodeUnmounted)||gt)&&queuePostRenderEffect(()=>{St&&invokeVNodeHook(St,c,a),gt&&invokeDirectiveHook(a,null,c,"unmounted")},E)},y=a=>{const{type:c,el:E,anchor:F,transition:V}=a;if(c===Fragment){N(E,F);return}if(c===Static){D(a);return}const rt=()=>{i(E),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(a.shapeFlag&1&&V&&!V.persisted){const{leave:X,delayLeave:Q}=V,$=()=>X(E,rt);Q?Q(a.el,rt,$):$()}else rt()},N=(a,c)=>{let E;for(;a!==c;)E=P(a),i(a),a=E;i(c)},q=(a,c,E)=>{const{bum:F,scope:V,update:rt,subTree:X,um:Q}=a;F&&invokeArrayFns(F),V.stop(),rt&&(rt.active=!1,S(X,a,c,E)),Q&&queuePostRenderEffect(Q,c),queuePostRenderEffect(()=>{a.isUnmounted=!0},c),c&&c.pendingBranch&&!c.isUnmounted&&a.asyncDep&&!a.asyncResolved&&a.suspenseId===c.pendingId&&(c.deps--,c.deps===0&&c.resolve())},W=(a,c,E,F=!1,V=!1,rt=0)=>{for(let X=rt;X<a.length;X++)S(a[X],c,E,F,V)},z=a=>a.shapeFlag&6?z(a.component.subTree):a.shapeFlag&128?a.suspense.next():P(a.anchor||a.el),st=(a,c,E)=>{a==null?c._vnode&&S(c._vnode,null,null,!0):o(c._vnode||null,a,c,null,null,null,E),flushPreFlushCbs(),flushPostFlushCbs(),c._vnode=a},tt={p:o,um:S,m:H,r:y,mt:ot,mc:v,pc:ct,pbc:I,n:z,o:t};let l,C;return e&&([l,C]=e(tt)),{render:st,hydrate:l,createApp:createAppAPI(st,l)}}function toggleRecurse({effect:t,update:e},s){t.allowRecurse=e.allowRecurse=s}function traverseStaticChildren(t,e,s=!1){const n=t.children,i=e.children;if(isArray(n)&&isArray(i))for(let h=0;h<n.length;h++){const b=n[h];let R=i[h];R.shapeFlag&1&&!R.dynamicChildren&&((R.patchFlag<=0||R.patchFlag===32)&&(R=i[h]=cloneIfMounted(i[h]),R.el=b.el),s||traverseStaticChildren(b,R))}}function getSequence(t){const e=t.slice(),s=[0];let n,i,h,b,R;const T=t.length;for(n=0;n<T;n++){const g=t[n];if(g!==0){if(i=s[s.length-1],t[i]<g){e[n]=i,s.push(n);continue}for(h=0,b=s.length-1;h<b;)R=h+b>>1,t[s[R]]<g?h=R+1:b=R;g<t[s[h]]&&(h>0&&(e[n]=s[h-1]),s[h]=n)}}for(h=s.length,b=s[h-1];h-- >0;)s[h]=b,b=e[b];return s}const isTeleport=t=>t.__isTeleport,Fragment=Symbol(void 0),Text=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t){isBlockTreeEnabled+=t}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,e,s,n,i,h){return setupBlock(createBaseVNode(t,e,s,n,i,h,!0))}function createBlock(t,e,s,n,i){return setupBlock(createVNode(t,e,s,n,i,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,e){return t.type===e.type&&t.key===e.key}const InternalObjectKey="__vInternal",normalizeKey=({key:t})=>t!=null?t:null,normalizeRef=({ref:t,ref_key:e,ref_for:s})=>t!=null?isString(t)||isRef(t)||isFunction(t)?{i:currentRenderingInstance,r:t,k:e,f:!!s}:t:null;function createBaseVNode(t,e=null,s=null,n=0,i=null,h=t===Fragment?0:1,b=!1,R=!1){const T={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:h,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return R?(normalizeChildren(T,s),h&128&&t.normalize(T)):s&&(T.shapeFlag|=isString(s)?8:16),isBlockTreeEnabled>0&&!b&&currentBlock&&(T.patchFlag>0||h&6)&&T.patchFlag!==32&&currentBlock.push(T),T}const createVNode=_createVNode;function _createVNode(t,e=null,s=null,n=0,i=null,h=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const R=cloneVNode(t,e,!0);return s&&normalizeChildren(R,s),isBlockTreeEnabled>0&&!h&&currentBlock&&(R.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=R:currentBlock.push(R)),R.patchFlag|=-2,R}if(isClassComponent(t)&&(t=t.__vccOpts),e){e=guardReactiveProps(e);let{class:R,style:T}=e;R&&!isString(R)&&(e.class=normalizeClass(R)),isObject(T)&&(isProxy(T)&&!isArray(T)&&(T=extend({},T)),e.style=normalizeStyle(T))}const b=isString(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject(t)?4:isFunction(t)?2:0;return createBaseVNode(t,e,s,n,i,b,h,!0)}function guardReactiveProps(t){return t?isProxy(t)||InternalObjectKey in t?extend({},t):t:null}function cloneVNode(t,e,s=!1){const{props:n,ref:i,patchFlag:h,children:b}=t,R=e?mergeProps(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:R,key:R&&normalizeKey(R),ref:e&&e.ref?s&&i?isArray(i)?i.concat(normalizeRef(e)):[i,normalizeRef(e)]:normalizeRef(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:b,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fragment?h===-1?16:h|16:h,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor}}function createTextVNode(t=" ",e=0){return createVNode(Text,null,t,e)}function createCommentVNode(t="",e=!1){return e?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray(t)?createVNode(Fragment,null,t.slice()):typeof t=="object"?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null||t.memo?t:cloneVNode(t)}function normalizeChildren(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(isArray(e))s=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),normalizeChildren(t,i()),i._c&&(i._d=!0));return}else{s=32;const i=e._;!i&&!(InternalObjectKey in e)?e._ctx=currentRenderingInstance:i===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else isFunction(e)?(e={default:e,_ctx:currentRenderingInstance},s=32):(e=String(e),n&64?(s=16,e=[createTextVNode(e)]):s=8);t.children=e,t.shapeFlag|=s}function mergeProps(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=normalizeClass([e.class,n.class]));else if(i==="style")e.style=normalizeStyle([e.style,n.style]);else if(isOn(i)){const h=e[i],b=n[i];b&&h!==b&&!(isArray(h)&&h.includes(b))&&(e[i]=h?[].concat(h,b):b)}else i!==""&&(e[i]=n[i])}return e}function invokeVNodeHook(t,e,s,n=null){callWithAsyncErrorHandling(t,e,7,[s,n])}const emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance(t,e,s){const n=t.type,i=(e?e.appContext:t.appContext)||emptyAppContext,h={uid:uid$1++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,i),emitsOptions:normalizeEmitsOptions(n,i),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return h.ctx={_:h},h.root=e?e.root:h,h.emit=emit$1.bind(null,h),t.ce&&t.ce(h),h}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=t=>{currentInstance=t,t.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,e=!1){isInSSRComponentSetup=e;const{props:s,children:n}=t.vnode,i=isStatefulComponent(t);initProps(t,s,i,e),initSlots(t,n);const h=i?setupStatefulComponent(t,e):void 0;return isInSSRComponentSetup=!1,h}function setupStatefulComponent(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=markRaw(new Proxy(t.ctx,PublicInstanceProxyHandlers));const{setup:n}=s;if(n){const i=t.setupContext=n.length>1?createSetupContext(t):null;setCurrentInstance(t),pauseTracking();const h=callWithErrorHandling(n,t,0,[t.props,i]);if(resetTracking(),unsetCurrentInstance(),isPromise(h)){if(h.then(unsetCurrentInstance,unsetCurrentInstance),e)return h.then(b=>{handleSetupResult(t,b,e)}).catch(b=>{handleError(b,t,0)});t.asyncDep=h}else handleSetupResult(t,h,e)}else finishComponentSetup(t,e)}function handleSetupResult(t,e,s){isFunction(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:isObject(e)&&(t.setupState=proxyRefs(e)),finishComponentSetup(t,s)}let compile;function finishComponentSetup(t,e,s){const n=t.type;if(!t.render){if(!e&&compile&&!n.render){const i=n.template;if(i){const{isCustomElement:h,compilerOptions:b}=t.appContext.config,{delimiters:R,compilerOptions:T}=n,g=extend(extend({isCustomElement:h,delimiters:R},b),T);n.render=compile(i,g)}}t.render=n.render||NOOP}setCurrentInstance(t),pauseTracking(),applyOptions(t),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(t){return new Proxy(t.attrs,{get(e,s){return track(t,"get","$attrs"),e[s]}})}function createSetupContext(t){const e=n=>{t.exposed=n||{}};let s;return{get attrs(){return s||(s=createAttrsProxy(t))},slots:t.slots,emit:t.emit,expose:e}}function getExposeProxy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in publicPropertiesMap)return publicPropertiesMap[s](t)}}))}function isClassComponent(t){return isFunction(t)&&"__vccOpts"in t}const computed=(t,e)=>computed$1(t,e,isInSSRComponentSetup),version="3.2.38",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const i=e?doc.createElementNS(svgNS,t):doc.createElement(t,s?{is:s}:void 0);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,s,n,i,h){const b=s?s.previousSibling:e.lastChild;if(i&&(i===h||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),s),!(i===h||!(i=i.nextSibling)););else{templateContainer.innerHTML=n?`<svg>${t}</svg>`:t;const R=templateContainer.content;if(n){const T=R.firstChild;for(;T.firstChild;)R.appendChild(T.firstChild);R.removeChild(T)}e.insertBefore(R,s)}return[b?b.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}};function patchClass(t,e,s){const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}function patchStyle(t,e,s){const n=t.style,i=isString(s);if(s&&!i){for(const h in s)setStyle(n,h,s[h]);if(e&&!isString(e))for(const h in e)s[h]==null&&setStyle(n,h,"")}else{const h=n.display;i?e!==s&&(n.cssText=s):e&&t.removeAttribute("style"),"_vod"in t&&(n.display=h)}}const importantRE=/\s*!important$/;function setStyle(t,e,s){if(isArray(s))s.forEach(n=>setStyle(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=autoPrefix(t,e);importantRE.test(s)?t.setProperty(hyphenate(n),s.replace(importantRE,""),"important"):t[n]=s}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,e){const s=prefixCache[e];if(s)return s;let n=camelize(e);if(n!=="filter"&&n in t)return prefixCache[e]=n;n=capitalize(n);for(let i=0;i<prefixes.length;i++){const h=prefixes[i]+n;if(h in t)return prefixCache[e]=h}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,e,s,n,i){if(n&&e.startsWith("xlink:"))s==null?t.removeAttributeNS(xlinkNS,e.slice(6,e.length)):t.setAttributeNS(xlinkNS,e,s);else{const h=isSpecialBooleanAttr(e);s==null||h&&!includeBooleanAttr(s)?t.removeAttribute(e):t.setAttribute(e,h?"":s)}}function patchDOMProp(t,e,s,n,i,h,b){if(e==="innerHTML"||e==="textContent"){n&&b(n,i,h),t[e]=s==null?"":s;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=s;const T=s==null?"":s;(t.value!==T||t.tagName==="OPTION")&&(t.value=T),s==null&&t.removeAttribute(e);return}let R=!1;if(s===""||s==null){const T=typeof t[e];T==="boolean"?s=includeBooleanAttr(s):s==null&&T==="string"?(s="",R=!0):T==="number"&&(s=0,R=!0)}try{t[e]=s}catch{}R&&t.removeAttribute(e)}const[_getNow,skipTimestampCheck]=(()=>{let t=Date.now,e=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(t=performance.now.bind(performance));const s=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(s&&Number(s[1])<=53)}return[t,e]})();let cachedNow=0;const p=Promise.resolve(),reset=()=>{cachedNow=0},getNow=()=>cachedNow||(p.then(reset),cachedNow=_getNow());function addEventListener(t,e,s,n){t.addEventListener(e,s,n)}function removeEventListener(t,e,s,n){t.removeEventListener(e,s,n)}function patchEvent(t,e,s,n,i=null){const h=t._vei||(t._vei={}),b=h[e];if(n&&b)b.value=n;else{const[R,T]=parseName(e);if(n){const g=h[e]=createInvoker(n,i);addEventListener(t,R,g,T)}else b&&(removeEventListener(t,R,b,T),h[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let e;if(optionsModifierRE.test(t)){e={};let n;for(;n=t.match(optionsModifierRE);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),e]}function createInvoker(t,e){const s=n=>{const i=n.timeStamp||_getNow();(skipTimestampCheck||i>=s.attached-1)&&callWithAsyncErrorHandling(patchStopImmediatePropagation(n,s.value),e,5,[n])};return s.value=t,s.attached=getNow(),s}function patchStopImmediatePropagation(t,e){if(isArray(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const nativeOnRE=/^on[a-z]/,patchProp=(t,e,s,n,i=!1,h,b,R,T)=>{e==="class"?patchClass(t,n,i):e==="style"?patchStyle(t,s,n):isOn(e)?isModelListener(e)||patchEvent(t,e,s,n,b):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(t,e,n,i))?patchDOMProp(t,e,n,h,b,R,T):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),patchAttr(t,e,n,i))};function shouldSetAsProp(t,e,s,n){return n?!!(e==="innerHTML"||e==="textContent"||e in t&&nativeOnRE.test(e)&&isFunction(s)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||nativeOnRE.test(e)&&isString(s)?!1:e in t}const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};BaseTransition.props;const vShow={beforeMount(t,{value:e},{transition:s}){t._vod=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):setDisplay(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:n}){!e!=!s&&(n?e?(n.beforeEnter(t),setDisplay(t,!0),n.enter(t)):n.leave(t,()=>{setDisplay(t,!1)}):setDisplay(t,e))},beforeUnmount(t,{value:e}){setDisplay(t,e)}};function setDisplay(t,e){t.style.display=e?t._vod:"none"}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const e=ensureRenderer().createApp(...t),{mount:s}=e;return e.mount=n=>{const i=normalizeContainer(n);if(!i)return;const h=e._component;!isFunction(h)&&!h.render&&!h.template&&(h.template=i.innerHTML),i.innerHTML="";const b=s(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),b},e};function normalizeContainer(t){return isString(t)?document.querySelector(t):t}const style="";function getAugmentedNamespace(t){var e=t.default;if(typeof e=="function"){var s=function(){return e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),s}function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,s){module.exports=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=V,e.arraysToBytes=rt,e.assert=S,e.bytesToString=E,e.createPromiseCapability=_t,e.createValidAbsoluteUrl=N,e.escapeString=Et,e.getModificationDate=ut,e.getVerbosityLevel=ct,e.info=dt,e.isArrayBuffer=Ot,e.isArrayEqual=Yt,e.isAscii=xt,e.objectFromMap=$,e.objectSize=Q,e.setVerbosityLevel=nt,e.shadow=q,e.string32=X,e.stringToBytes=F,e.stringToPDFString=St,e.stringToUTF16BEString=kt,e.stringToUTF8String=Ut,e.unreachable=H,e.utf8StringToString=wt,e.warn=ft,s(2);const n=[1,0,0,1,0,0];e.IDENTITY_MATRIX=n;const i=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=i;const h=1.35;e.LINE_FACTOR=h;const b=.35;e.LINE_DESCENT_FACTOR=b;const R={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=R;const T={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=T;const g="pdfjs_internal_editor_";e.AnnotationEditorPrefix=g;const x={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};e.AnnotationEditorType=x;const M={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};e.AnnotationEditorParamsType=M;const P={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=P;const k={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=k;const m={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=m;const r={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=r;const o={MARKED:"Marked",REVIEW:"Review"};e.AnnotationStateModelType=o;const u={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationMarkedState=u;const w={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReviewState=w;const A={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=A;const f={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=f;const D={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=D;const O={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=O;const U={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=U;const d={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=d;const v={O:"PageOpen",C:"PageClose"};e.PageActionEventType=v;const _={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};e.StreamType=_;const I={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};e.FontType=I;const j={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=j;const it={NONE:0,BINARY:1,STREAM:2};e.CMapCompressionType=it;const Y={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=Y;const ot={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};e.UNSUPPORTED_FEATURES=ot;const et={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=et;let G=j.WARNINGS;function nt(at){Number.isInteger(at)&&(G=at)}function ct(){return G}function dt(at){G>=j.INFOS&&console.log(`Info: ${at}`)}function ft(at){G>=j.WARNINGS&&console.log(`Warning: ${at}`)}function H(at){throw new Error(at)}function S(at,J){at||H(J)}function y(at){if(!at)return!1;switch(at.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function N(at,J=null,Z=null){if(!at)return null;try{if(Z&&typeof at=="string"){if(Z.addDefaultProtocol&&at.startsWith("www.")){const vt=at.match(/\./g);vt&&vt.length>=2&&(at=`http://${at}`)}if(Z.tryConvertEncoding)try{at=Ut(at)}catch{}}const At=J?new URL(at,J):new URL(at);if(y(At))return At}catch{}return null}function q(at,J,Z){return Object.defineProperty(at,J,{value:Z,enumerable:!0,configurable:!0,writable:!1}),Z}const W=function(){function J(Z,At){this.constructor===J&&H("Cannot initialize BaseException."),this.message=Z,this.name=At}return J.prototype=new Error,J.constructor=J,J}();e.BaseException=W;class z extends W{constructor(J,Z){super(J,"PasswordException"),this.code=Z}}e.PasswordException=z;class st extends W{constructor(J,Z){super(J,"UnknownErrorException"),this.details=Z}}e.UnknownErrorException=st;class tt extends W{constructor(J){super(J,"InvalidPDFException")}}e.InvalidPDFException=tt;class l extends W{constructor(J){super(J,"MissingPDFException")}}e.MissingPDFException=l;class C extends W{constructor(J,Z){super(J,"UnexpectedResponseException"),this.status=Z}}e.UnexpectedResponseException=C;class a extends W{constructor(J){super(J,"FormatError")}}e.FormatError=a;class c extends W{constructor(J){super(J,"AbortException")}}e.AbortException=c;function E(at){(typeof at!="object"||at===null||at.length===void 0)&&H("Invalid argument for bytesToString");const J=at.length,Z=8192;if(J<Z)return String.fromCharCode.apply(null,at);const At=[];for(let vt=0;vt<J;vt+=Z){const Ct=Math.min(vt+Z,J),Tt=at.subarray(vt,Ct);At.push(String.fromCharCode.apply(null,Tt))}return At.join("")}function F(at){typeof at!="string"&&H("Invalid argument for stringToBytes");const J=at.length,Z=new Uint8Array(J);for(let At=0;At<J;++At)Z[At]=at.charCodeAt(At)&255;return Z}function V(at){if(at.length!==void 0)return at.length;if(at.byteLength!==void 0)return at.byteLength;H("Invalid argument for arrayByteLength")}function rt(at){const J=at.length;if(J===1&&at[0]instanceof Uint8Array)return at[0];let Z=0;for(let Ct=0;Ct<J;Ct++)Z+=V(at[Ct]);let At=0;const vt=new Uint8Array(Z);for(let Ct=0;Ct<J;Ct++){let Tt=at[Ct];Tt instanceof Uint8Array||(typeof Tt=="string"?Tt=F(Tt):Tt=new Uint8Array(Tt));const Rt=Tt.byteLength;vt.set(Tt,At),At+=Rt}return vt}function X(at){return String.fromCharCode(at>>24&255,at>>16&255,at>>8&255,at&255)}function Q(at){return Object.keys(at).length}function $(at){const J=Object.create(null);for(const[Z,At]of at)J[Z]=At;return J}function K(){const at=new Uint8Array(4);return at[0]=1,new Uint32Array(at.buffer,0,1)[0]===1}function ht(){try{return new Function(""),!0}catch{return!1}}class L{static get isLittleEndian(){return q(this,"isLittleEndian",K())}static get isEvalSupported(){return q(this,"isEvalSupported",ht())}static get isOffscreenCanvasSupported(){return q(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}e.FeatureTest=L;const lt=[...Array(256).keys()].map(at=>at.toString(16).padStart(2,"0"));class gt{static makeHexColor(J,Z,At){return`#${lt[J]}${lt[Z]}${lt[At]}`}static scaleMinMax(J,Z){let At;J[0]?(J[0]<0&&(At=Z[0],Z[0]=Z[1],Z[1]=At),Z[0]*=J[0],Z[1]*=J[0],J[3]<0&&(At=Z[2],Z[2]=Z[3],Z[3]=At),Z[2]*=J[3],Z[3]*=J[3]):(At=Z[0],Z[0]=Z[2],Z[2]=At,At=Z[1],Z[1]=Z[3],Z[3]=At,J[1]<0&&(At=Z[2],Z[2]=Z[3],Z[3]=At),Z[2]*=J[1],Z[3]*=J[1],J[2]<0&&(At=Z[0],Z[0]=Z[1],Z[1]=At),Z[0]*=J[2],Z[1]*=J[2]),Z[0]+=J[4],Z[1]+=J[4],Z[2]+=J[5],Z[3]+=J[5]}static transform(J,Z){return[J[0]*Z[0]+J[2]*Z[1],J[1]*Z[0]+J[3]*Z[1],J[0]*Z[2]+J[2]*Z[3],J[1]*Z[2]+J[3]*Z[3],J[0]*Z[4]+J[2]*Z[5]+J[4],J[1]*Z[4]+J[3]*Z[5]+J[5]]}static applyTransform(J,Z){const At=J[0]*Z[0]+J[1]*Z[2]+Z[4],vt=J[0]*Z[1]+J[1]*Z[3]+Z[5];return[At,vt]}static applyInverseTransform(J,Z){const At=Z[0]*Z[3]-Z[1]*Z[2],vt=(J[0]*Z[3]-J[1]*Z[2]+Z[2]*Z[5]-Z[4]*Z[3])/At,Ct=(-J[0]*Z[1]+J[1]*Z[0]+Z[4]*Z[1]-Z[5]*Z[0])/At;return[vt,Ct]}static getAxialAlignedBoundingBox(J,Z){const At=gt.applyTransform(J,Z),vt=gt.applyTransform(J.slice(2,4),Z),Ct=gt.applyTransform([J[0],J[3]],Z),Tt=gt.applyTransform([J[2],J[1]],Z);return[Math.min(At[0],vt[0],Ct[0],Tt[0]),Math.min(At[1],vt[1],Ct[1],Tt[1]),Math.max(At[0],vt[0],Ct[0],Tt[0]),Math.max(At[1],vt[1],Ct[1],Tt[1])]}static inverseTransform(J){const Z=J[0]*J[3]-J[1]*J[2];return[J[3]/Z,-J[1]/Z,-J[2]/Z,J[0]/Z,(J[2]*J[5]-J[4]*J[3])/Z,(J[4]*J[1]-J[5]*J[0])/Z]}static apply3dTransform(J,Z){return[J[0]*Z[0]+J[1]*Z[1]+J[2]*Z[2],J[3]*Z[0]+J[4]*Z[1]+J[5]*Z[2],J[6]*Z[0]+J[7]*Z[1]+J[8]*Z[2]]}static singularValueDecompose2dScale(J){const Z=[J[0],J[2],J[1],J[3]],At=J[0]*Z[0]+J[1]*Z[2],vt=J[0]*Z[1]+J[1]*Z[3],Ct=J[2]*Z[0]+J[3]*Z[2],Tt=J[2]*Z[1]+J[3]*Z[3],Rt=(At+Tt)/2,Dt=Math.sqrt((At+Tt)**2-4*(At*Tt-Ct*vt))/2,Mt=Rt+Dt||1,Pt=Rt-Dt||1;return[Math.sqrt(Mt),Math.sqrt(Pt)]}static normalizeRect(J){const Z=J.slice(0);return J[0]>J[2]&&(Z[0]=J[2],Z[2]=J[0]),J[1]>J[3]&&(Z[1]=J[3],Z[3]=J[1]),Z}static intersect(J,Z){const At=Math.max(Math.min(J[0],J[2]),Math.min(Z[0],Z[2])),vt=Math.min(Math.max(J[0],J[2]),Math.max(Z[0],Z[2]));if(At>vt)return null;const Ct=Math.max(Math.min(J[1],J[3]),Math.min(Z[1],Z[3])),Tt=Math.min(Math.max(J[1],J[3]),Math.max(Z[1],Z[3]));return Ct>Tt?null:[At,Ct,vt,Tt]}static bezierBoundingBox(J,Z,At,vt,Ct,Tt,Rt,Dt){const Mt=[],Pt=[[],[]];let Nt,Lt,Ht,Ft,Bt,qt,$t,Gt;for(let Kt=0;Kt<2;++Kt){if(Kt===0?(Lt=6*J-12*At+6*Ct,Nt=-3*J+9*At-9*Ct+3*Rt,Ht=3*At-3*J):(Lt=6*Z-12*vt+6*Tt,Nt=-3*Z+9*vt-9*Tt+3*Dt,Ht=3*vt-3*Z),Math.abs(Nt)<1e-12){if(Math.abs(Lt)<1e-12)continue;Ft=-Ht/Lt,0<Ft&&Ft<1&&Mt.push(Ft);continue}$t=Lt*Lt-4*Ht*Nt,Gt=Math.sqrt($t),!($t<0)&&(Bt=(-Lt+Gt)/(2*Nt),0<Bt&&Bt<1&&Mt.push(Bt),qt=(-Lt-Gt)/(2*Nt),0<qt&&qt<1&&Mt.push(qt))}let zt=Mt.length,jt;const Vt=zt;for(;zt--;)Ft=Mt[zt],jt=1-Ft,Pt[0][zt]=jt*jt*jt*J+3*jt*jt*Ft*At+3*jt*Ft*Ft*Ct+Ft*Ft*Ft*Rt,Pt[1][zt]=jt*jt*jt*Z+3*jt*jt*Ft*vt+3*jt*Ft*Ft*Tt+Ft*Ft*Ft*Dt;return Pt[0][Vt]=J,Pt[1][Vt]=Z,Pt[0][Vt+1]=Rt,Pt[1][Vt+1]=Dt,Pt[0].length=Pt[1].length=Vt+2,[Math.min(...Pt[0]),Math.min(...Pt[1]),Math.max(...Pt[0]),Math.max(...Pt[1])]}}e.Util=gt;const bt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function St(at){if(at[0]>="\xEF"){let Z;if(at[0]==="\xFE"&&at[1]==="\xFF"?Z="utf-16be":at[0]==="\xFF"&&at[1]==="\xFE"?Z="utf-16le":at[0]==="\xEF"&&at[1]==="\xBB"&&at[2]==="\xBF"&&(Z="utf-8"),Z)try{const At=new TextDecoder(Z,{fatal:!0}),vt=F(at);return At.decode(vt)}catch(At){ft(`stringToPDFString: "${At}".`)}}const J=[];for(let Z=0,At=at.length;Z<At;Z++){const vt=bt[at.charCodeAt(Z)];J.push(vt?String.fromCharCode(vt):at.charAt(Z))}return J.join("")}function Et(at){return at.replace(/([()\\\n\r])/g,J=>J===`
`?"\\n":J==="\r"?"\\r":`\\${J}`)}function xt(at){return/^[\x00-\x7F]*$/.test(at)}function kt(at){const J=["\xFE\xFF"];for(let Z=0,At=at.length;Z<At;Z++){const vt=at.charCodeAt(Z);J.push(String.fromCharCode(vt>>8&255),String.fromCharCode(vt&255))}return J.join("")}function Ut(at){return decodeURIComponent(escape(at))}function wt(at){return unescape(encodeURIComponent(at))}function Ot(at){return typeof at=="object"&&at!==null&&at.byteLength!==void 0}function Yt(at,J){if(at.length!==J.length)return!1;for(let Z=0,At=at.length;Z<At;Z++)if(at[Z]!==J[Z])return!1;return!0}function ut(at=new Date){return[at.getUTCFullYear().toString(),(at.getUTCMonth()+1).toString().padStart(2,"0"),at.getUTCDate().toString().padStart(2,"0"),at.getUTCHours().toString().padStart(2,"0"),at.getUTCMinutes().toString().padStart(2,"0"),at.getUTCSeconds().toString().padStart(2,"0")].join("")}function _t(){const at=Object.create(null);let J=!1;return Object.defineProperty(at,"settled",{get(){return J}}),at.promise=new Promise(function(Z,At){at.resolve=function(vt){J=!0,Z(vt)},at.reject=function(vt){J=!0,At(vt)}}),at}},(t,e,s)=>{s(3)},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=s},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t,s,n,i,h,b,R,T,g,le,M,P;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:m,NodeCMapReaderFactory:r,NodeStandardFontDataFactory:o}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=m,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=r,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=o}let createPDFNetworkStream;function setPDFNetworkStreamFactory(m){createPDFNetworkStream=m}function getDocument(m){const r=new PDFDocumentLoadingTask;let o;if(typeof m=="string"||m instanceof URL)o={url:m};else if((0,_util.isArrayBuffer)(m))o={data:m};else if(m instanceof PDFDataRangeTransport)o={range:m};else{if(typeof m!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!m.url&&!m.data&&!m.range)throw new Error("Invalid parameter object: need either .data, .range or .url");o=m}const u=Object.create(null);let w=null,A=null;for(const D in o){const O=o[D];switch(D){case"url":if(typeof window<"u")try{u[D]=new URL(O,window.location).href;continue}catch(U){(0,_util.warn)(`Cannot create valid URL: "${U}".`)}else if(typeof O=="string"||O instanceof URL){u[D]=O.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":w=O;continue;case"worker":A=O;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&O instanceof Buffer)u[D]=new Uint8Array(O);else{if(O instanceof Uint8Array)break;if(typeof O=="string")u[D]=(0,_util.stringToBytes)(O);else if(typeof O=="object"&&O!==null&&!isNaN(O.length))u[D]=new Uint8Array(O);else if((0,_util.isArrayBuffer)(O))u[D]=new Uint8Array(O);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}u[D]=O}if(u.CMapReaderFactory=u.CMapReaderFactory||DefaultCMapReaderFactory,u.StandardFontDataFactory=u.StandardFontDataFactory||DefaultStandardFontDataFactory,u.ignoreErrors=u.stopAtErrors!==!0,u.fontExtraProperties=u.fontExtraProperties===!0,u.pdfBug=u.pdfBug===!0,u.enableXfa=u.enableXfa===!0,(!Number.isInteger(u.rangeChunkSize)||u.rangeChunkSize<1)&&(u.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof u.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(u.docBaseUrl))&&(u.docBaseUrl=null),(!Number.isInteger(u.maxImageSize)||u.maxImageSize<-1)&&(u.maxImageSize=-1),typeof u.cMapUrl!="string"&&(u.cMapUrl=null),typeof u.standardFontDataUrl!="string"&&(u.standardFontDataUrl=null),typeof u.useWorkerFetch!="boolean"&&(u.useWorkerFetch=u.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&u.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof u.isEvalSupported!="boolean"&&(u.isEvalSupported=!0),typeof u.disableFontFace!="boolean"&&(u.disableFontFace=_is_node.isNodeJS),typeof u.useSystemFonts!="boolean"&&(u.useSystemFonts=!_is_node.isNodeJS&&!u.disableFontFace),(typeof u.ownerDocument!="object"||u.ownerDocument===null)&&(u.ownerDocument=globalThis.document),typeof u.disableRange!="boolean"&&(u.disableRange=!1),typeof u.disableStream!="boolean"&&(u.disableStream=!1),typeof u.disableAutoFetch!="boolean"&&(u.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(u.verbosity),!A){const D={verbosity:u.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};A=D.port?PDFWorker.fromPort(D):new PDFWorker(D),r._worker=A}const f=r.docId;return A.promise.then(function(){if(r.destroyed)throw new Error("Loading aborted");const D=_fetchDocument(A,u,w,f),O=new Promise(function(U){let d;w?d=new _transport_stream.PDFDataTransportStream({length:u.length,initialData:u.initialData,progressiveDone:u.progressiveDone,contentDispositionFilename:u.contentDispositionFilename,disableRange:u.disableRange,disableStream:u.disableStream},w):u.data||(d=createPDFNetworkStream({url:u.url,length:u.length,httpHeaders:u.httpHeaders,withCredentials:u.withCredentials,rangeChunkSize:u.rangeChunkSize,disableRange:u.disableRange,disableStream:u.disableStream})),U(d)});return Promise.all([D,O]).then(function([U,d]){if(r.destroyed)throw new Error("Loading aborted");const v=new _message_handler.MessageHandler(f,U,A.port),_=new WorkerTransport(v,r,d,u);r._transport=_,v.send("Ready",null)})}).catch(r._capability.reject),r}async function _fetchDocument(m,r,o,u){if(m.destroyed)throw new Error("Worker was destroyed");o&&(r.length=o.length,r.initialData=o.initialData,r.progressiveDone=o.progressiveDone,r.contentDispositionFilename=o.contentDispositionFilename);const w=await m.messageHandler.sendWithPromise("GetDocRequest",{docId:u,apiVersion:"2.16.105",source:{data:r.data,url:r.url,password:r.password,disableAutoFetch:r.disableAutoFetch,rangeChunkSize:r.rangeChunkSize,length:r.length},maxImageSize:r.maxImageSize,disableFontFace:r.disableFontFace,docBaseUrl:r.docBaseUrl,ignoreErrors:r.ignoreErrors,isEvalSupported:r.isEvalSupported,fontExtraProperties:r.fontExtraProperties,enableXfa:r.enableXfa,useSystemFonts:r.useSystemFonts,cMapUrl:r.useWorkerFetch?r.cMapUrl:null,standardFontDataUrl:r.useWorkerFetch?r.standardFontDataUrl:null});if(r.data&&(r.data=null),m.destroyed)throw new Error("Worker was destroyed");return w}const e=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${oe(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var r;this.destroyed=!0,await((r=this._transport)==null?void 0:r.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=e;t=new WeakMap,pt(PDFDocumentLoadingTask,t,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(r,o,u=!1,w=null){this.length=r,this.initialData=o,this.progressiveDone=u,this.contentDispositionFilename=w,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(r){this._rangeListeners.push(r)}addProgressListener(r){this._progressListeners.push(r)}addProgressiveReadListener(r){this._progressiveReadListeners.push(r)}addProgressiveDoneListener(r){this._progressiveDoneListeners.push(r)}onDataRange(r,o){for(const u of this._rangeListeners)u(r,o)}onDataProgress(r,o){this._readyCapability.promise.then(()=>{for(const u of this._progressListeners)u(r,o)})}onDataProgressiveRead(r){this._readyCapability.promise.then(()=>{for(const o of this._progressiveReadListeners)o(r)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const r of this._progressiveDoneListeners)r()})}transportReady(){this._readyCapability.resolve()}requestDataRange(r,o){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(r,o){this._pdfInfo=r,this._transport=o,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(r){return this._transport.getPage(r)}getPageIndex(r){return this._transport.getPageIndex(r)}getDestinations(){return this._transport.getDestinations()}getDestination(r){return this._transport.getDestination(r)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(r=!1){return this._transport.startCleanup(r||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(r,o,u,w,A=!1){this._pageIndex=r,this._pageInfo=o,this._ownerDocument=w,this._transport=u,this._stats=A?new _display_utils.StatTimer:null,this._pdfBug=A,this.commonObjs=u.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:r,rotation:o=this.rotate,offsetX:u=0,offsetY:w=0,dontFlip:A=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:r,rotation:o,offsetX:u,offsetY:w,dontFlip:A})}getAnnotations({intent:r="display"}={}){const o=this._transport.getRenderingIntent(r);let u=this._annotationPromises.get(o.cacheKey);return u||(u=this._transport.getAnnotations(this._pageIndex,o.renderingIntent),this._annotationPromises.set(o.cacheKey,u),u=u.then(w=>{for(const A of w)A.titleObj!==void 0&&Object.defineProperty(A,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),A.titleObj.str}}),A.contentsObj!==void 0&&Object.defineProperty(A,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),A.contentsObj.str}});return w})),u}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var r;return((r=this._transport._htmlForXfa)==null?void 0:r.children[this._pageIndex])||null}render({canvasContext:r,viewport:o,intent:u="display",annotationMode:w=_util.AnnotationMode.ENABLE,transform:A=null,imageLayer:f=null,canvasFactory:D=null,background:O=null,optionalContentConfigPromise:U=null,annotationCanvasMap:d=null,pageColors:v=null,printAnnotationStorage:_=null}){var nt,ct;((nt=arguments[0])==null?void 0:nt.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&w===_util.AnnotationMode.ENABLE&&(w=_util.AnnotationMode.ENABLE_FORMS)),((ct=arguments[0])==null?void 0:ct.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&w===_util.AnnotationMode.ENABLE&&(w=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const I=this._transport.getRenderingIntent(u,w,_);this.pendingCleanup=!1,U||(U=this._transport.getOptionalContentConfig());let j=this._intentStates.get(I.cacheKey);j||(j=Object.create(null),this._intentStates.set(I.cacheKey,j)),j.streamReaderCancelTimeout&&(clearTimeout(j.streamReaderCancelTimeout),j.streamReaderCancelTimeout=null);const it=D||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),Y=!!(I.renderingIntent&_util.RenderingIntentFlag.PRINT);j.displayReadyCapability||(j.displayReadyCapability=(0,_util.createPromiseCapability)(),j.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(I));const ot=dt=>{j.renderTasks.delete(et),(this.cleanupAfterRender||Y)&&(this.pendingCleanup=!0),this._tryCleanup(),dt?(et.capability.reject(dt),this._abortOperatorList({intentState:j,reason:dt instanceof Error?dt:new Error(dt)})):et.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},et=new InternalRenderTask({callback:ot,params:{canvasContext:r,viewport:o,transform:A,imageLayer:f,background:O},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:j.operatorList,pageIndex:this._pageIndex,canvasFactory:it,useRequestAnimationFrame:!Y,pdfBug:this._pdfBug,pageColors:v});(j.renderTasks||(j.renderTasks=new Set)).add(et);const G=et.task;return Promise.all([j.displayReadyCapability.promise,U]).then(([dt,ft])=>{if(this.pendingCleanup){ot();return}this._stats&&this._stats.time("Rendering"),et.initializeGraphics({transparency:dt,optionalContentConfig:ft}),et.operatorListChanged()}).catch(ot),G}getOperatorList({intent:r="display",annotationMode:o=_util.AnnotationMode.ENABLE,printAnnotationStorage:u=null}={}){function w(){f.operatorList.lastChunk&&(f.opListReadCapability.resolve(f.operatorList),f.renderTasks.delete(D))}const A=this._transport.getRenderingIntent(r,o,u,!0);let f=this._intentStates.get(A.cacheKey);f||(f=Object.create(null),this._intentStates.set(A.cacheKey,f));let D;return f.opListReadCapability||(D=Object.create(null),D.operatorListChanged=w,f.opListReadCapability=(0,_util.createPromiseCapability)(),(f.renderTasks||(f.renderTasks=new Set)).add(D),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(A)),f.opListReadCapability.promise}streamTextContent({disableCombineTextItems:r=!1,includeMarkedContent:o=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:r!==!0,includeMarkedContent:o===!0},{highWaterMark:100,size(w){return w.items.length}})}getTextContent(r={}){if(this._transport._htmlForXfa)return this.getXfa().then(u=>_xfa_text.XfaText.textContent(u));const o=this.streamTextContent(r);return new Promise(function(u,w){function A(){f.read().then(function({value:O,done:U}){if(U){u(D);return}Object.assign(D.styles,O.styles),D.items.push(...O.items),A()},w)}const f=o.getReader(),D={items:[],styles:Object.create(null)};A()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const r=[];for(const o of this._intentStates.values())if(this._abortOperatorList({intentState:o,reason:new Error("Page was destroyed."),force:!0}),!o.opListReadCapability)for(const u of o.renderTasks)r.push(u.completed),u.cancel();this.objs.clear();for(const o of this._bitmaps)o.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(r)}cleanup(r=!1){return this.pendingCleanup=!0,this._tryCleanup(r)}_tryCleanup(r=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:o,operatorList:u}of this._intentStates.values())if(o.size>0||!u.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,r&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const o of this._bitmaps)o.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(r,o){const u=this._intentStates.get(o);!u||(this._stats&&this._stats.timeEnd("Page Request"),u.displayReadyCapability&&u.displayReadyCapability.resolve(r))}_renderPageChunk(r,o){for(let u=0,w=r.length;u<w;u++)o.operatorList.fnArray.push(r.fnArray[u]),o.operatorList.argsArray.push(r.argsArray[u]);o.operatorList.lastChunk=r.lastChunk,o.operatorList.separateAnnots=r.separateAnnots;for(const u of o.renderTasks)u.operatorListChanged();r.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:r,cacheKey:o,annotationStorageMap:u}){const A=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:r,cacheKey:o,annotationStorage:u}).getReader(),f=this._intentStates.get(o);f.streamReader=A;const D=()=>{A.read().then(({value:O,done:U})=>{if(U){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(O,f),D())},O=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const U of f.renderTasks)U.operatorListChanged();this._tryCleanup()}if(f.displayReadyCapability)f.displayReadyCapability.reject(O);else if(f.opListReadCapability)f.opListReadCapability.reject(O);else throw O}})};D()}_abortOperatorList({intentState:r,reason:o,force:u=!1}){if(!!r.streamReader){if(!u){if(r.renderTasks.size>0)return;if(o instanceof _display_utils.RenderingCancelledException){r.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:r,reason:o,force:!0}),r.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(r.streamReader.cancel(new _util.AbortException(o.message)).catch(()=>{}),r.streamReader=null,!this._transport.destroyed){for(const[w,A]of this._intentStates)if(A===r){this._intentStates.delete(w);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(r,o){const u={data:structuredClone(r,o)};this._deferred.then(()=>{for(const w of this._listeners)w.call(this,u)})}addEventListener(r,o){this._listeners.push(o)}removeEventListener(r,o){const u=this._listeners.indexOf(o);this._listeners.splice(u,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const m=(s=document==null?void 0:document.currentScript)==null?void 0:s.src;m&&(PDFWorkerUtil.fallbackWorkerSrc=m.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(m,r){let o;try{if(o=new URL(m),!o.origin||o.origin==="null")return!1}catch{return!1}const u=new URL(r,o);return o.origin===u.origin},PDFWorkerUtil.createCDNWrapper=function(m){const r=`importScripts("${m}");`;return URL.createObjectURL(new Blob([r]))}}const _PDFWorker=class{constructor({name:m=null,port:r=null,verbosity:o=(0,_util.getVerbosityLevel)()}={}){if(r&&B(_PDFWorker,n).has(r))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=m,this.destroyed=!1,this.verbosity=o,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,r){B(_PDFWorker,n).set(r,this),this._initializeFromPort(r);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(m){this._port=m,this._messageHandler=new _message_handler.MessageHandler("main","worker",m),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:m}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,m)||(m=PDFWorkerUtil.createCDNWrapper(new URL(m,window.location).href));const r=new Worker(m),o=new _message_handler.MessageHandler("main","worker",r),u=()=>{r.removeEventListener("error",w),o.destroy(),r.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},w=()=>{this._webWorker||u()};r.addEventListener("error",w),o.on("test",f=>{if(r.removeEventListener("error",w),this.destroyed){u();return}f?(this._messageHandler=o,this._port=r,this._webWorker=r,this._readyCapability.resolve(),o.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),o.destroy(),r.terminate())}),o.on("ready",f=>{if(r.removeEventListener("error",w),this.destroyed){u();return}try{A()}catch{this._setupFakeWorker()}});const A=()=>{const f=new Uint8Array;o.send("test",f,[f.buffer])};A();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(m=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const r=new LoopbackPort;this._port=r;const o=`fake${PDFWorkerUtil.fakeWorkerId++}`,u=new _message_handler.MessageHandler(o+"_worker",o,r);m.setup(u,r);const w=new _message_handler.MessageHandler(o,o+"_worker",r);this._messageHandler=w,this._readyCapability.resolve(),w.send("configure",{verbosity:this.verbosity})}).catch(m=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${m.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),B(_PDFWorker,n).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(m){if(!(m!=null&&m.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return B(this,n).has(m.port)?B(this,n).get(m.port):new _PDFWorker(m)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var m;try{return((m=globalThis.pdfjsWorker)==null?void 0:m.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;n=new WeakMap,pt(PDFWorker,n,new WeakMap),exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(r,o,u,w){pt(this,i,null);pt(this,h,new Map);pt(this,b,new Map);pt(this,R,null);this.messageHandler=r,this.loadingTask=o,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:o.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:w.ownerDocument,styleElement:w.styleElement}),this._params=w,w.useWorkerFetch||(this.CMapReaderFactory=new w.CMapReaderFactory({baseUrl:w.cMapUrl,isCompressed:w.cMapPacked}),this.StandardFontDataFactory=new w.StandardFontDataFactory({baseUrl:w.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=u,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return B(this,i)}getRenderingIntent(r,o=_util.AnnotationMode.ENABLE,u=null,w=!1){let A=_util.RenderingIntentFlag.DISPLAY,f=null;switch(r){case"any":A=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":A=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${r}`)}switch(o){case _util.AnnotationMode.DISABLE:A+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:A+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:A+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,f=(A&_util.RenderingIntentFlag.PRINT&&u instanceof _annotation_storage.PrintAnnotationStorage?u:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${o}`)}return w&&(A+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:A,cacheKey:`${A}_${_annotation_storage.AnnotationStorage.getHash(f)}`,annotationStorageMap:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const r=[];for(const u of B(this,h).values())r.push(u._destroy());B(this,h).clear(),B(this,b).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const o=this.messageHandler.sendWithPromise("Terminate",null);return r.push(o),Promise.all(r).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),yt(this,R,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:r,loadingTask:o}=this;r.on("GetReader",(u,w)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=A=>{this._lastProgress={loaded:A.loaded,total:A.total}},w.onPull=()=>{this._fullReader.read().then(function({value:A,done:f}){if(f){w.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(A),"GetReader - expected an ArrayBuffer."),w.enqueue(new Uint8Array(A),1,[A])}).catch(A=>{w.error(A)})},w.onCancel=A=>{this._fullReader.cancel(A),w.ready.catch(f=>{if(!this.destroyed)throw f})}}),r.on("ReaderHeadersReady",u=>{const w=(0,_util.createPromiseCapability)(),A=this._fullReader;return A.headersReady.then(()=>{var f;(!A.isStreamingSupported||!A.isRangeSupported)&&(this._lastProgress&&((f=o.onProgress)==null||f.call(o,this._lastProgress)),A.onProgress=D=>{var O;(O=o.onProgress)==null||O.call(o,{loaded:D.loaded,total:D.total})}),w.resolve({isStreamingSupported:A.isStreamingSupported,isRangeSupported:A.isRangeSupported,contentLength:A.contentLength})},w.reject),w.promise}),r.on("GetRangeReader",(u,w)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const A=this._networkStream.getRangeReader(u.begin,u.end);if(!A){w.close();return}w.onPull=()=>{A.read().then(function({value:f,done:D}){if(D){w.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(f),"GetRangeReader - expected an ArrayBuffer."),w.enqueue(new Uint8Array(f),1,[f])}).catch(f=>{w.error(f)})},w.onCancel=f=>{A.cancel(f),w.ready.catch(D=>{if(!this.destroyed)throw D})}}),r.on("GetDoc",({pdfInfo:u})=>{this._numPages=u.numPages,this._htmlForXfa=u.htmlForXfa,delete u.htmlForXfa,o._capability.resolve(new PDFDocumentProxy(u,this))}),r.on("DocException",function(u){let w;switch(u.name){case"PasswordException":w=new _util.PasswordException(u.message,u.code);break;case"InvalidPDFException":w=new _util.InvalidPDFException(u.message);break;case"MissingPDFException":w=new _util.MissingPDFException(u.message);break;case"UnexpectedResponseException":w=new _util.UnexpectedResponseException(u.message,u.status);break;case"UnknownErrorException":w=new _util.UnknownErrorException(u.message,u.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}o._capability.reject(w)}),r.on("PasswordRequest",u=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),o.onPassword){const w=A=>{A instanceof Error?this._passwordCapability.reject(A):this._passwordCapability.resolve({password:A})};try{o.onPassword(w,u.code)}catch(A){this._passwordCapability.reject(A)}}else this._passwordCapability.reject(new _util.PasswordException(u.message,u.code));return this._passwordCapability.promise}),r.on("DataLoaded",u=>{var w;(w=o.onProgress)==null||w.call(o,{loaded:u.length,total:u.length}),this.downloadInfoCapability.resolve(u)}),r.on("StartRenderPage",u=>{if(this.destroyed)return;B(this,h).get(u.pageIndex)._startRenderPage(u.transparency,u.cacheKey)}),r.on("commonobj",([u,w,A])=>{var f;if(!this.destroyed&&!this.commonObjs.has(u))switch(w){case"Font":const D=this._params;if("error"in A){const d=A.error;(0,_util.warn)(`Error during font loading: ${d}`),this.commonObjs.resolve(u,d);break}let O=null;D.pdfBug&&((f=globalThis.FontInspector)==null?void 0:f.enabled)&&(O={registerFont(d,v){globalThis.FontInspector.fontAdded(d,v)}});const U=new _font_loader.FontFaceObject(A,{isEvalSupported:D.isEvalSupported,disableFontFace:D.disableFontFace,ignoreErrors:D.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:O});this.fontLoader.bind(U).catch(d=>r.sendWithPromise("FontFallback",{id:u})).finally(()=>{!D.fontExtraProperties&&U.data&&(U.data=null),this.commonObjs.resolve(u,U)});break;case"FontPath":case"Image":this.commonObjs.resolve(u,A);break;default:throw new Error(`Got unknown common object type ${w}`)}}),r.on("obj",([u,w,A,f])=>{var O;if(this.destroyed)return;const D=B(this,h).get(w);if(!D.objs.has(u))switch(A){case"Image":D.objs.resolve(u,f);const U=8e6;if(f){let d;if(f.bitmap){const{bitmap:v,width:_,height:I}=f;d=_*I*4,D._bitmaps.add(v)}else d=((O=f.data)==null?void 0:O.length)||0;d>U&&(D.cleanupAfterRender=!0)}break;case"Pattern":D.objs.resolve(u,f);break;default:throw new Error(`Got unknown object type ${A}`)}}),r.on("DocProgress",u=>{var w;this.destroyed||(w=o.onProgress)==null||w.call(o,{loaded:u.loaded,total:u.total})}),r.on("DocStats",u=>{this.destroyed||yt(this,i,Object.freeze({streamTypes:Object.freeze(u.streamTypes),fontTypes:Object.freeze(u.fontTypes)}))}),r.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),r.on("FetchBuiltInCMap",u=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(u):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),r.on("FetchStandardFontData",u=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(u):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:r}){var o,u;this.destroyed||(u=(o=this.loadingTask).onUnsupportedFeature)==null||u.call(o,r)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(r){if(!Number.isInteger(r)||r<=0||r>this._numPages)return Promise.reject(new Error("Invalid page request."));const o=r-1,u=B(this,b).get(o);if(u)return u;const w=this.messageHandler.sendWithPromise("GetPage",{pageIndex:o}).then(A=>{if(this.destroyed)throw new Error("Transport destroyed");const f=new PDFPageProxy(o,A,this,this._params.ownerDocument,this._params.pdfBug);return B(this,h).set(o,f),f});return B(this,b).set(o,w),w}getPageIndex(r){return typeof r!="object"||r===null||!Number.isInteger(r.num)||r.num<0||!Number.isInteger(r.gen)||r.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:r.num,gen:r.gen})}getAnnotations(r,o){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:r,intent:o})}saveDocument(){var r,o;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(o=(r=this._fullReader)==null?void 0:r.filename)!=null?o:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(r){return typeof r!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:r})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(r){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:r})}getStructTree(r){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:r})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(r=>new _optional_content_config.OptionalContentConfig(r))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return B(this,R)||yt(this,R,this.messageHandler.sendWithPromise("GetMetadata",null).then(r=>{var o,u,w,A;return{info:r[0],metadata:r[1]?new _metadata.Metadata(r[1]):null,contentDispositionFilename:(u=(o=this._fullReader)==null?void 0:o.filename)!=null?u:null,contentLength:(A=(w=this._fullReader)==null?void 0:w.contentLength)!=null?A:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(r=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const o of B(this,h).values())if(!o.cleanup())throw new Error(`startCleanup: Page ${o.pageNumber} is currently rendering.`);this.commonObjs.clear(),r||this.fontLoader.clear(),yt(this,R,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const r=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:r.disableAutoFetch,enableXfa:r.enableXfa})}}i=new WeakMap,h=new WeakMap,b=new WeakMap,R=new WeakMap;class PDFObjects{constructor(){pt(this,g);pt(this,T,Object.create(null))}get(r,o=null){if(o){const w=mt(this,g,le).call(this,r);return w.capability.promise.then(()=>o(w.data)),null}const u=B(this,T)[r];if(!(u!=null&&u.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${r}.`);return u.data}has(r){const o=B(this,T)[r];return(o==null?void 0:o.capability.settled)||!1}resolve(r,o=null){const u=mt(this,g,le).call(this,r);u.data=o,u.capability.resolve()}clear(){yt(this,T,Object.create(null))}}T=new WeakMap,g=new WeakSet,le=function(r){const o=B(this,T)[r];return o||(B(this,T)[r]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(r){pt(this,M,null);yt(this,M,r),this.onContinue=null}get promise(){return B(this,M).capability.promise}cancel(){B(this,M).cancel()}get separateAnnots(){const{separateAnnots:r}=B(this,M).operatorList;if(!r)return!1;const{annotationCanvasMap:o}=B(this,M);return r.form||r.canvas&&(o==null?void 0:o.size)>0}}M=new WeakMap,exports.RenderTask=RenderTask;const k=class{constructor({callback:r,params:o,objs:u,commonObjs:w,annotationCanvasMap:A,operatorList:f,pageIndex:D,canvasFactory:O,useRequestAnimationFrame:U=!1,pdfBug:d=!1,pageColors:v=null}){this.callback=r,this.params=o,this.objs=u,this.commonObjs=w,this.annotationCanvasMap=A,this.operatorListIdx=null,this.operatorList=f,this._pageIndex=D,this.canvasFactory=O,this._pdfBug=d,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=U===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=o.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:r=!1,optionalContentConfig:o}){var O;if(this.cancelled)return;if(this._canvas){if(B(k,P).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");B(k,P).add(this._canvas)}this._pdfBug&&((O=globalThis.StepperManager)==null?void 0:O.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:u,viewport:w,transform:A,imageLayer:f,background:D}=this.params;this.gfx=new _canvas.CanvasGraphics(u,this.commonObjs,this.objs,this.canvasFactory,f,o,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:A,viewport:w,transparency:r,background:D}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(r=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&B(k,P).delete(this._canvas),this.callback(r||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&B(k,P).delete(this._canvas),this.callback())))}};let InternalRenderTask=k;P=new WeakMap,pt(InternalRenderTask,P,new WeakSet);const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(t,e,s)=>{var T,Te,x;Object.defineProperty(e,"__esModule",{value:!0}),e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var n=s(1),i=s(6),h=s(10);class b{constructor(){pt(this,T);this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(P,k){const m=this._storage.get(P);return m===void 0?k:Object.assign(k,m)}getRawValue(P){return this._storage.get(P)}remove(P){if(this._storage.delete(P),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const k of this._storage.values())if(k instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(P,k){const m=this._storage.get(P);let r=!1;if(m!==void 0)for(const[o,u]of Object.entries(k))m[o]!==u&&(r=!0,m[o]=u);else r=!0,this._storage.set(P,k);r&&mt(this,T,Te).call(this),k instanceof i.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(k.constructor._type)}has(P){return this._storage.has(P)}getAll(){return this._storage.size>0?(0,n.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new R(this)}get serializable(){if(this._storage.size===0)return null;const P=new Map;for(const[k,m]of this._storage){const r=m instanceof i.AnnotationEditor?m.serialize():m;r&&P.set(k,r)}return P}static getHash(P){if(!P)return"";const k=new h.MurmurHash3_64;for(const[m,r]of P)k.update(`${m}:${JSON.stringify(r)}`);return k.hexdigest()}}T=new WeakSet,Te=function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=b;class R extends b{constructor(k){super();pt(this,x,null);yt(this,x,structuredClone(k.serializable))}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return B(this,x)}}x=new WeakMap,e.PrintAnnotationStorage=R},(t,e,s)=>{var b,R,T,g,x,M;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var n=s(7),i=s(1);const P=class{constructor(m){pt(this,b,this.focusin.bind(this));pt(this,R,this.focusout.bind(this));pt(this,T,!1);pt(this,g,!1);pt(this,x,!1);pt(this,M,P._zIndex++);this.constructor===P&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=m.parent,this.id=m.id,this.width=this.height=null,this.pageIndex=m.parent.pageIndex,this.name=m.name,this.div=null;const[r,o]=this.parent.viewportBaseDimensions;this.x=m.x/r,this.y=m.y/o,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=B(this,M)}focusin(m){B(this,T)?yt(this,T,!1):this.parent.setSelected(this)}focusout(m){if(!this.isAttachedToDOM)return;const r=m.relatedTarget;r!=null&&r.closest(`#${this.id}`)||(m.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(m){const r=this.parent.div.getBoundingClientRect();this.startX=m.clientX-r.x,this.startY=m.clientY-r.y,m.dataTransfer.setData("text/plain",this.id),m.dataTransfer.effectAllowed="move"}setAt(m,r,o,u){const[w,A]=this.parent.viewportBaseDimensions;[o,u]=this.screenToPageTranslation(o,u),this.x=(m+o)/w,this.y=(r+u)/A,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(m,r){const[o,u]=this.parent.viewportBaseDimensions;[m,r]=this.screenToPageTranslation(m,r),this.x+=m/o,this.y+=r/u,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(m,r){const{rotation:o}=this.parent.viewport;switch(o){case 90:return[r,-m];case 180:return[-m,-r];case 270:return[-r,m];default:return[m,r]}}setDims(m,r){const[o,u]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*m/o}%`,this.div.style.height=`${100*r/u}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",B(this,b)),this.div.addEventListener("focusout",B(this,R));const[m,r]=this.getInitialTranslation();return this.translate(m,r),(0,n.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(m){const r=n.KeyboardManager.platform.isMac;if(m.button!==0||m.ctrlKey&&r){m.preventDefault();return}m.ctrlKey&&!r||m.shiftKey||m.metaKey&&r?this.parent.toggleSelected(this):this.parent.setSelected(this),yt(this,T,!0)}getRect(m,r){const[o,u]=this.parent.viewportBaseDimensions,[w,A]=this.parent.pageDimensions,f=w*m/o,D=A*r/u,O=this.x*w,U=this.y*A,d=this.width*w,v=this.height*A;switch(this.rotation){case 0:return[O+f,A-U-D-v,O+f+d,A-U-D];case 90:return[O+D,A-U+f,O+D+v,A-U+f+d];case 180:return[O-f-d,A-U+D,O-f,A-U+D+v];case 270:return[O-D-v,A-U-f-d,O-D,A-U-f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(m,r){const[o,u,w,A]=m,f=w-o,D=A-u;switch(this.rotation){case 0:return[o,r-A,f,D];case 90:return[o,r-u,D,f];case 180:return[w,r-u,f,D];case 270:return[w,r-A,D,f];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){yt(this,x,!0)}disableEditMode(){yt(this,x,!1)}isInEditMode(){return B(this,x)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var m;(m=this.div)==null||m.addEventListener("focusin",B(this,b))}serialize(){(0,i.unreachable)("An editor must be serializable")}static deserialize(m,r){const o=new this.prototype.constructor({parent:r,id:r.getNextId()});o.rotation=m.rotation;const[u,w]=r.pageDimensions,[A,f,D,O]=o.getRectInCurrentCoords(m.rect,w);return o.x=A/u,o.y=f/w,o.width=D/u,o.height=O/w,o}remove(){this.div.removeEventListener("focusin",B(this,b)),this.div.removeEventListener("focusout",B(this,R)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var m;(m=this.div)==null||m.classList.add("selectedEditor")}unselect(){var m;(m=this.div)==null||m.classList.remove("selectedEditor")}updateParams(m,r){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return B(this,g)}set isEditing(m){yt(this,g,m),m?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let h=P;b=new WeakMap,R=new WeakMap,T=new WeakMap,g=new WeakMap,x=new WeakMap,M=new WeakMap,It(h,"_colorManager",new n.ColorManager),It(h,"_zIndex",1),e.AnnotationEditor=h},(t,e,s)=>{var k,m,r,o,u,w,xe,D,U,d,v,_,I,j,it,Y,ot,et,G,nt,ct,dt,ft,H,S,y,Pe,q,ce,z,Wt,tt,Zt,C,we,c,ke,F,he,rt,te,Q,ee;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=h,e.opacityToHex=b;var n=s(1),i=s(8);function h(ht,L,lt){for(const gt of lt)L.addEventListener(gt,ht[gt].bind(ht))}function b(ht){return Math.round(Math.min(255,Math.max(1,255*ht))).toString(16).padStart(2,"0")}class R{constructor(){pt(this,k,0)}getId(){return`${n.AnnotationEditorPrefix}${oe(this,k)._++}`}}k=new WeakMap;class T{constructor(L=128){pt(this,m,[]);pt(this,r,!1);pt(this,o,void 0);pt(this,u,-1);yt(this,o,L)}add({cmd:L,undo:lt,mustExec:gt,type:bt=NaN,overwriteIfSameType:St=!1,keepUndo:Et=!1}){if(gt&&L(),B(this,r))return;const xt={cmd:L,undo:lt,type:bt};if(B(this,u)===-1){B(this,m).length>0&&(B(this,m).length=0),yt(this,u,0),B(this,m).push(xt);return}if(St&&B(this,m)[B(this,u)].type===bt){Et&&(xt.undo=B(this,m)[B(this,u)].undo),B(this,m)[B(this,u)]=xt;return}const kt=B(this,u)+1;kt===B(this,o)?B(this,m).splice(0,1):(yt(this,u,kt),kt<B(this,m).length&&B(this,m).splice(kt)),B(this,m).push(xt)}undo(){B(this,u)!==-1&&(yt(this,r,!0),B(this,m)[B(this,u)].undo(),yt(this,r,!1),yt(this,u,B(this,u)-1))}redo(){B(this,u)<B(this,m).length-1&&(yt(this,u,B(this,u)+1),yt(this,r,!0),B(this,m)[B(this,u)].cmd(),yt(this,r,!1))}hasSomethingToUndo(){return B(this,u)!==-1}hasSomethingToRedo(){return B(this,u)<B(this,m).length-1}destroy(){yt(this,m,null)}}m=new WeakMap,r=new WeakMap,o=new WeakMap,u=new WeakMap,e.CommandManager=T;const f=class{constructor(L){pt(this,w);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const lt=f.platform.isMac;for(const[gt,bt]of L)for(const St of gt){const Et=St.startsWith("mac+");lt&&Et?(this.callbacks.set(St.slice(4),bt),this.allKeys.add(St.split("+").at(-1))):!lt&&!Et&&(this.callbacks.set(St,bt),this.allKeys.add(St.split("+").at(-1)))}}static get platform(){const L=typeof navigator<"u"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:L.includes("Win"),isMac:L.includes("Mac")})}exec(L,lt){if(!this.allKeys.has(lt.key))return;const gt=this.callbacks.get(mt(this,w,xe).call(this,lt));!gt||(gt.bind(L)(),lt.stopPropagation(),lt.preventDefault())}};let g=f;w=new WeakSet,xe=function(L){L.altKey&&this.buffer.push("alt"),L.ctrlKey&&this.buffer.push("ctrl"),L.metaKey&&this.buffer.push("meta"),L.shiftKey&&this.buffer.push("shift"),this.buffer.push(L.key);const lt=this.buffer.join("+");return this.buffer.length=0,lt},e.KeyboardManager=g;class x{constructor(){pt(this,D,null)}copy(L){!L||(Array.isArray(L)?yt(this,D,L.map(lt=>lt.serialize())):yt(this,D,[L.serialize()]),yt(this,D,B(this,D).filter(lt=>!!lt)),B(this,D).length===0&&yt(this,D,null))}paste(){return B(this,D)}isEmpty(){return B(this,D)===null}destroy(){yt(this,D,null)}}D=new WeakMap;const O=class{get _colors(){const L=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(L),(0,n.shadow)(this,"_colors",L)}convert(L){const lt=(0,i.getRGB)(L);if(!window.matchMedia("(forced-colors: active)").matches)return lt;for(const[gt,bt]of this._colors)if(bt.every((St,Et)=>St===lt[Et]))return O._colorsMapping.get(gt);return lt}getHexCode(L){const lt=this._colors.get(L);return lt?n.Util.makeHexColor(...lt):L}};let M=O;It(M,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),e.ColorManager=M;const K=class{constructor(L,lt){pt(this,y);pt(this,q);pt(this,z);pt(this,tt);pt(this,C);pt(this,c);pt(this,F);pt(this,rt);pt(this,Q);pt(this,U,null);pt(this,d,new Map);pt(this,v,new Map);pt(this,_,new x);pt(this,I,new T);pt(this,j,0);pt(this,it,null);pt(this,Y,null);pt(this,ot,new R);pt(this,et,!1);pt(this,G,n.AnnotationEditorType.NONE);pt(this,nt,new Set);pt(this,ct,this.keydown.bind(this));pt(this,dt,this.onEditingAction.bind(this));pt(this,ft,this.onPageChanging.bind(this));pt(this,H,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});pt(this,S,null);yt(this,S,L),yt(this,Y,lt),B(this,Y)._on("editingaction",B(this,dt)),B(this,Y)._on("pagechanging",B(this,ft))}destroy(){mt(this,q,ce).call(this),B(this,Y)._off("editingaction",B(this,dt)),B(this,Y)._off("pagechanging",B(this,ft));for(const L of B(this,v).values())L.destroy();B(this,v).clear(),B(this,d).clear(),yt(this,U,null),B(this,nt).clear(),B(this,_).destroy(),B(this,I).destroy()}onPageChanging({pageNumber:L}){yt(this,j,L-1)}focusMainContainer(){B(this,S).focus()}keydown(L){var lt;(lt=this.getActive())!=null&&lt.shouldGetKeyboardEvents()||K._keyboardManager.exec(this,L)}onEditingAction(L){["undo","redo","cut","copy","paste","delete","selectAll"].includes(L.name)&&this[L.name]()}setEditingState(L){L?(mt(this,y,Pe).call(this),mt(this,z,Wt).call(this,{isEditing:B(this,G)!==n.AnnotationEditorType.NONE,isEmpty:mt(this,rt,te).call(this),hasSomethingToUndo:B(this,I).hasSomethingToUndo(),hasSomethingToRedo:B(this,I).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:B(this,_).isEmpty()})):(mt(this,q,ce).call(this),mt(this,z,Wt).call(this,{isEditing:!1}))}registerEditorTypes(L){yt(this,it,L);for(const lt of B(this,it))mt(this,tt,Zt).call(this,lt.defaultPropertiesToUpdate)}getId(){return B(this,ot).getId()}addLayer(L){B(this,v).set(L.pageIndex,L),B(this,et)?L.enable():L.disable()}removeLayer(L){B(this,v).delete(L.pageIndex)}updateMode(L){if(yt(this,G,L),L===n.AnnotationEditorType.NONE)this.setEditingState(!1),mt(this,c,ke).call(this);else{this.setEditingState(!0),mt(this,C,we).call(this);for(const lt of B(this,v).values())lt.updateMode(L)}}updateToolbar(L){L!==B(this,G)&&B(this,Y).dispatch("switchannotationeditormode",{source:this,mode:L})}updateParams(L,lt){for(const gt of B(this,nt))gt.updateParams(L,lt);for(const gt of B(this,it))gt.updateDefaultParams(L,lt)}getEditors(L){const lt=[];for(const gt of B(this,d).values())gt.pageIndex===L&&lt.push(gt);return lt}getEditor(L){return B(this,d).get(L)}addEditor(L){B(this,d).set(L.id,L)}removeEditor(L){B(this,d).delete(L.id),this.unselect(L)}setActiveEditor(L){B(this,U)!==L&&(yt(this,U,L),L&&mt(this,tt,Zt).call(this,L.propertiesToUpdate))}toggleSelected(L){if(B(this,nt).has(L)){B(this,nt).delete(L),L.unselect(),mt(this,z,Wt).call(this,{hasSelectedEditor:this.hasSelection});return}B(this,nt).add(L),L.select(),mt(this,tt,Zt).call(this,L.propertiesToUpdate),mt(this,z,Wt).call(this,{hasSelectedEditor:!0})}setSelected(L){for(const lt of B(this,nt))lt!==L&&lt.unselect();B(this,nt).clear(),B(this,nt).add(L),L.select(),mt(this,tt,Zt).call(this,L.propertiesToUpdate),mt(this,z,Wt).call(this,{hasSelectedEditor:!0})}isSelected(L){return B(this,nt).has(L)}unselect(L){L.unselect(),B(this,nt).delete(L),mt(this,z,Wt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return B(this,nt).size!==0}undo(){B(this,I).undo(),mt(this,z,Wt).call(this,{hasSomethingToUndo:B(this,I).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:mt(this,rt,te).call(this)})}redo(){B(this,I).redo(),mt(this,z,Wt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:B(this,I).hasSomethingToRedo(),isEmpty:mt(this,rt,te).call(this)})}addCommands(L){B(this,I).add(L),mt(this,z,Wt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:mt(this,rt,te).call(this)})}delete(){if(B(this,U)&&B(this,U).commitOrRemove(),!this.hasSelection)return;const L=[...B(this,nt)],lt=()=>{for(const bt of L)bt.remove()},gt=()=>{for(const bt of L)mt(this,F,he).call(this,bt)};this.addCommands({cmd:lt,undo:gt,mustExec:!0})}copy(){if(B(this,U)&&B(this,U).commitOrRemove(),this.hasSelection){const L=[];for(const lt of B(this,nt))lt.isEmpty()||L.push(lt);if(L.length===0)return;B(this,_).copy(L),mt(this,z,Wt).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(B(this,_).isEmpty())return;this.unselectAll();const L=B(this,v).get(B(this,j)),lt=B(this,_).paste().map(St=>L.deserialize(St)),gt=()=>{for(const St of lt)mt(this,F,he).call(this,St);mt(this,Q,ee).call(this,lt)},bt=()=>{for(const St of lt)St.remove()};this.addCommands({cmd:gt,undo:bt,mustExec:!0})}selectAll(){for(const L of B(this,nt))L.commit();mt(this,Q,ee).call(this,B(this,d).values())}unselectAll(){if(B(this,U)){B(this,U).commitOrRemove();return}if(mt(this,Q,ee).size!==0){for(const L of B(this,nt))L.unselect();B(this,nt).clear(),mt(this,z,Wt).call(this,{hasSelectedEditor:!1})}}isActive(L){return B(this,U)===L}getActive(){return B(this,U)}getMode(){return B(this,G)}};let P=K;U=new WeakMap,d=new WeakMap,v=new WeakMap,_=new WeakMap,I=new WeakMap,j=new WeakMap,it=new WeakMap,Y=new WeakMap,ot=new WeakMap,et=new WeakMap,G=new WeakMap,nt=new WeakMap,ct=new WeakMap,dt=new WeakMap,ft=new WeakMap,H=new WeakMap,S=new WeakMap,y=new WeakSet,Pe=function(){B(this,S).addEventListener("keydown",B(this,ct))},q=new WeakSet,ce=function(){B(this,S).removeEventListener("keydown",B(this,ct))},z=new WeakSet,Wt=function(L){Object.entries(L).some(([gt,bt])=>B(this,H)[gt]!==bt)&&B(this,Y).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(B(this,H),L)})},tt=new WeakSet,Zt=function(L){B(this,Y).dispatch("annotationeditorparamschanged",{source:this,details:L})},C=new WeakSet,we=function(){if(!B(this,et)){yt(this,et,!0);for(const L of B(this,v).values())L.enable()}},c=new WeakSet,ke=function(){if(this.unselectAll(),B(this,et)){yt(this,et,!1);for(const L of B(this,v).values())L.disable()}},F=new WeakSet,he=function(L){const lt=B(this,v).get(L.pageIndex);lt?lt.addOrRebuild(L):this.addEditor(L)},rt=new WeakSet,te=function(){if(B(this,d).size===0)return!0;if(B(this,d).size===1)for(const L of B(this,d).values())return L.isEmpty();return!1},Q=new WeakSet,ee=function(L){B(this,nt).clear();for(const lt of L)lt.isEmpty()||(B(this,nt).add(lt),lt.select());mt(this,z,Wt).call(this,{hasSelectedEditor:!0})},It(P,"_keyboardManager",new g([[["ctrl+a","mac+meta+a"],K.prototype.selectAll],[["ctrl+c","mac+meta+c"],K.prototype.copy],[["ctrl+v","mac+meta+v"],K.prototype.paste],[["ctrl+x","mac+meta+x"],K.prototype.cut],[["ctrl+z","mac+meta+z"],K.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],K.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],K.prototype.delete],[["Escape","mac+Escape"],K.prototype.unselectAll]])),e.AnnotationEditorUIManager=P},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=e.AnnotationPrefix=void 0,e.deprecated=O,e.getColorValues=I,e.getCurrentTransform=j,e.getCurrentTransformInverse=it,e.getFilenameFromUrl=u,e.getPdfFilenameFromUrl=w,e.getRGB=_,e.getXfaPageViewport=v,e.isDataScheme=r,e.isPdfFile=o,e.isValidFetchUrl=f,e.loadScript=D;var n=s(9),i=s(1);const h="http://www.w3.org/2000/svg",b="pdfjs_internal_id_";e.AnnotationPrefix=b;const Y=class{};let R=Y;It(R,"CSS",96),It(R,"PDF",72),It(R,"PDF_TO_CSS_UNITS",Y.CSS/Y.PDF),e.PixelsPerInch=R;class T extends n.BaseCanvasFactory{constructor({ownerDocument:et=globalThis.document}={}){super(),this._document=et}_createCanvas(et,G){const nt=this._document.createElement("canvas");return nt.width=et,nt.height=G,nt}}e.DOMCanvasFactory=T;async function g(ot,et=!1){if(f(ot,document.baseURI)){const G=await fetch(ot);if(!G.ok)throw new Error(G.statusText);return et?new Uint8Array(await G.arrayBuffer()):(0,i.stringToBytes)(await G.text())}return new Promise((G,nt)=>{const ct=new XMLHttpRequest;ct.open("GET",ot,!0),et&&(ct.responseType="arraybuffer"),ct.onreadystatechange=()=>{if(ct.readyState===XMLHttpRequest.DONE){if(ct.status===200||ct.status===0){let dt;if(et&&ct.response?dt=new Uint8Array(ct.response):!et&&ct.responseText&&(dt=(0,i.stringToBytes)(ct.responseText)),dt){G(dt);return}}nt(new Error(ct.statusText))}},ct.send(null)})}class x extends n.BaseCMapReaderFactory{_fetchData(et,G){return g(et,this.isCompressed).then(nt=>({cMapData:nt,compressionType:G}))}}e.DOMCMapReaderFactory=x;class M extends n.BaseStandardFontDataFactory{_fetchData(et){return g(et,!0)}}e.DOMStandardFontDataFactory=M;class P extends n.BaseSVGFactory{_createSVG(et){return document.createElementNS(h,et)}}e.DOMSVGFactory=P;class k{constructor({viewBox:et,scale:G,rotation:nt,offsetX:ct=0,offsetY:dt=0,dontFlip:ft=!1}){this.viewBox=et,this.scale=G,this.rotation=nt,this.offsetX=ct,this.offsetY=dt;const H=(et[2]+et[0])/2,S=(et[3]+et[1])/2;let y,N,q,W;switch(nt%=360,nt<0&&(nt+=360),nt){case 180:y=-1,N=0,q=0,W=1;break;case 90:y=0,N=1,q=1,W=0;break;case 270:y=0,N=-1,q=-1,W=0;break;case 0:y=1,N=0,q=0,W=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ft&&(q=-q,W=-W);let z,st,tt,l;y===0?(z=Math.abs(S-et[1])*G+ct,st=Math.abs(H-et[0])*G+dt,tt=Math.abs(et[3]-et[1])*G,l=Math.abs(et[2]-et[0])*G):(z=Math.abs(H-et[0])*G+ct,st=Math.abs(S-et[1])*G+dt,tt=Math.abs(et[2]-et[0])*G,l=Math.abs(et[3]-et[1])*G),this.transform=[y*G,N*G,q*G,W*G,z-y*G*H-q*G*S,st-N*G*H-W*G*S],this.width=tt,this.height=l}clone({scale:et=this.scale,rotation:G=this.rotation,offsetX:nt=this.offsetX,offsetY:ct=this.offsetY,dontFlip:dt=!1}={}){return new k({viewBox:this.viewBox.slice(),scale:et,rotation:G,offsetX:nt,offsetY:ct,dontFlip:dt})}convertToViewportPoint(et,G){return i.Util.applyTransform([et,G],this.transform)}convertToViewportRectangle(et){const G=i.Util.applyTransform([et[0],et[1]],this.transform),nt=i.Util.applyTransform([et[2],et[3]],this.transform);return[G[0],G[1],nt[0],nt[1]]}convertToPdfPoint(et,G){return i.Util.applyInverseTransform([et,G],this.transform)}}e.PageViewport=k;class m extends i.BaseException{constructor(et,G){super(et,"RenderingCancelledException"),this.type=G}}e.RenderingCancelledException=m;function r(ot){const et=ot.length;let G=0;for(;G<et&&ot[G].trim()==="";)G++;return ot.substring(G,G+5).toLowerCase()==="data:"}function o(ot){return typeof ot=="string"&&/\.pdf$/i.test(ot)}function u(ot){const et=ot.indexOf("#"),G=ot.indexOf("?"),nt=Math.min(et>0?et:ot.length,G>0?G:ot.length);return ot.substring(ot.lastIndexOf("/",nt)+1,nt)}function w(ot,et="document.pdf"){if(typeof ot!="string")return et;if(r(ot))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),et;const G=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,nt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,ct=G.exec(ot);let dt=nt.exec(ct[1])||nt.exec(ct[2])||nt.exec(ct[3]);if(dt&&(dt=dt[0],dt.includes("%")))try{dt=nt.exec(decodeURIComponent(dt))[0]}catch{}return dt||et}class A{constructor(){this.started=Object.create(null),this.times=[]}time(et){et in this.started&&(0,i.warn)(`Timer is already running for ${et}`),this.started[et]=Date.now()}timeEnd(et){et in this.started||(0,i.warn)(`Timer has not been started for ${et}`),this.times.push({name:et,start:this.started[et],end:Date.now()}),delete this.started[et]}toString(){const et=[];let G=0;for(const nt of this.times){const ct=nt.name;ct.length>G&&(G=ct.length)}for(const nt of this.times){const ct=nt.end-nt.start;et.push(`${nt.name.padEnd(G)} ${ct}ms
`)}return et.join("")}}e.StatTimer=A;function f(ot,et){try{const{protocol:G}=et?new URL(ot,et):new URL(ot);return G==="http:"||G==="https:"}catch{return!1}}function D(ot,et=!1){return new Promise((G,nt)=>{const ct=document.createElement("script");ct.src=ot,ct.onload=function(dt){et&&ct.remove(),G(dt)},ct.onerror=function(){nt(new Error(`Cannot load script at: ${ct.src}`))},(document.head||document.documentElement).append(ct)})}function O(ot){console.log("Deprecated API usage: "+ot)}let U;class d{static toDateObject(et){if(!et||typeof et!="string")return null;U||(U=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const G=U.exec(et);if(!G)return null;const nt=parseInt(G[1],10);let ct=parseInt(G[2],10);ct=ct>=1&&ct<=12?ct-1:0;let dt=parseInt(G[3],10);dt=dt>=1&&dt<=31?dt:1;let ft=parseInt(G[4],10);ft=ft>=0&&ft<=23?ft:0;let H=parseInt(G[5],10);H=H>=0&&H<=59?H:0;let S=parseInt(G[6],10);S=S>=0&&S<=59?S:0;const y=G[7]||"Z";let N=parseInt(G[8],10);N=N>=0&&N<=23?N:0;let q=parseInt(G[9],10)||0;return q=q>=0&&q<=59?q:0,y==="-"?(ft+=N,H+=q):y==="+"&&(ft-=N,H-=q),new Date(Date.UTC(nt,ct,dt,ft,H,S))}}e.PDFDateString=d;function v(ot,{scale:et=1,rotation:G=0}){const{width:nt,height:ct}=ot.attributes.style,dt=[0,0,parseInt(nt),parseInt(ct)];return new k({viewBox:dt,scale:et,rotation:G})}function _(ot){if(ot.startsWith("#")){const et=parseInt(ot.slice(1),16);return[(et&16711680)>>16,(et&65280)>>8,et&255]}return ot.startsWith("rgb(")?ot.slice(4,-1).split(",").map(et=>parseInt(et)):ot.startsWith("rgba(")?ot.slice(5,-1).split(",").map(et=>parseInt(et)).slice(0,3):((0,i.warn)(`Not a valid color format: "${ot}"`),[0,0,0])}function I(ot){const et=document.createElement("span");et.style.visibility="hidden",document.body.append(et);for(const G of ot.keys()){et.style.color=G;const nt=window.getComputedStyle(et).color;ot.set(G,_(nt))}et.remove()}function j(ot){const{a:et,b:G,c:nt,d:ct,e:dt,f:ft}=ot.getTransform();return[et,G,nt,ct,dt,ft]}function it(ot){const{a:et,b:G,c:nt,d:ct,e:dt,f:ft}=ot.getTransform().invertSelf();return[et,G,nt,ct,dt,ft]}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var n=s(1);class i{constructor(){this.constructor===i&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(g,x){if(g<=0||x<=0)throw new Error("Invalid canvas size");const M=this._createCanvas(g,x);return{canvas:M,context:M.getContext("2d")}}reset(g,x,M){if(!g.canvas)throw new Error("Canvas is not specified");if(x<=0||M<=0)throw new Error("Invalid canvas size");g.canvas.width=x,g.canvas.height=M}destroy(g){if(!g.canvas)throw new Error("Canvas is not specified");g.canvas.width=0,g.canvas.height=0,g.canvas=null,g.context=null}_createCanvas(g,x){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=i;class h{constructor({baseUrl:g=null,isCompressed:x=!1}){this.constructor===h&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=g,this.isCompressed=x}async fetch({name:g}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!g)throw new Error("CMap name must be specified.");const x=this.baseUrl+g+(this.isCompressed?".bcmap":""),M=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(x,M).catch(P=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${x}`)})}_fetchData(g,x){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=h;class b{constructor({baseUrl:g=null}){this.constructor===b&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=g}async fetch({filename:g}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!g)throw new Error("Font filename must be specified.");const x=`${this.baseUrl}${g}`;return this._fetchData(x).catch(M=>{throw new Error(`Unable to load font data at: ${x}`)})}_fetchData(g){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=b;class R{constructor(){this.constructor===R&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(g,x,M=!1){if(g<=0||x<=0)throw new Error("Invalid SVG dimensions");const P=this._createSVG("svg:svg");return P.setAttribute("version","1.1"),M||(P.setAttribute("width",`${g}px`),P.setAttribute("height",`${x}px`)),P.setAttribute("preserveAspectRatio","none"),P.setAttribute("viewBox",`0 0 ${g} ${x}`),P}createElement(g){if(typeof g!="string")throw new Error("Invalid SVG element type");return this._createSVG(g)}_createSVG(g){(0,n.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=R},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var n=s(1);const i=3285377520,h=4294901760,b=65535;class R{constructor(g){this.h1=g?g&4294967295:i,this.h2=g?g&4294967295:i}update(g){let x,M;if(typeof g=="string"){x=new Uint8Array(g.length*2),M=0;for(let U=0,d=g.length;U<d;U++){const v=g.charCodeAt(U);v<=255?x[M++]=v:(x[M++]=v>>>8,x[M++]=v&255)}}else if((0,n.isArrayBuffer)(g))x=g.slice(),M=x.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const P=M>>2,k=M-P*4,m=new Uint32Array(x.buffer,0,P);let r=0,o=0,u=this.h1,w=this.h2;const A=3432918353,f=461845907,D=A&b,O=f&b;for(let U=0;U<P;U++)U&1?(r=m[U],r=r*A&h|r*D&b,r=r<<15|r>>>17,r=r*f&h|r*O&b,u^=r,u=u<<13|u>>>19,u=u*5+3864292196):(o=m[U],o=o*A&h|o*D&b,o=o<<15|o>>>17,o=o*f&h|o*O&b,w^=o,w=w<<13|w>>>19,w=w*5+3864292196);switch(r=0,k){case 3:r^=x[P*4+2]<<16;case 2:r^=x[P*4+1]<<8;case 1:r^=x[P*4],r=r*A&h|r*D&b,r=r<<15|r>>>17,r=r*f&h|r*O&b,P&1?u^=r:w^=r}this.h1=u,this.h2=w}hexdigest(){let g=this.h1,x=this.h2;g^=x>>>1,g=g*3981806797&h|g*36045&b,x=x*4283543511&h|((x<<16|g>>>16)*2950163797&h)>>>16,g^=x>>>1,g=g*444984403&h|g*60499&b,x=x*3301882366&h|((x<<16|g>>>16)*3120437893&h)>>>16,g^=x>>>1;const M=(g>>>0).toString(16),P=(x>>>0).toString(16);return M.padStart(8,"0")+P.padStart(8,"0")}}e.MurmurHash3_64=R},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n=s(1);class i{constructor({docId:T,onUnsupportedFeature:g,ownerDocument:x=globalThis.document,styleElement:M=null}){this.constructor===i&&(0,n.unreachable)("Cannot initialize BaseFontLoader."),this.docId=T,this._onUnsupportedFeature=g,this._document=x,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(T){this.nativeFontFaces.push(T),this._document.fonts.add(T)}insertRule(T){let g=this.styleElement;g||(g=this.styleElement=this._document.createElement("style"),g.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(g));const x=g.sheet;x.insertRule(T,x.cssRules.length)}clear(){for(const T of this.nativeFontFaces)this._document.fonts.delete(T);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(T){if(T.attached||T.missingFile)return;if(T.attached=!0,this.isFontLoadingAPISupported){const x=T.createNativeFontFace();if(x){this.addNativeFontFace(x);try{await x.loaded}catch(M){throw this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,n.warn)(`Failed to load font '${x.family}': '${M}'.`),T.disableFontFace=!0,M}}return}const g=T.createFontFaceRule();if(g){if(this.insertRule(g),this.isSyncFontLoadingSupported)return;await new Promise(x=>{const M=this._queueLoadingCallback(x);this._prepareFontLoadEvent([g],[T],M)})}}_queueLoadingCallback(T){(0,n.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var g;const T=!!((g=this._document)!=null&&g.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",T)}get isSyncFontLoadingSupported(){(0,n.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,n.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(T,g,x){(0,n.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let h;e.FontLoader=h,e.FontLoader=h=class extends i{constructor(T){super(T),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let T=!1;if(typeof navigator>"u")T=!0;else{const g=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(g==null?void 0:g[1])>=14&&(T=!0)}return(0,n.shadow)(this,"isSyncFontLoadingSupported",T)}_queueLoadingCallback(T){function g(){for((0,n.assert)(!M.done,"completeRequest() cannot be called twice."),M.done=!0;x.requests.length>0&&x.requests[0].done;){const P=x.requests.shift();setTimeout(P.callback,0)}}const x=this.loadingContext,M={id:`pdfjs-font-loading-${x.nextRequestId++}`,done:!1,complete:g,callback:T};return x.requests.push(M),M}get _loadTestFont(){const T=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,n.shadow)(this,"_loadTestFont",T())}_prepareFontLoadEvent(T,g,x){function M(it,Y){return it.charCodeAt(Y)<<24|it.charCodeAt(Y+1)<<16|it.charCodeAt(Y+2)<<8|it.charCodeAt(Y+3)&255}function P(it,Y,ot,et){const G=it.substring(0,Y),nt=it.substring(Y+ot);return G+et+nt}let k,m;const r=this._document.createElement("canvas");r.width=1,r.height=1;const o=r.getContext("2d");let u=0;function w(it,Y){if(u++,u>30){(0,n.warn)("Load test font never loaded."),Y();return}if(o.font="30px "+it,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0){Y();return}setTimeout(w.bind(null,it,Y))}const A=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=P(f,976,A.length,A);const O=16,U=1482184792;let d=M(f,O);for(k=0,m=A.length-3;k<m;k+=4)d=d-U+M(A,k)|0;k<A.length&&(d=d-U+M(A+"XXX",k)|0),f=P(f,O,4,(0,n.string32)(d));const v=`url(data:font/opentype;base64,${btoa(f)});`,_=`@font-face {font-family:"${A}";src:${v}}`;this.insertRule(_);const I=[];for(const it of g)I.push(it.loadedName);I.push(A);const j=this._document.createElement("div");j.style.visibility="hidden",j.style.width=j.style.height="10px",j.style.position="absolute",j.style.top=j.style.left="0px";for(const it of I){const Y=this._document.createElement("span");Y.textContent="Hi",Y.style.fontFamily=it,j.append(Y)}this._document.body.append(j),w(A,()=>{j.remove(),x.complete()})}};class b{constructor(T,{isEvalSupported:g=!0,disableFontFace:x=!1,ignoreErrors:M=!1,onUnsupportedFeature:P,fontRegistry:k=null}){this.compiledGlyphs=Object.create(null);for(const m in T)this[m]=T[m];this.isEvalSupported=g!==!1,this.disableFontFace=x===!0,this.ignoreErrors=M===!0,this._onUnsupportedFeature=P,this.fontRegistry=k}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let T;if(!this.cssFontInfo)T=new FontFace(this.loadedName,this.data,{});else{const g={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(g.style=`oblique ${this.cssFontInfo.italicAngle}deg`),T=new FontFace(this.cssFontInfo.fontFamily,this.data,g)}return this.fontRegistry&&this.fontRegistry.registerFont(this),T}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const T=(0,n.bytesToString)(this.data),g=`url(data:${this.mimetype};base64,${btoa(T)});`;let x;if(!this.cssFontInfo)x=`@font-face {font-family:"${this.loadedName}";src:${g}}`;else{let M=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(M+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),x=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${M}src:${g}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,g),x}getPathGenerator(T,g){if(this.compiledGlyphs[g]!==void 0)return this.compiledGlyphs[g];let x;try{x=T.get(this.loadedName+"_path_"+g)}catch(M){if(!this.ignoreErrors)throw M;return this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,n.warn)(`getPathGenerator - ignoring character: "${M}".`),this.compiledGlyphs[g]=function(P,k){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const M=[];for(const P of x){const k=P.args!==void 0?P.args.join(","):"";M.push("c.",P.cmd,"(",k,`);
`)}return this.compiledGlyphs[g]=new Function("c","size",M.join(""))}return this.compiledGlyphs[g]=function(M,P){for(const k of x)k.cmd==="scale"&&(k.args=[P,-P]),M[k.cmd].apply(M,k.args)}}}e.FontFaceObject=b},(t,e,s)=>{var ct,ue;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=s(8),i=s(1),h=s(13),b=s(14),R=s(3);const T=16,g=100,x=4096,M=15,P=10,k=R.isNodeJS&&typeof Path2D>"u"?-1:1e3,m=16;function r(H,S){if(H._removeMirroring)throw new Error("Context is already forwarding operations.");H.__originalSave=H.save,H.__originalRestore=H.restore,H.__originalRotate=H.rotate,H.__originalScale=H.scale,H.__originalTranslate=H.translate,H.__originalTransform=H.transform,H.__originalSetTransform=H.setTransform,H.__originalResetTransform=H.resetTransform,H.__originalClip=H.clip,H.__originalMoveTo=H.moveTo,H.__originalLineTo=H.lineTo,H.__originalBezierCurveTo=H.bezierCurveTo,H.__originalRect=H.rect,H.__originalClosePath=H.closePath,H.__originalBeginPath=H.beginPath,H._removeMirroring=()=>{H.save=H.__originalSave,H.restore=H.__originalRestore,H.rotate=H.__originalRotate,H.scale=H.__originalScale,H.translate=H.__originalTranslate,H.transform=H.__originalTransform,H.setTransform=H.__originalSetTransform,H.resetTransform=H.__originalResetTransform,H.clip=H.__originalClip,H.moveTo=H.__originalMoveTo,H.lineTo=H.__originalLineTo,H.bezierCurveTo=H.__originalBezierCurveTo,H.rect=H.__originalRect,H.closePath=H.__originalClosePath,H.beginPath=H.__originalBeginPath,delete H._removeMirroring},H.save=function(){S.save(),this.__originalSave()},H.restore=function(){S.restore(),this.__originalRestore()},H.translate=function(N,q){S.translate(N,q),this.__originalTranslate(N,q)},H.scale=function(N,q){S.scale(N,q),this.__originalScale(N,q)},H.transform=function(N,q,W,z,st,tt){S.transform(N,q,W,z,st,tt),this.__originalTransform(N,q,W,z,st,tt)},H.setTransform=function(N,q,W,z,st,tt){S.setTransform(N,q,W,z,st,tt),this.__originalSetTransform(N,q,W,z,st,tt)},H.resetTransform=function(){S.resetTransform(),this.__originalResetTransform()},H.rotate=function(N){S.rotate(N),this.__originalRotate(N)},H.clip=function(N){S.clip(N),this.__originalClip(N)},H.moveTo=function(y,N){S.moveTo(y,N),this.__originalMoveTo(y,N)},H.lineTo=function(y,N){S.lineTo(y,N),this.__originalLineTo(y,N)},H.bezierCurveTo=function(y,N,q,W,z,st){S.bezierCurveTo(y,N,q,W,z,st),this.__originalBezierCurveTo(y,N,q,W,z,st)},H.rect=function(y,N,q,W){S.rect(y,N,q,W),this.__originalRect(y,N,q,W)},H.closePath=function(){S.closePath(),this.__originalClosePath()},H.beginPath=function(){S.beginPath(),this.__originalBeginPath()}}class o{constructor(S){this.canvasFactory=S,this.cache=Object.create(null)}getCanvas(S,y,N){let q;return this.cache[S]!==void 0?(q=this.cache[S],this.canvasFactory.reset(q,y,N)):(q=this.canvasFactory.create(y,N),this.cache[S]=q),q}delete(S){delete this.cache[S]}clear(){for(const S in this.cache){const y=this.cache[S];this.canvasFactory.destroy(y),delete this.cache[S]}}}function u(H,S,y,N,q,W,z,st,tt,l){const[C,a,c,E,F,V]=(0,n.getCurrentTransform)(H);if(a===0&&c===0){const Q=z*C+F,$=Math.round(Q),K=st*E+V,ht=Math.round(K),L=(z+tt)*C+F,lt=Math.abs(Math.round(L)-$)||1,gt=(st+l)*E+V,bt=Math.abs(Math.round(gt)-ht)||1;return H.setTransform(Math.sign(C),0,0,Math.sign(E),$,ht),H.drawImage(S,y,N,q,W,0,0,lt,bt),H.setTransform(C,a,c,E,F,V),[lt,bt]}if(C===0&&E===0){const Q=st*c+F,$=Math.round(Q),K=z*a+V,ht=Math.round(K),L=(st+l)*c+F,lt=Math.abs(Math.round(L)-$)||1,gt=(z+tt)*a+V,bt=Math.abs(Math.round(gt)-ht)||1;return H.setTransform(0,Math.sign(a),Math.sign(c),0,$,ht),H.drawImage(S,y,N,q,W,0,0,bt,lt),H.setTransform(C,a,c,E,F,V),[bt,lt]}H.drawImage(S,y,N,q,W,z,st,tt,l);const rt=Math.hypot(C,a),X=Math.hypot(c,E);return[rt*tt,X*l]}function w(H){const{width:S,height:y}=H;if(S>k||y>k)return null;const N=1e3,q=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),W=S+1;let z=new Uint8Array(W*(y+1)),st,tt,l;const C=S+7&-8;let a=new Uint8Array(C*y),c=0;for(const X of H.data){let Q=128;for(;Q>0;)a[c++]=X&Q?0:255,Q>>=1}let E=0;for(c=0,a[c]!==0&&(z[0]=1,++E),tt=1;tt<S;tt++)a[c]!==a[c+1]&&(z[tt]=a[c]?2:1,++E),c++;for(a[c]!==0&&(z[tt]=2,++E),st=1;st<y;st++){c=st*C,l=st*W,a[c-C]!==a[c]&&(z[l]=a[c]?1:8,++E);let X=(a[c]?4:0)+(a[c-C]?8:0);for(tt=1;tt<S;tt++)X=(X>>2)+(a[c+1]?4:0)+(a[c-C+1]?8:0),q[X]&&(z[l+tt]=q[X],++E),c++;if(a[c-C]!==a[c]&&(z[l+tt]=a[c]?2:4,++E),E>N)return null}for(c=C*(y-1),l=st*W,a[c]!==0&&(z[l]=8,++E),tt=1;tt<S;tt++)a[c]!==a[c+1]&&(z[l+tt]=a[c]?4:8,++E),c++;if(a[c]!==0&&(z[l+tt]=4,++E),E>N)return null;const F=new Int32Array([0,W,-1,0,-W,0,0,0,1]),V=new Path2D;for(st=0;E&&st<=y;st++){let X=st*W;const Q=X+S;for(;X<Q&&!z[X];)X++;if(X===Q)continue;V.moveTo(X%W,st);const $=X;let K=z[X];do{const ht=F[K];do X+=ht;while(!z[X]);const L=z[X];L!==5&&L!==10?(K=L,z[X]=0):(K=L&51*K>>4,z[X]&=K>>2|K<<2),V.lineTo(X%W,X/W|0),z[X]||--E}while($!==X);--st}return a=null,z=null,function(X){X.save(),X.scale(1/S,-1/y),X.translate(0,-y),X.fill(V),X.beginPath(),X.restore()}}class A{constructor(S,y){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,S,y])}clone(){const S=Object.create(this);return S.clipBox=this.clipBox.slice(),S}setCurrentPoint(S,y){this.x=S,this.y=y}updatePathMinMax(S,y,N){[y,N]=i.Util.applyTransform([y,N],S),this.minX=Math.min(this.minX,y),this.minY=Math.min(this.minY,N),this.maxX=Math.max(this.maxX,y),this.maxY=Math.max(this.maxY,N)}updateRectMinMax(S,y){const N=i.Util.applyTransform(y,S),q=i.Util.applyTransform(y.slice(2),S);this.minX=Math.min(this.minX,N[0],q[0]),this.minY=Math.min(this.minY,N[1],q[1]),this.maxX=Math.max(this.maxX,N[0],q[0]),this.maxY=Math.max(this.maxY,N[1],q[1])}updateScalingPathMinMax(S,y){i.Util.scaleMinMax(S,y),this.minX=Math.min(this.minX,y[0]),this.maxX=Math.max(this.maxX,y[1]),this.minY=Math.min(this.minY,y[2]),this.maxY=Math.max(this.maxY,y[3])}updateCurvePathMinMax(S,y,N,q,W,z,st,tt,l,C){const a=i.Util.bezierBoundingBox(y,N,q,W,z,st,tt,l);if(C){C[0]=Math.min(C[0],a[0],a[2]),C[1]=Math.max(C[1],a[0],a[2]),C[2]=Math.min(C[2],a[1],a[3]),C[3]=Math.max(C[3],a[1],a[3]);return}this.updateRectMinMax(S,a)}getPathBoundingBox(S=h.PathType.FILL,y=null){const N=[this.minX,this.minY,this.maxX,this.maxY];if(S===h.PathType.STROKE){y||(0,i.unreachable)("Stroke bounding box must include transform.");const q=i.Util.singularValueDecompose2dScale(y),W=q[0]*this.lineWidth/2,z=q[1]*this.lineWidth/2;N[0]-=W,N[1]-=z,N[2]+=W,N[3]+=z}return N}updateClipFromPath(){const S=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(S||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(S){this.clipBox=S,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(S=h.PathType.FILL,y=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(S,y))}}function f(H,S,y=null){if(typeof ImageData<"u"&&S instanceof ImageData){H.putImageData(S,0,0);return}const N=S.height,q=S.width,W=N%m,z=(N-W)/m,st=W===0?z:z+1,tt=H.createImageData(q,m);let l=0,C;const a=S.data,c=tt.data;let E,F,V,rt,X,Q,$,K;if(y)switch(y.length){case 1:X=y[0],Q=y[0],$=y[0],K=y[0];break;case 4:X=y[0],Q=y[1],$=y[2],K=y[3];break}if(S.kind===i.ImageKind.GRAYSCALE_1BPP){const ht=a.byteLength,L=new Uint32Array(c.buffer,0,c.byteLength>>2),lt=L.length,gt=q+7>>3;let bt=4294967295,St=i.FeatureTest.isLittleEndian?4278190080:255;for(K&&K[0]===255&&K[255]===0&&([bt,St]=[St,bt]),E=0;E<st;E++){for(V=E<z?m:W,C=0,F=0;F<V;F++){const Et=ht-l;let xt=0;const kt=Et>gt?q:Et*8-7,Ut=kt&-8;let wt=0,Ot=0;for(;xt<Ut;xt+=8)Ot=a[l++],L[C++]=Ot&128?bt:St,L[C++]=Ot&64?bt:St,L[C++]=Ot&32?bt:St,L[C++]=Ot&16?bt:St,L[C++]=Ot&8?bt:St,L[C++]=Ot&4?bt:St,L[C++]=Ot&2?bt:St,L[C++]=Ot&1?bt:St;for(;xt<kt;xt++)wt===0&&(Ot=a[l++],wt=128),L[C++]=Ot&wt?bt:St,wt>>=1}for(;C<lt;)L[C++]=0;H.putImageData(tt,0,E*m)}}else if(S.kind===i.ImageKind.RGBA_32BPP){const ht=!!(X||Q||$);for(F=0,rt=q*m*4,E=0;E<z;E++){if(c.set(a.subarray(l,l+rt)),l+=rt,ht)for(let L=0;L<rt;L+=4)X&&(c[L+0]=X[c[L+0]]),Q&&(c[L+1]=Q[c[L+1]]),$&&(c[L+2]=$[c[L+2]]);H.putImageData(tt,0,F),F+=m}if(E<st){if(rt=q*W*4,c.set(a.subarray(l,l+rt)),ht)for(let L=0;L<rt;L+=4)X&&(c[L+0]=X[c[L+0]]),Q&&(c[L+1]=Q[c[L+1]]),$&&(c[L+2]=$[c[L+2]]);H.putImageData(tt,0,F)}}else if(S.kind===i.ImageKind.RGB_24BPP){const ht=!!(X||Q||$);for(V=m,rt=q*V,E=0;E<st;E++){for(E>=z&&(V=W,rt=q*V),C=0,F=rt;F--;)c[C++]=a[l++],c[C++]=a[l++],c[C++]=a[l++],c[C++]=255;if(ht)for(let L=0;L<C;L+=4)X&&(c[L+0]=X[c[L+0]]),Q&&(c[L+1]=Q[c[L+1]]),$&&(c[L+2]=$[c[L+2]]);H.putImageData(tt,0,E*m)}}else throw new Error(`bad image kind: ${S.kind}`)}function D(H,S){if(S.bitmap){H.drawImage(S.bitmap,0,0);return}const y=S.height,N=S.width,q=y%m,W=(y-q)/m,z=q===0?W:W+1,st=H.createImageData(N,m);let tt=0;const l=S.data,C=st.data;for(let a=0;a<z;a++){const c=a<W?m:q;({srcPos:tt}=(0,b.applyMaskImageData)({src:l,srcPos:tt,dest:C,width:N,height:c})),H.putImageData(st,0,a*m)}}function O(H,S){const y=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let N=0,q=y.length;N<q;N++){const W=y[N];H[W]!==void 0&&(S[W]=H[W])}H.setLineDash!==void 0&&(S.setLineDash(H.getLineDash()),S.lineDashOffset=H.lineDashOffset)}function U(H,S){H.strokeStyle=H.fillStyle=S||"#000000",H.fillRule="nonzero",H.globalAlpha=1,H.lineWidth=1,H.lineCap="butt",H.lineJoin="miter",H.miterLimit=10,H.globalCompositeOperation="source-over",H.font="10px sans-serif",H.setLineDash!==void 0&&(H.setLineDash([]),H.lineDashOffset=0)}function d(H,S,y,N){const q=H.length;for(let W=3;W<q;W+=4){const z=H[W];if(z===0)H[W-3]=S,H[W-2]=y,H[W-1]=N;else if(z<255){const st=255-z;H[W-3]=H[W-3]*z+S*st>>8,H[W-2]=H[W-2]*z+y*st>>8,H[W-1]=H[W-1]*z+N*st>>8}}}function v(H,S,y){const N=H.length,q=1/255;for(let W=3;W<N;W+=4){const z=y?y[H[W]]:H[W];S[W]=S[W]*z*q|0}}function _(H,S,y){const N=H.length;for(let q=3;q<N;q+=4){const W=H[q-3]*77+H[q-2]*152+H[q-1]*28;S[q]=y?S[q]*y[W>>8]>>8:S[q]*W>>16}}function I(H,S,y,N,q,W,z,st,tt,l,C){const a=!!W,c=a?W[0]:0,E=a?W[1]:0,F=a?W[2]:0;let V;q==="Luminosity"?V=_:V=v;const X=Math.min(N,Math.ceil(1048576/y));for(let Q=0;Q<N;Q+=X){const $=Math.min(X,N-Q),K=H.getImageData(st-l,Q+(tt-C),y,$),ht=S.getImageData(st,Q+tt,y,$);a&&d(K.data,c,E,F),V(K.data,ht.data,z),S.putImageData(ht,st,Q+tt)}}function j(H,S,y,N){const q=N[0],W=N[1],z=N[2]-q,st=N[3]-W;z===0||st===0||(I(S.context,y,z,st,S.subtype,S.backdrop,S.transferMap,q,W,S.offsetX,S.offsetY),H.save(),H.globalAlpha=1,H.globalCompositeOperation="source-over",H.setTransform(1,0,0,1,0,0),H.drawImage(y.canvas,0,0),H.restore())}function it(H,S){const y=i.Util.singularValueDecompose2dScale(H);y[0]=Math.fround(y[0]),y[1]=Math.fround(y[1]);const N=Math.fround((globalThis.devicePixelRatio||1)*n.PixelsPerInch.PDF_TO_CSS_UNITS);return S!==void 0?S:y[0]<=N||y[1]<=N}const Y=["butt","round","square"],ot=["miter","round","bevel"],et={},G={},ft=class{constructor(S,y,N,q,W,z,st,tt){pt(this,ct);this.ctx=S,this.current=new A(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=y,this.objs=N,this.canvasFactory=q,this.imageLayer=W,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=z,this.cachedCanvases=new o(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=st,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(tt==null?void 0:tt.background)||null,this.foregroundColor=(tt==null?void 0:tt.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(S,y=null){return typeof S=="string"?S.startsWith("g_")?this.commonObjs.get(S):this.objs.get(S):y}beginDrawing({transform:S,viewport:y,transparency:N=!1,background:q=null}){const W=this.ctx.canvas.width,z=this.ctx.canvas.height,st=q||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const tt=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const l=this.backgroundColor=this.ctx.fillStyle;let C=!0,a=st;if(this.ctx.fillStyle=st,a=this.ctx.fillStyle,C=typeof a=="string"&&/^#[0-9A-Fa-f]{6}$/.test(a),tt==="#000000"&&l==="#ffffff"||tt===l||!C)this.foregroundColor=this.backgroundColor=null;else{const[c,E,F]=(0,n.getRGB)(a),V=X=>(X/=255,X<=.03928?X/12.92:((X+.055)/1.055)**2.4),rt=Math.round(.2126*V(c)+.7152*V(E)+.0722*V(F));this.selectColor=(X,Q,$)=>{const K=.2126*V(X)+.7152*V(Q)+.0722*V($);return Math.round(K)===rt?l:tt}}}if(this.ctx.fillStyle=this.backgroundColor||st,this.ctx.fillRect(0,0,W,z),this.ctx.restore(),N){const tt=this.cachedCanvases.getCanvas("transparent",W,z);this.compositeCtx=this.ctx,this.transparentCanvas=tt.canvas,this.ctx=tt.context,this.ctx.save(),this.ctx.transform(...(0,n.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),U(this.ctx,this.foregroundColor),S&&(this.ctx.transform(...S),this.outputScaleX=S[0],this.outputScaleY=S[0]),this.ctx.transform(...y.transform),this.viewportScale=y.scale,this.baseTransform=(0,n.getCurrentTransform)(this.ctx),this.imageLayer&&((0,n.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(S,y,N,q){const W=S.argsArray,z=S.fnArray;let st=y||0;const tt=W.length;if(tt===st)return st;const l=tt-st>P&&typeof N=="function",C=l?Date.now()+M:0;let a=0;const c=this.commonObjs,E=this.objs;let F;for(;;){if(q!==void 0&&st===q.nextBreakPoint)return q.breakIt(st,N),st;if(F=z[st],F!==i.OPS.dependency)this[F].apply(this,W[st]);else for(const V of W[st]){const rt=V.startsWith("g_")?c:E;if(!rt.has(V))return rt.get(V,N),st}if(st++,st===tt)return st;if(l&&++a>P){if(Date.now()>C)return N(),st;a=0}}}endDrawing(){mt(this,ct,ue).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const S of this._cachedBitmapsMap.values()){for(const y of S.values())typeof HTMLCanvasElement<"u"&&y instanceof HTMLCanvasElement&&(y.width=y.height=0);S.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(S,y){const N=S.width,q=S.height;let W=Math.max(Math.hypot(y[0],y[1]),1),z=Math.max(Math.hypot(y[2],y[3]),1),st=N,tt=q,l="prescale1",C,a;for(;W>2&&st>1||z>2&&tt>1;){let c=st,E=tt;W>2&&st>1&&(c=Math.ceil(st/2),W/=st/c),z>2&&tt>1&&(E=Math.ceil(tt/2),z/=tt/E),C=this.cachedCanvases.getCanvas(l,c,E),a=C.context,a.clearRect(0,0,c,E),a.drawImage(S,0,0,st,tt,0,0,c,E),S=C.canvas,st=c,tt=E,l=l==="prescale1"?"prescale2":"prescale1"}return{img:S,paintWidth:st,paintHeight:tt}}_createMaskCanvas(S){const y=this.ctx,{width:N,height:q}=S,W=this.current.fillColor,z=this.current.patternFill,st=(0,n.getCurrentTransform)(y);let tt,l,C,a;if((S.bitmap||S.data)&&S.count>1){const lt=S.bitmap||S.data.buffer,gt=st.slice(0,4);l=JSON.stringify(z?gt:[gt,W]),tt=this._cachedBitmapsMap.get(lt),tt||(tt=new Map,this._cachedBitmapsMap.set(lt,tt));const bt=tt.get(l);if(bt&&!z){const St=Math.round(Math.min(st[0],st[2])+st[4]),Et=Math.round(Math.min(st[1],st[3])+st[5]);return{canvas:bt,offsetX:St,offsetY:Et}}C=bt}C||(a=this.cachedCanvases.getCanvas("maskCanvas",N,q),D(a.context,S));let c=i.Util.transform(st,[1/N,0,0,-1/q,0,0]);c=i.Util.transform(c,[1,0,0,1,0,-q]);const E=i.Util.applyTransform([0,0],c),F=i.Util.applyTransform([N,q],c),V=i.Util.normalizeRect([E[0],E[1],F[0],F[1]]),rt=Math.round(V[2]-V[0])||1,X=Math.round(V[3]-V[1])||1,Q=this.cachedCanvases.getCanvas("fillCanvas",rt,X),$=Q.context,K=Math.min(E[0],F[0]),ht=Math.min(E[1],F[1]);$.translate(-K,-ht),$.transform(...c),C||(C=this._scaleImage(a.canvas,(0,n.getCurrentTransformInverse)($)),C=C.img,tt&&z&&tt.set(l,C)),$.imageSmoothingEnabled=it((0,n.getCurrentTransform)($),S.interpolate),u($,C,0,0,C.width,C.height,0,0,N,q),$.globalCompositeOperation="source-in";const L=i.Util.transform((0,n.getCurrentTransformInverse)($),[1,0,0,1,-K,-ht]);return $.fillStyle=z?W.getPattern(y,this,L,h.PathType.FILL):W,$.fillRect(0,0,N,q),tt&&!z&&(this.cachedCanvases.delete("fillCanvas"),tt.set(l,Q.canvas)),{canvas:Q.canvas,offsetX:Math.round(K),offsetY:Math.round(ht)}}setLineWidth(S){S!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=S,this.ctx.lineWidth=S}setLineCap(S){this.ctx.lineCap=Y[S]}setLineJoin(S){this.ctx.lineJoin=ot[S]}setMiterLimit(S){this.ctx.miterLimit=S}setDash(S,y){const N=this.ctx;N.setLineDash!==void 0&&(N.setLineDash(S),N.lineDashOffset=y)}setRenderingIntent(S){}setFlatness(S){}setGState(S){for(let y=0,N=S.length;y<N;y++){const q=S[y],W=q[0],z=q[1];switch(W){case"LW":this.setLineWidth(z);break;case"LC":this.setLineCap(z);break;case"LJ":this.setLineJoin(z);break;case"ML":this.setMiterLimit(z);break;case"D":this.setDash(z[0],z[1]);break;case"RI":this.setRenderingIntent(z);break;case"FL":this.setFlatness(z);break;case"Font":this.setFont(z[0],z[1]);break;case"CA":this.current.strokeAlpha=q[1];break;case"ca":this.current.fillAlpha=q[1],this.ctx.globalAlpha=q[1];break;case"BM":this.ctx.globalCompositeOperation=z;break;case"SMask":this.current.activeSMask=z?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=z}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const S=this.inSMaskMode;this.current.activeSMask&&!S?this.beginSMaskMode():!this.current.activeSMask&&S&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const S=this.ctx.canvas.width,y=this.ctx.canvas.height,N="smaskGroupAt"+this.groupLevel,q=this.cachedCanvases.getCanvas(N,S,y);this.suspendedCtx=this.ctx,this.ctx=q.context;const W=this.ctx;W.setTransform(...(0,n.getCurrentTransform)(this.suspendedCtx)),O(this.suspendedCtx,W),r(W,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),O(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(S){if(!this.current.activeSMask)return;S?(S[0]=Math.floor(S[0]),S[1]=Math.floor(S[1]),S[2]=Math.ceil(S[2]),S[3]=Math.ceil(S[3])):S=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const y=this.current.activeSMask,N=this.suspendedCtx;j(N,y,this.ctx,S),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(O(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const S=this.current;this.stateStack.push(S),this.current=S.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),O(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(S,y,N,q,W,z){this.ctx.transform(S,y,N,q,W,z),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(S,y,N){const q=this.ctx,W=this.current;let z=W.x,st=W.y,tt,l;const C=(0,n.getCurrentTransform)(q),a=C[0]===0&&C[3]===0||C[1]===0&&C[2]===0,c=a?N.slice(0):null;for(let E=0,F=0,V=S.length;E<V;E++)switch(S[E]|0){case i.OPS.rectangle:z=y[F++],st=y[F++];const rt=y[F++],X=y[F++],Q=z+rt,$=st+X;q.moveTo(z,st),rt===0||X===0?q.lineTo(Q,$):(q.lineTo(Q,st),q.lineTo(Q,$),q.lineTo(z,$)),a||W.updateRectMinMax(C,[z,st,Q,$]),q.closePath();break;case i.OPS.moveTo:z=y[F++],st=y[F++],q.moveTo(z,st),a||W.updatePathMinMax(C,z,st);break;case i.OPS.lineTo:z=y[F++],st=y[F++],q.lineTo(z,st),a||W.updatePathMinMax(C,z,st);break;case i.OPS.curveTo:tt=z,l=st,z=y[F+4],st=y[F+5],q.bezierCurveTo(y[F],y[F+1],y[F+2],y[F+3],z,st),W.updateCurvePathMinMax(C,tt,l,y[F],y[F+1],y[F+2],y[F+3],z,st,c),F+=6;break;case i.OPS.curveTo2:tt=z,l=st,q.bezierCurveTo(z,st,y[F],y[F+1],y[F+2],y[F+3]),W.updateCurvePathMinMax(C,tt,l,z,st,y[F],y[F+1],y[F+2],y[F+3],c),z=y[F+2],st=y[F+3],F+=4;break;case i.OPS.curveTo3:tt=z,l=st,z=y[F+2],st=y[F+3],q.bezierCurveTo(y[F],y[F+1],z,st,z,st),W.updateCurvePathMinMax(C,tt,l,y[F],y[F+1],z,st,z,st,c),F+=4;break;case i.OPS.closePath:q.closePath();break}a&&W.updateScalingPathMinMax(C,c),W.setCurrentPoint(z,st)}closePath(){this.ctx.closePath()}stroke(S){S=typeof S<"u"?S:!0;const y=this.ctx,N=this.current.strokeColor;y.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof N=="object"&&(N==null?void 0:N.getPattern)?(y.save(),y.strokeStyle=N.getPattern(y,this,(0,n.getCurrentTransformInverse)(y),h.PathType.STROKE),this.rescaleAndStroke(!1),y.restore()):this.rescaleAndStroke(!0)),S&&this.consumePath(this.current.getClippedPathBoundingBox()),y.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(S){S=typeof S<"u"?S:!0;const y=this.ctx,N=this.current.fillColor,q=this.current.patternFill;let W=!1;q&&(y.save(),y.fillStyle=N.getPattern(y,this,(0,n.getCurrentTransformInverse)(y),h.PathType.FILL),W=!0);const z=this.current.getClippedPathBoundingBox();this.contentVisible&&z!==null&&(this.pendingEOFill?(y.fill("evenodd"),this.pendingEOFill=!1):y.fill()),W&&y.restore(),S&&this.consumePath(z)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=et}eoClip(){this.pendingClip=G}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const S=this.pendingTextPaths,y=this.ctx;if(S===void 0){y.beginPath();return}y.save(),y.beginPath();for(const N of S)y.setTransform(...N.transform),y.translate(N.x,N.y),N.addToPath(y,N.fontSize);y.restore(),y.clip(),y.beginPath(),delete this.pendingTextPaths}setCharSpacing(S){this.current.charSpacing=S}setWordSpacing(S){this.current.wordSpacing=S}setHScale(S){this.current.textHScale=S/100}setLeading(S){this.current.leading=-S}setFont(S,y){const N=this.commonObjs.get(S),q=this.current;if(!N)throw new Error(`Can't find font for ${S}`);if(q.fontMatrix=N.fontMatrix||i.FONT_IDENTITY_MATRIX,(q.fontMatrix[0]===0||q.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+S),y<0?(y=-y,q.fontDirection=-1):q.fontDirection=1,this.current.font=N,this.current.fontSize=y,N.isType3Font)return;const W=N.loadedName||"sans-serif";let z="normal";N.black?z="900":N.bold&&(z="bold");const st=N.italic?"italic":"normal",tt=`"${W}", ${N.fallbackName}`;let l=y;y<T?l=T:y>g&&(l=g),this.current.fontSizeScale=y/l,this.ctx.font=`${st} ${z} ${l}px ${tt}`}setTextRenderingMode(S){this.current.textRenderingMode=S}setTextRise(S){this.current.textRise=S}moveText(S,y){this.current.x=this.current.lineX+=S,this.current.y=this.current.lineY+=y}setLeadingMoveText(S,y){this.setLeading(-y),this.moveText(S,y)}setTextMatrix(S,y,N,q,W,z){this.current.textMatrix=[S,y,N,q,W,z],this.current.textMatrixScale=Math.hypot(S,y),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(S,y,N,q){const W=this.ctx,z=this.current,st=z.font,tt=z.textRenderingMode,l=z.fontSize/z.fontSizeScale,C=tt&i.TextRenderingMode.FILL_STROKE_MASK,a=!!(tt&i.TextRenderingMode.ADD_TO_PATH_FLAG),c=z.patternFill&&!st.missingFile;let E;(st.disableFontFace||a||c)&&(E=st.getPathGenerator(this.commonObjs,S)),st.disableFontFace||c?(W.save(),W.translate(y,N),W.beginPath(),E(W,l),q&&W.setTransform(...q),(C===i.TextRenderingMode.FILL||C===i.TextRenderingMode.FILL_STROKE)&&W.fill(),(C===i.TextRenderingMode.STROKE||C===i.TextRenderingMode.FILL_STROKE)&&W.stroke(),W.restore()):((C===i.TextRenderingMode.FILL||C===i.TextRenderingMode.FILL_STROKE)&&W.fillText(S,y,N),(C===i.TextRenderingMode.STROKE||C===i.TextRenderingMode.FILL_STROKE)&&W.strokeText(S,y,N)),a&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,n.getCurrentTransform)(W),x:y,y:N,fontSize:l,addToPath:E})}get isFontSubpixelAAEnabled(){const{context:S}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);S.scale(1.5,1),S.fillText("I",0,10);const y=S.getImageData(0,0,10,10).data;let N=!1;for(let q=3;q<y.length;q+=4)if(y[q]>0&&y[q]<255){N=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",N)}showText(S){const y=this.current,N=y.font;if(N.isType3Font)return this.showType3Text(S);const q=y.fontSize;if(q===0)return;const W=this.ctx,z=y.fontSizeScale,st=y.charSpacing,tt=y.wordSpacing,l=y.fontDirection,C=y.textHScale*l,a=S.length,c=N.vertical,E=c?1:-1,F=N.defaultVMetrics,V=q*y.fontMatrix[0],rt=y.textRenderingMode===i.TextRenderingMode.FILL&&!N.disableFontFace&&!y.patternFill;W.save(),W.transform(...y.textMatrix),W.translate(y.x,y.y+y.textRise),l>0?W.scale(C,-1):W.scale(C,1);let X;if(y.patternFill){W.save();const L=y.fillColor.getPattern(W,this,(0,n.getCurrentTransformInverse)(W),h.PathType.FILL);X=(0,n.getCurrentTransform)(W),W.restore(),W.fillStyle=L}let Q=y.lineWidth;const $=y.textMatrixScale;if($===0||Q===0){const L=y.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(L===i.TextRenderingMode.STROKE||L===i.TextRenderingMode.FILL_STROKE)&&(Q=this.getSinglePixelWidth())}else Q/=$;z!==1&&(W.scale(z,z),Q/=z),W.lineWidth=Q;let K=0,ht;for(ht=0;ht<a;++ht){const L=S[ht];if(typeof L=="number"){K+=E*L*q/1e3;continue}let lt=!1;const gt=(L.isSpace?tt:0)+st,bt=L.fontChar,St=L.accent;let Et,xt,kt=L.width;if(c){const wt=L.vmetric||F,Ot=-(L.vmetric?wt[1]:kt*.5)*V,Yt=wt[2]*V;kt=wt?-wt[0]:kt,Et=Ot/z,xt=(K+Yt)/z}else Et=K/z,xt=0;if(N.remeasure&&kt>0){const wt=W.measureText(bt).width*1e3/q*z;if(kt<wt&&this.isFontSubpixelAAEnabled){const Ot=kt/wt;lt=!0,W.save(),W.scale(Ot,1),Et/=Ot}else kt!==wt&&(Et+=(kt-wt)/2e3*q/z)}if(this.contentVisible&&(L.isInFont||N.missingFile)){if(rt&&!St)W.fillText(bt,Et,xt);else if(this.paintChar(bt,Et,xt,X),St){const wt=Et+q*St.offset.x/z,Ot=xt-q*St.offset.y/z;this.paintChar(St.fontChar,wt,Ot,X)}}let Ut;c?Ut=kt*V-gt*l:Ut=kt*V+gt*l,K+=Ut,lt&&W.restore()}c?y.y-=K:y.x+=K*C,W.restore(),this.compose()}showType3Text(S){const y=this.ctx,N=this.current,q=N.font,W=N.fontSize,z=N.fontDirection,st=q.vertical?1:-1,tt=N.charSpacing,l=N.wordSpacing,C=N.textHScale*z,a=N.fontMatrix||i.FONT_IDENTITY_MATRIX,c=S.length,E=N.textRenderingMode===i.TextRenderingMode.INVISIBLE;let F,V,rt,X;if(!(E||W===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,y.save(),y.transform(...N.textMatrix),y.translate(N.x,N.y),y.scale(C,z),F=0;F<c;++F){if(V=S[F],typeof V=="number"){X=st*V*W/1e3,this.ctx.translate(X,0),N.x+=X*C;continue}const Q=(V.isSpace?l:0)+tt,$=q.charProcOperatorList[V.operatorListId];if(!$){(0,i.warn)(`Type3 character "${V.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=V,this.save(),y.scale(W,W),y.transform(...a),this.executeOperatorList($),this.restore()),rt=i.Util.applyTransform([V.width,0],a)[0]*W+Q,y.translate(rt,0),N.x+=rt*C}y.restore(),this.processingType3=null}}setCharWidth(S,y){}setCharWidthAndBounds(S,y,N,q,W,z){this.ctx.rect(N,q,W-N,z-q),this.ctx.clip(),this.endPath()}getColorN_Pattern(S){let y;if(S[0]==="TilingPattern"){const N=S[1],q=this.baseTransform||(0,n.getCurrentTransform)(this.ctx),W={createCanvasGraphics:z=>new ft(z,this.commonObjs,this.objs,this.canvasFactory)};y=new h.TilingPattern(S,N,this.ctx,W,q)}else y=this._getPattern(S[1],S[2]);return y}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(S,y,N){var W;const q=((W=this.selectColor)==null?void 0:W.call(this,S,y,N))||i.Util.makeHexColor(S,y,N);this.ctx.strokeStyle=q,this.current.strokeColor=q}setFillRGBColor(S,y,N){var W;const q=((W=this.selectColor)==null?void 0:W.call(this,S,y,N))||i.Util.makeHexColor(S,y,N);this.ctx.fillStyle=q,this.current.fillColor=q,this.current.patternFill=!1}_getPattern(S,y=null){let N;return this.cachedPatterns.has(S)?N=this.cachedPatterns.get(S):(N=(0,h.getShadingPattern)(this.objs.get(S)),this.cachedPatterns.set(S,N)),y&&(N.matrix=y),N}shadingFill(S){if(!this.contentVisible)return;const y=this.ctx;this.save();const N=this._getPattern(S);y.fillStyle=N.getPattern(y,this,(0,n.getCurrentTransformInverse)(y),h.PathType.SHADING);const q=(0,n.getCurrentTransformInverse)(y);if(q){const W=y.canvas,z=W.width,st=W.height,tt=i.Util.applyTransform([0,0],q),l=i.Util.applyTransform([0,st],q),C=i.Util.applyTransform([z,0],q),a=i.Util.applyTransform([z,st],q),c=Math.min(tt[0],l[0],C[0],a[0]),E=Math.min(tt[1],l[1],C[1],a[1]),F=Math.max(tt[0],l[0],C[0],a[0]),V=Math.max(tt[1],l[1],C[1],a[1]);this.ctx.fillRect(c,E,F-c,V-E)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(S,y){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(S)&&S.length===6&&this.transform(...S),this.baseTransform=(0,n.getCurrentTransform)(this.ctx),y)){const N=y[2]-y[0],q=y[3]-y[1];this.ctx.rect(y[0],y[1],N,q),this.current.updateRectMinMax((0,n.getCurrentTransform)(this.ctx),y),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(S){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const y=this.ctx;S.isolated||(0,i.info)("TODO: Support non-isolated groups."),S.knockout&&(0,i.warn)("Knockout groups not supported.");const N=(0,n.getCurrentTransform)(y);if(S.matrix&&y.transform(...S.matrix),!S.bbox)throw new Error("Bounding box is required.");let q=i.Util.getAxialAlignedBoundingBox(S.bbox,(0,n.getCurrentTransform)(y));const W=[0,0,y.canvas.width,y.canvas.height];q=i.Util.intersect(q,W)||[0,0,0,0];const z=Math.floor(q[0]),st=Math.floor(q[1]);let tt=Math.max(Math.ceil(q[2])-z,1),l=Math.max(Math.ceil(q[3])-st,1),C=1,a=1;tt>x&&(C=tt/x,tt=x),l>x&&(a=l/x,l=x),this.current.startNewPathAndClipBox([0,0,tt,l]);let c="groupAt"+this.groupLevel;S.smask&&(c+="_smask_"+this.smaskCounter++%2);const E=this.cachedCanvases.getCanvas(c,tt,l),F=E.context;F.scale(1/C,1/a),F.translate(-z,-st),F.transform(...N),S.smask?this.smaskStack.push({canvas:E.canvas,context:F,offsetX:z,offsetY:st,scaleX:C,scaleY:a,subtype:S.smask.subtype,backdrop:S.smask.backdrop,transferMap:S.smask.transferMap||null,startTransformInverse:null}):(y.setTransform(1,0,0,1,0,0),y.translate(z,st),y.scale(C,a),y.save()),O(y,F),this.ctx=F,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(y),this.groupLevel++}endGroup(S){if(!this.contentVisible)return;this.groupLevel--;const y=this.ctx,N=this.groupStack.pop();if(this.ctx=N,this.ctx.imageSmoothingEnabled=!1,S.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const q=(0,n.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...q);const W=i.Util.getAxialAlignedBoundingBox([0,0,y.canvas.width,y.canvas.height],q);this.ctx.drawImage(y.canvas,0,0),this.ctx.restore(),this.compose(W)}}beginAnnotation(S,y,N,q,W){if(mt(this,ct,ue).call(this),U(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(y)&&y.length===4){const z=y[2]-y[0],st=y[3]-y[1];if(W&&this.annotationCanvasMap){N=N.slice(),N[4]-=y[0],N[5]-=y[1],y=y.slice(),y[0]=y[1]=0,y[2]=z,y[3]=st;const[tt,l]=i.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(this.ctx)),{viewportScale:C}=this,a=Math.ceil(z*this.outputScaleX*C),c=Math.ceil(st*this.outputScaleY*C);this.annotationCanvas=this.canvasFactory.create(a,c);const{canvas:E,context:F}=this.annotationCanvas;this.annotationCanvasMap.set(S,E),this.annotationCanvas.savedCtx=this.ctx,this.ctx=F,this.ctx.setTransform(tt,0,0,-l,0,st*l),U(this.ctx,this.foregroundColor)}else U(this.ctx,this.foregroundColor),this.ctx.rect(y[0],y[1],z,st),this.ctx.clip(),this.endPath()}this.current=new A(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...N),this.transform(...q)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(S){if(!this.contentVisible)return;const y=S.count;S=this.getObject(S.data,S),S.count=y;const N=this.ctx,q=this.processingType3;if(q&&(q.compiled===void 0&&(q.compiled=w(S)),q.compiled)){q.compiled(N);return}const W=this._createMaskCanvas(S),z=W.canvas;N.save(),N.setTransform(1,0,0,1,0,0),N.drawImage(z,W.offsetX,W.offsetY),N.restore(),this.compose()}paintImageMaskXObjectRepeat(S,y,N=0,q=0,W,z){if(!this.contentVisible)return;S=this.getObject(S.data,S);const st=this.ctx;st.save();const tt=(0,n.getCurrentTransform)(st);st.transform(y,N,q,W,0,0);const l=this._createMaskCanvas(S);st.setTransform(1,0,0,1,0,0);for(let C=0,a=z.length;C<a;C+=2){const c=i.Util.transform(tt,[y,N,q,W,z[C],z[C+1]]),[E,F]=i.Util.applyTransform([0,0],c);st.drawImage(l.canvas,E,F)}st.restore(),this.compose()}paintImageMaskXObjectGroup(S){if(!this.contentVisible)return;const y=this.ctx,N=this.current.fillColor,q=this.current.patternFill;for(const W of S){const{data:z,width:st,height:tt,transform:l}=W,C=this.cachedCanvases.getCanvas("maskCanvas",st,tt),a=C.context;a.save();const c=this.getObject(z,W);D(a,c),a.globalCompositeOperation="source-in",a.fillStyle=q?N.getPattern(a,this,(0,n.getCurrentTransformInverse)(y),h.PathType.FILL):N,a.fillRect(0,0,st,tt),a.restore(),y.save(),y.transform(...l),y.scale(1,-1),u(y,C.canvas,0,0,st,tt,0,-1,1,1),y.restore()}this.compose()}paintImageXObject(S){if(!this.contentVisible)return;const y=this.getObject(S);if(!y){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(y)}paintImageXObjectRepeat(S,y,N,q){if(!this.contentVisible)return;const W=this.getObject(S);if(!W){(0,i.warn)("Dependent image isn't ready yet");return}const z=W.width,st=W.height,tt=[];for(let l=0,C=q.length;l<C;l+=2)tt.push({transform:[y,0,0,N,q[l],q[l+1]],x:0,y:0,w:z,h:st});this.paintInlineImageXObjectGroup(W,tt)}paintInlineImageXObject(S){if(!this.contentVisible)return;const y=S.width,N=S.height,q=this.ctx;this.save(),q.scale(1/y,-1/N);let W;if(typeof HTMLElement=="function"&&S instanceof HTMLElement||!S.data)W=S;else{const l=this.cachedCanvases.getCanvas("inlineImage",y,N),C=l.context;f(C,S,this.current.transferMaps),W=l.canvas}const z=this._scaleImage(W,(0,n.getCurrentTransformInverse)(q));q.imageSmoothingEnabled=it((0,n.getCurrentTransform)(q),S.interpolate);const[st,tt]=u(q,z.img,0,0,z.paintWidth,z.paintHeight,0,-N,y,N);if(this.imageLayer){const[l,C]=i.Util.applyTransform([0,-N],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:S,left:l,top:C,width:st,height:tt})}this.compose(),this.restore()}paintInlineImageXObjectGroup(S,y){if(!this.contentVisible)return;const N=this.ctx,q=S.width,W=S.height,z=this.cachedCanvases.getCanvas("inlineImage",q,W),st=z.context;f(st,S,this.current.transferMaps);for(const tt of y){if(N.save(),N.transform(...tt.transform),N.scale(1,-1),u(N,z.canvas,tt.x,tt.y,tt.w,tt.h,0,-1,1,1),this.imageLayer){const[l,C]=i.Util.applyTransform([tt.x,tt.y],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:S,left:l,top:C,width:q,height:W})}N.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(S){}markPointProps(S,y){}beginMarkedContent(S){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(S,y){S==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(y)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(S){const y=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(S);const N=this.ctx;this.pendingClip&&(y||(this.pendingClip===G?N.clip("evenodd"):N.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),N.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const S=(0,n.getCurrentTransform)(this.ctx);if(S[1]===0&&S[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(S[0]),Math.abs(S[3]));else{const y=Math.abs(S[0]*S[3]-S[2]*S[1]),N=Math.hypot(S[0],S[2]),q=Math.hypot(S[1],S[3]);this._cachedGetSinglePixelWidth=Math.max(N,q)/y}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:S}=this.current,y=(0,n.getCurrentTransform)(this.ctx);let N,q;if(y[1]===0&&y[2]===0){const W=Math.abs(y[0]),z=Math.abs(y[3]);if(S===0)N=1/W,q=1/z;else{const st=W*S,tt=z*S;N=st<1?1/st:1,q=tt<1?1/tt:1}}else{const W=Math.abs(y[0]*y[3]-y[2]*y[1]),z=Math.hypot(y[0],y[1]),st=Math.hypot(y[2],y[3]);if(S===0)N=st/W,q=z/W;else{const tt=S*W;N=st>tt?st/tt:1,q=z>tt?z/tt:1}}this._cachedScaleForStroking=[N,q]}return this._cachedScaleForStroking}rescaleAndStroke(S){const{ctx:y}=this,{lineWidth:N}=this.current,[q,W]=this.getScaleForStroking();if(y.lineWidth=N||1,q===1&&W===1){y.stroke();return}let z,st,tt;S&&(z=(0,n.getCurrentTransform)(y),st=y.getLineDash().slice(),tt=y.lineDashOffset),y.scale(q,W);const l=Math.max(q,W);y.setLineDash(y.getLineDash().map(C=>C/l)),y.lineDashOffset/=l,y.stroke(),S&&(y.setTransform(...z),y.setLineDash(st),y.lineDashOffset=tt)}isContentVisible(){for(let S=this.markedContentStack.length-1;S>=0;S--)if(!this.markedContentStack[S].visible)return!1;return!0}};let nt=ft;ct=new WeakSet,ue=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},e.CanvasGraphics=nt;for(const H in i.OPS)nt.prototype[H]!==void 0&&(nt.prototype[i.OPS[H]]=nt.prototype[H])},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=m;var n=s(1),i=s(8),h=s(3);const b={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=b;function R(u,w){if(!w||h.isNodeJS)return;const A=w[2]-w[0],f=w[3]-w[1],D=new Path2D;D.rect(w[0],w[1],A,f),u.clip(D)}class T{constructor(){this.constructor===T&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class g extends T{constructor(w){super(),this._type=w[1],this._bbox=w[2],this._colorStops=w[3],this._p0=w[4],this._p1=w[5],this._r0=w[6],this._r1=w[7],this.matrix=null}_createGradient(w){let A;this._type==="axial"?A=w.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(A=w.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const f of this._colorStops)A.addColorStop(f[0],f[1]);return A}getPattern(w,A,f,D){let O;if(D===b.STROKE||D===b.FILL){const U=A.current.getClippedPathBoundingBox(D,(0,i.getCurrentTransform)(w))||[0,0,0,0],d=Math.ceil(U[2]-U[0])||1,v=Math.ceil(U[3]-U[1])||1,_=A.cachedCanvases.getCanvas("pattern",d,v,!0),I=_.context;I.clearRect(0,0,I.canvas.width,I.canvas.height),I.beginPath(),I.rect(0,0,I.canvas.width,I.canvas.height),I.translate(-U[0],-U[1]),f=n.Util.transform(f,[1,0,0,1,U[0],U[1]]),I.transform(...A.baseTransform),this.matrix&&I.transform(...this.matrix),R(I,this._bbox),I.fillStyle=this._createGradient(I),I.fill(),O=w.createPattern(_.canvas,"no-repeat");const j=new DOMMatrix(f);try{O.setTransform(j)}catch(it){(0,n.warn)(`RadialAxialShadingPattern.getPattern: "${it==null?void 0:it.message}".`)}}else R(w,this._bbox),O=this._createGradient(w);return O}}function x(u,w,A,f,D,O,U,d){const v=w.coords,_=w.colors,I=u.data,j=u.width*4;let it;v[A+1]>v[f+1]&&(it=A,A=f,f=it,it=O,O=U,U=it),v[f+1]>v[D+1]&&(it=f,f=D,D=it,it=U,U=d,d=it),v[A+1]>v[f+1]&&(it=A,A=f,f=it,it=O,O=U,U=it);const Y=(v[A]+w.offsetX)*w.scaleX,ot=(v[A+1]+w.offsetY)*w.scaleY,et=(v[f]+w.offsetX)*w.scaleX,G=(v[f+1]+w.offsetY)*w.scaleY,nt=(v[D]+w.offsetX)*w.scaleX,ct=(v[D+1]+w.offsetY)*w.scaleY;if(ot>=ct)return;const dt=_[O],ft=_[O+1],H=_[O+2],S=_[U],y=_[U+1],N=_[U+2],q=_[d],W=_[d+1],z=_[d+2],st=Math.round(ot),tt=Math.round(ct);let l,C,a,c,E,F,V,rt;for(let X=st;X<=tt;X++){if(X<G){let L;X<ot?L=0:L=(ot-X)/(ot-G),l=Y-(Y-et)*L,C=dt-(dt-S)*L,a=ft-(ft-y)*L,c=H-(H-N)*L}else{let L;X>ct?L=1:G===ct?L=0:L=(G-X)/(G-ct),l=et-(et-nt)*L,C=S-(S-q)*L,a=y-(y-W)*L,c=N-(N-z)*L}let Q;X<ot?Q=0:X>ct?Q=1:Q=(ot-X)/(ot-ct),E=Y-(Y-nt)*Q,F=dt-(dt-q)*Q,V=ft-(ft-W)*Q,rt=H-(H-z)*Q;const $=Math.round(Math.min(l,E)),K=Math.round(Math.max(l,E));let ht=j*X+$*4;for(let L=$;L<=K;L++)Q=(l-L)/(l-E),Q<0?Q=0:Q>1&&(Q=1),I[ht++]=C-(C-F)*Q|0,I[ht++]=a-(a-V)*Q|0,I[ht++]=c-(c-rt)*Q|0,I[ht++]=255}}function M(u,w,A){const f=w.coords,D=w.colors;let O,U;switch(w.type){case"lattice":const d=w.verticesPerRow,v=Math.floor(f.length/d)-1,_=d-1;for(O=0;O<v;O++){let I=O*d;for(let j=0;j<_;j++,I++)x(u,A,f[I],f[I+1],f[I+d],D[I],D[I+1],D[I+d]),x(u,A,f[I+d+1],f[I+1],f[I+d],D[I+d+1],D[I+1],D[I+d])}break;case"triangles":for(O=0,U=f.length;O<U;O+=3)x(u,A,f[O],f[O+1],f[O+2],D[O],D[O+1],D[O+2]);break;default:throw new Error("illegal figure")}}class P extends T{constructor(w){super(),this._coords=w[2],this._colors=w[3],this._figures=w[4],this._bounds=w[5],this._bbox=w[7],this._background=w[8],this.matrix=null}_createMeshCanvas(w,A,f){const d=Math.floor(this._bounds[0]),v=Math.floor(this._bounds[1]),_=Math.ceil(this._bounds[2])-d,I=Math.ceil(this._bounds[3])-v,j=Math.min(Math.ceil(Math.abs(_*w[0]*1.1)),3e3),it=Math.min(Math.ceil(Math.abs(I*w[1]*1.1)),3e3),Y=_/j,ot=I/it,et={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-v,scaleX:1/Y,scaleY:1/ot},G=j+2*2,nt=it+2*2,ct=f.getCanvas("mesh",G,nt,!1),dt=ct.context,ft=dt.createImageData(j,it);if(A){const S=ft.data;for(let y=0,N=S.length;y<N;y+=4)S[y]=A[0],S[y+1]=A[1],S[y+2]=A[2],S[y+3]=255}for(const S of this._figures)M(ft,S,et);return dt.putImageData(ft,2,2),{canvas:ct.canvas,offsetX:d-2*Y,offsetY:v-2*ot,scaleX:Y,scaleY:ot}}getPattern(w,A,f,D){R(w,this._bbox);let O;if(D===b.SHADING)O=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(w));else if(O=n.Util.singularValueDecompose2dScale(A.baseTransform),this.matrix){const d=n.Util.singularValueDecompose2dScale(this.matrix);O=[O[0]*d[0],O[1]*d[1]]}const U=this._createMeshCanvas(O,D===b.SHADING?null:this._background,A.cachedCanvases);return D!==b.SHADING&&(w.setTransform(...A.baseTransform),this.matrix&&w.transform(...this.matrix)),w.translate(U.offsetX,U.offsetY),w.scale(U.scaleX,U.scaleY),w.createPattern(U.canvas,"no-repeat")}}class k extends T{getPattern(){return"hotpink"}}function m(u){switch(u[0]){case"RadialAxial":return new g(u);case"Mesh":return new P(u);case"Dummy":return new k}throw new Error(`Unknown IR type: ${u[0]}`)}const r={COLORED:1,UNCOLORED:2};class o{static get MAX_PATTERN_SIZE(){return(0,n.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(w,A,f,D,O){this.operatorList=w[2],this.matrix=w[3]||[1,0,0,1,0,0],this.bbox=w[4],this.xstep=w[5],this.ystep=w[6],this.paintType=w[7],this.tilingType=w[8],this.color=A,this.ctx=f,this.canvasGraphicsFactory=D,this.baseTransform=O}createPatternCanvas(w){const A=this.operatorList,f=this.bbox,D=this.xstep,O=this.ystep,U=this.paintType,d=this.tilingType,v=this.color,_=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+d);const I=f[0],j=f[1],it=f[2],Y=f[3],ot=n.Util.singularValueDecompose2dScale(this.matrix),et=n.Util.singularValueDecompose2dScale(this.baseTransform),G=[ot[0]*et[0],ot[1]*et[1]],nt=this.getSizeAndScale(D,this.ctx.canvas.width,G[0]),ct=this.getSizeAndScale(O,this.ctx.canvas.height,G[1]),dt=w.cachedCanvases.getCanvas("pattern",nt.size,ct.size,!0),ft=dt.context,H=_.createCanvasGraphics(ft);H.groupLevel=w.groupLevel,this.setFillAndStrokeStyleToContext(H,U,v);let S=I,y=j,N=it,q=Y;return I<0&&(S=0,N+=Math.abs(I)),j<0&&(y=0,q+=Math.abs(j)),ft.translate(-(nt.scale*S),-(ct.scale*y)),H.transform(nt.scale,0,0,ct.scale,0,0),ft.save(),this.clipBbox(H,S,y,N,q),H.baseTransform=(0,i.getCurrentTransform)(H.ctx),H.executeOperatorList(A),H.endDrawing(),{canvas:dt.canvas,scaleX:nt.scale,scaleY:ct.scale,offsetX:S,offsetY:y}}getSizeAndScale(w,A,f){w=Math.abs(w);const D=Math.max(o.MAX_PATTERN_SIZE,A);let O=Math.ceil(w*f);return O>=D?O=D:f=O/w,{scale:f,size:O}}clipBbox(w,A,f,D,O){const U=D-A,d=O-f;w.ctx.rect(A,f,U,d),w.current.updateRectMinMax((0,i.getCurrentTransform)(w.ctx),[A,f,D,O]),w.clip(),w.endPath()}setFillAndStrokeStyleToContext(w,A,f){const D=w.ctx,O=w.current;switch(A){case r.COLORED:const U=this.ctx;D.fillStyle=U.fillStyle,D.strokeStyle=U.strokeStyle,O.fillColor=U.fillStyle,O.strokeColor=U.strokeStyle;break;case r.UNCOLORED:const d=n.Util.makeHexColor(f[0],f[1],f[2]);D.fillStyle=d,D.strokeStyle=d,O.fillColor=d,O.strokeColor=d;break;default:throw new n.FormatError(`Unsupported paint type: ${A}`)}}getPattern(w,A,f,D){let O=f;D!==b.SHADING&&(O=n.Util.transform(O,A.baseTransform),this.matrix&&(O=n.Util.transform(O,this.matrix)));const U=this.createPatternCanvas(A);let d=new DOMMatrix(O);d=d.translate(U.offsetX,U.offsetY),d=d.scale(1/U.scaleX,1/U.scaleY);const v=w.createPattern(U.canvas,"repeat");try{v.setTransform(d)}catch(_){(0,n.warn)(`TilingPattern.getPattern: "${_==null?void 0:_.message}".`)}return v}}e.TilingPattern=o},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.applyMaskImageData=i;var n=s(1);function i({src:h,srcPos:b=0,dest:R,destPos:T=0,width:g,height:x,inverseDecode:M=!1}){const P=n.FeatureTest.isLittleEndian?4278190080:255,[k,m]=M?[0,P]:[P,0],r=g>>3,o=g&7,u=h.length;R=new Uint32Array(R.buffer);for(let w=0;w<x;w++){for(const f=b+r;b<f;b++){const D=b<u?h[b]:255;R[T++]=D&128?m:k,R[T++]=D&64?m:k,R[T++]=D&32?m:k,R[T++]=D&16?m:k,R[T++]=D&8?m:k,R[T++]=D&4?m:k,R[T++]=D&2?m:k,R[T++]=D&1?m:k}if(o===0)continue;const A=b<u?h[b++]:255;for(let f=0;f<o;f++)R[T++]=A&1<<7-f?m:k}return{srcPos:b,destPos:T}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const s=Object.create(null);e.GlobalWorkerOptions=s,s.workerPort=s.workerPort===void 0?null:s.workerPort,s.workerSrc=s.workerSrc===void 0?"":s.workerSrc},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var n=s(1);const i={UNKNOWN:0,DATA:1,ERROR:2},h={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function b(T){switch(T instanceof Error||typeof T=="object"&&T!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),T.name){case"AbortException":return new n.AbortException(T.message);case"MissingPDFException":return new n.MissingPDFException(T.message);case"PasswordException":return new n.PasswordException(T.message,T.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(T.message,T.status);case"UnknownErrorException":return new n.UnknownErrorException(T.message,T.details);default:return new n.UnknownErrorException(T.message,T.toString())}}class R{constructor(g,x,M){this.sourceName=g,this.targetName=x,this.comObj=M,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=P=>{const k=P.data;if(k.targetName!==this.sourceName)return;if(k.stream){this._processStreamMessage(k);return}if(k.callback){const r=k.callbackId,o=this.callbackCapabilities[r];if(!o)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],k.callback===i.DATA)o.resolve(k.data);else if(k.callback===i.ERROR)o.reject(b(k.reason));else throw new Error("Unexpected callback case");return}const m=this.actionHandler[k.action];if(!m)throw new Error(`Unknown action from worker: ${k.action}`);if(k.callbackId){const r=this.sourceName,o=k.sourceName;new Promise(function(u){u(m(k.data))}).then(function(u){M.postMessage({sourceName:r,targetName:o,callback:i.DATA,callbackId:k.callbackId,data:u})},function(u){M.postMessage({sourceName:r,targetName:o,callback:i.ERROR,callbackId:k.callbackId,reason:b(u)})});return}if(k.streamId){this._createStreamSink(k);return}m(k.data)},M.addEventListener("message",this._onComObjOnMessage)}on(g,x){const M=this.actionHandler;if(M[g])throw new Error(`There is already an actionName called "${g}"`);M[g]=x}send(g,x,M){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,data:x},M)}sendWithPromise(g,x,M){const P=this.callbackId++,k=(0,n.createPromiseCapability)();this.callbackCapabilities[P]=k;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,callbackId:P,data:x},M)}catch(m){k.reject(m)}return k.promise}sendWithStream(g,x,M,P){const k=this.streamId++,m=this.sourceName,r=this.targetName,o=this.comObj;return new ReadableStream({start:u=>{const w=(0,n.createPromiseCapability)();return this.streamControllers[k]={controller:u,startCall:w,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:m,targetName:r,action:g,streamId:k,data:x,desiredSize:u.desiredSize},P),w.promise},pull:u=>{const w=(0,n.createPromiseCapability)();return this.streamControllers[k].pullCall=w,o.postMessage({sourceName:m,targetName:r,stream:h.PULL,streamId:k,desiredSize:u.desiredSize}),w.promise},cancel:u=>{(0,n.assert)(u instanceof Error,"cancel must have a valid reason");const w=(0,n.createPromiseCapability)();return this.streamControllers[k].cancelCall=w,this.streamControllers[k].isClosed=!0,o.postMessage({sourceName:m,targetName:r,stream:h.CANCEL,streamId:k,reason:b(u)}),w.promise}},M)}_createStreamSink(g){const x=g.streamId,M=this.sourceName,P=g.sourceName,k=this.comObj,m=this,r=this.actionHandler[g.action],o={enqueue(u,w=1,A){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=w,f>0&&this.desiredSize<=0&&(this.sinkCapability=(0,n.createPromiseCapability)(),this.ready=this.sinkCapability.promise),k.postMessage({sourceName:M,targetName:P,stream:h.ENQUEUE,streamId:x,chunk:u},A)},close(){this.isCancelled||(this.isCancelled=!0,k.postMessage({sourceName:M,targetName:P,stream:h.CLOSE,streamId:x}),delete m.streamSinks[x])},error(u){(0,n.assert)(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,k.postMessage({sourceName:M,targetName:P,stream:h.ERROR,streamId:x,reason:b(u)}))},sinkCapability:(0,n.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:g.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[x]=o,new Promise(function(u){u(r(g.data,o))}).then(function(){k.postMessage({sourceName:M,targetName:P,stream:h.START_COMPLETE,streamId:x,success:!0})},function(u){k.postMessage({sourceName:M,targetName:P,stream:h.START_COMPLETE,streamId:x,reason:b(u)})})}_processStreamMessage(g){const x=g.streamId,M=this.sourceName,P=g.sourceName,k=this.comObj,m=this.streamControllers[x],r=this.streamSinks[x];switch(g.stream){case h.START_COMPLETE:g.success?m.startCall.resolve():m.startCall.reject(b(g.reason));break;case h.PULL_COMPLETE:g.success?m.pullCall.resolve():m.pullCall.reject(b(g.reason));break;case h.PULL:if(!r){k.postMessage({sourceName:M,targetName:P,stream:h.PULL_COMPLETE,streamId:x,success:!0});break}r.desiredSize<=0&&g.desiredSize>0&&r.sinkCapability.resolve(),r.desiredSize=g.desiredSize,new Promise(function(o){o(r.onPull&&r.onPull())}).then(function(){k.postMessage({sourceName:M,targetName:P,stream:h.PULL_COMPLETE,streamId:x,success:!0})},function(o){k.postMessage({sourceName:M,targetName:P,stream:h.PULL_COMPLETE,streamId:x,reason:b(o)})});break;case h.ENQUEUE:if((0,n.assert)(m,"enqueue should have stream controller"),m.isClosed)break;m.controller.enqueue(g.chunk);break;case h.CLOSE:if((0,n.assert)(m,"close should have stream controller"),m.isClosed)break;m.isClosed=!0,m.controller.close(),this._deleteStreamController(m,x);break;case h.ERROR:(0,n.assert)(m,"error should have stream controller"),m.controller.error(b(g.reason)),this._deleteStreamController(m,x);break;case h.CANCEL_COMPLETE:g.success?m.cancelCall.resolve():m.cancelCall.reject(b(g.reason)),this._deleteStreamController(m,x);break;case h.CANCEL:if(!r)break;new Promise(function(o){o(r.onCancel&&r.onCancel(b(g.reason)))}).then(function(){k.postMessage({sourceName:M,targetName:P,stream:h.CANCEL_COMPLETE,streamId:x,success:!0})},function(o){k.postMessage({sourceName:M,targetName:P,stream:h.CANCEL_COMPLETE,streamId:x,reason:b(o)})}),r.sinkCapability.reject(b(g.reason)),r.isCancelled=!0,delete this.streamSinks[x];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(g,x){await Promise.allSettled([g.startCall&&g.startCall.promise,g.pullCall&&g.pullCall.promise,g.cancelCall&&g.cancelCall.promise]),delete this.streamControllers[x]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=R},(t,e,s)=>{var h,b;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=s(1);class i{constructor({parsedData:T,rawData:g}){pt(this,h,void 0);pt(this,b,void 0);yt(this,h,T),yt(this,b,g)}getRaw(){return B(this,b)}get(T){var g;return(g=B(this,h).get(T))!=null?g:null}getAll(){return(0,n.objectFromMap)(B(this,h))}has(T){return B(this,h).has(T)}}h=new WeakMap,b=new WeakMap,e.Metadata=i},(t,e,s)=>{var R,T,g,x,M,P,de;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var n=s(1);const i=Symbol("INTERNAL");class h{constructor(r,o){pt(this,R,!0);this.name=r,this.intent=o}get visible(){return B(this,R)}_setVisible(r,o){r!==i&&(0,n.unreachable)("Internal method `_setVisible` called."),yt(this,R,o)}}R=new WeakMap;class b{constructor(r){pt(this,P);pt(this,T,!0);pt(this,g,new Map);pt(this,x,null);pt(this,M,null);if(this.name=null,this.creator=null,r!==null){this.name=r.name,this.creator=r.creator,yt(this,M,r.order);for(const o of r.groups)B(this,g).set(o.id,new h(o.name,o.intent));if(r.baseState==="OFF")for(const o of B(this,g).values())o._setVisible(i,!1);for(const o of r.on)B(this,g).get(o)._setVisible(i,!0);for(const o of r.off)B(this,g).get(o)._setVisible(i,!1);yt(this,x,new Map);for(const[o,u]of B(this,g))B(this,x).set(o,u.visible)}}isVisible(r){if(B(this,g).size===0)return!0;if(!r)return(0,n.warn)("Optional content group not defined."),!0;if(r.type==="OCG")return B(this,g).has(r.id)?B(this,g).get(r.id).visible:((0,n.warn)(`Optional content group not found: ${r.id}`),!0);if(r.type==="OCMD"){if(r.expression)return mt(this,P,de).call(this,r.expression);if(!r.policy||r.policy==="AnyOn"){for(const o of r.ids){if(!B(this,g).has(o))return(0,n.warn)(`Optional content group not found: ${o}`),!0;if(B(this,g).get(o).visible)return!0}return!1}else if(r.policy==="AllOn"){for(const o of r.ids){if(!B(this,g).has(o))return(0,n.warn)(`Optional content group not found: ${o}`),!0;if(!B(this,g).get(o).visible)return!1}return!0}else if(r.policy==="AnyOff"){for(const o of r.ids){if(!B(this,g).has(o))return(0,n.warn)(`Optional content group not found: ${o}`),!0;if(!B(this,g).get(o).visible)return!0}return!1}else if(r.policy==="AllOff"){for(const o of r.ids){if(!B(this,g).has(o))return(0,n.warn)(`Optional content group not found: ${o}`),!0;if(B(this,g).get(o).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${r.policy}.`),!0}return(0,n.warn)(`Unknown group type ${r.type}.`),!0}setVisibility(r,o=!0){if(!B(this,g).has(r)){(0,n.warn)(`Optional content group not found: ${r}`);return}B(this,g).get(r)._setVisible(i,!!o),yt(this,T,null)}get hasInitialVisibility(){if(B(this,T)!==null)return B(this,T);for(const[r,o]of B(this,g)){const u=B(this,x).get(r);if(o.visible!==u)return yt(this,T,!1)}return yt(this,T,!0)}getOrder(){return B(this,g).size?B(this,M)?B(this,M).slice():[...B(this,g).keys()]:null}getGroups(){return B(this,g).size>0?(0,n.objectFromMap)(B(this,g)):null}getGroup(r){return B(this,g).get(r)||null}}T=new WeakMap,g=new WeakMap,x=new WeakMap,M=new WeakMap,P=new WeakSet,de=function(r){const o=r.length;if(o<2)return!0;const u=r[0];for(let w=1;w<o;w++){const A=r[w];let f;if(Array.isArray(A))f=mt(this,P,de).call(this,A);else if(B(this,g).has(A))f=B(this,g).get(A).visible;else return(0,n.warn)(`Optional content group not found: ${A}`),!0;switch(u){case"And":if(!f)return!1;break;case"Or":if(f)return!0;break;case"Not":return!f;default:return!0}}return u==="And"},e.OptionalContentConfig=b},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var n=s(1),i=s(8);class h{constructor(g,x){(0,n.assert)(x,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=g.progressiveDone||!1,this._contentDispositionFilename=g.contentDispositionFilename||null;const M=g.initialData;if((M==null?void 0:M.length)>0){const P=new Uint8Array(M).buffer;this._queuedChunks.push(P)}this._pdfDataRangeTransport=x,this._isStreamingSupported=!g.disableStream,this._isRangeSupported=!g.disableRange,this._contentLength=g.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((P,k)=>{this._onReceiveData({begin:P,chunk:k})}),this._pdfDataRangeTransport.addProgressListener((P,k)=>{this._onProgress({loaded:P,total:k})}),this._pdfDataRangeTransport.addProgressiveReadListener(P=>{this._onReceiveData({chunk:P})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(g){const x=new Uint8Array(g.chunk).buffer;if(g.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(x):this._queuedChunks.push(x);else{const M=this._rangeReaders.some(function(P){return P._begin!==g.begin?!1:(P._enqueue(x),!0)});(0,n.assert)(M,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var g,x;return(x=(g=this._fullRequestReader)==null?void 0:g._loaded)!=null?x:0}_onProgress(g){if(g.total===void 0){const x=this._rangeReaders[0];x!=null&&x.onProgress&&x.onProgress({loaded:g.loaded})}else{const x=this._fullRequestReader;x!=null&&x.onProgress&&x.onProgress({loaded:g.loaded,total:g.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(g){const x=this._rangeReaders.indexOf(g);x>=0&&this._rangeReaders.splice(x,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const g=this._queuedChunks;return this._queuedChunks=null,new b(this,g,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(g,x){if(x<=this._progressiveDataLength)return null;const M=new R(this,g,x);return this._pdfDataRangeTransport.requestDataRange(g,x),this._rangeReaders.push(M),M}cancelAllRequests(g){this._fullRequestReader&&this._fullRequestReader.cancel(g);for(const x of this._rangeReaders.slice(0))x.cancel(g);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=h;class b{constructor(g,x,M=!1,P=null){this._stream=g,this._done=M||!1,this._filename=(0,i.isPdfFile)(P)?P:null,this._queuedChunks=x||[],this._loaded=0;for(const k of this._queuedChunks)this._loaded+=k.byteLength;this._requests=[],this._headersReady=Promise.resolve(),g._fullRequestReader=this,this.onProgress=null}_enqueue(g){this._done||(this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunks.push(g),this._loaded+=g.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=(0,n.createPromiseCapability)();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class R{constructor(g,x,M){this._stream=g,this._begin=x,this._end=M,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(g){if(!this._done){if(this._requests.length===0)this._queuedChunk=g;else{this._requests.shift().resolve({value:g,done:!1});for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const x=this._queuedChunk;return this._queuedChunk=null,{value:x,done:!1}}if(this._done)return{value:void 0,done:!0};const g=(0,n.createPromiseCapability)();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class s{static textContent(i){const h=[],b={items:h,styles:Object.create(null)};function R(T){var M;if(!T)return;let g=null;const x=T.name;if(x==="#text")g=T.value;else if(s.shouldBuildText(x))(M=T==null?void 0:T.attributes)!=null&&M.textContent?g=T.attributes.textContent:T.value&&(g=T.value);else return;if(g!==null&&h.push({str:g}),!!T.children)for(const P of T.children)R(P)}return R(i),b}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}e.XfaText=s},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=s(9);const i=function(T){return new Promise((g,x)=>{require$$5.readFile(T,(P,k)=>{if(P||!k){x(new Error(P));return}g(new Uint8Array(k))})})};class h extends n.BaseCanvasFactory{_createCanvas(g,x){return require$$5.createCanvas(g,x)}}e.NodeCanvasFactory=h;class b extends n.BaseCMapReaderFactory{_fetchData(g,x){return i(g).then(M=>({cMapData:M,compressionType:x}))}}e.NodeCMapReaderFactory=b;class R extends n.BaseStandardFontDataFactory{_fetchData(g){return i(g)}}e.NodeStandardFontDataFactory=R},(t,e,s)=>{var T,g,x,M,P,k,m,r,o,fe,w,Re,f,pe,O,Fe;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var n=s(7),i=s(1),h=s(23),b=s(24);const d=class{constructor(_){pt(this,o);pt(this,w);pt(this,f);pt(this,O);pt(this,T,void 0);pt(this,g,!1);pt(this,x,this.pointerup.bind(this));pt(this,M,this.pointerdown.bind(this));pt(this,P,new Map);pt(this,k,!1);pt(this,m,!1);pt(this,r,void 0);d._initialized||(d._initialized=!0,h.FreeTextEditor.initialize(_.l10n),b.InkEditor.initialize(_.l10n),_.uiManager.registerEditorTypes([h.FreeTextEditor,b.InkEditor])),yt(this,r,_.uiManager),this.annotationStorage=_.annotationStorage,this.pageIndex=_.pageIndex,this.div=_.div,yt(this,T,_.accessibilityManager),B(this,r).addLayer(this)}updateToolbar(_){B(this,r).updateToolbar(_)}updateMode(_=B(this,r).getMode()){mt(this,O,Fe).call(this),_===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),B(this,r).unselectAll()}addInkEditorIfNeeded(_){if(!_&&B(this,r).getMode()!==i.AnnotationEditorType.INK)return;if(!_){for(const j of B(this,P).values())if(j.isEmpty()){j.setInBackground();return}}mt(this,f,pe).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(_){B(this,r).setEditingState(_)}addCommands(_){B(this,r).addCommands(_)}enable(){this.div.style.pointerEvents="auto";for(const _ of B(this,P).values())_.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const _ of B(this,P).values())_.disableEditing()}setActiveEditor(_){B(this,r).getActive()!==_&&B(this,r).setActiveEditor(_)}enableClick(){this.div.addEventListener("pointerdown",B(this,M)),this.div.addEventListener("pointerup",B(this,x))}disableClick(){this.div.removeEventListener("pointerdown",B(this,M)),this.div.removeEventListener("pointerup",B(this,x))}attach(_){B(this,P).set(_.id,_)}detach(_){var I;B(this,P).delete(_.id),(I=B(this,T))==null||I.removePointerInTextLayer(_.contentDiv)}remove(_){B(this,r).removeEditor(_),this.detach(_),this.annotationStorage.remove(_.id),_.div.style.display="none",setTimeout(()=>{_.div.style.display="",_.div.remove(),_.isAttachedToDOM=!1,document.activeElement===document.body&&B(this,r).focusMainContainer()},0),B(this,m)||this.addInkEditorIfNeeded(!1)}add(_){if(mt(this,o,fe).call(this,_),B(this,r).addEditor(_),this.attach(_),!_.isAttachedToDOM){const I=_.render();this.div.append(I),_.isAttachedToDOM=!0}this.moveEditorInDOM(_),_.onceAdded(),this.addToAnnotationStorage(_)}moveEditorInDOM(_){var I;(I=B(this,T))==null||I.moveElementInDOM(this.div,_.div,_.contentDiv,!0)}addToAnnotationStorage(_){!_.isEmpty()&&!this.annotationStorage.has(_.id)&&this.annotationStorage.setValue(_.id,_)}addOrRebuild(_){_.needsToBeRebuilt()?_.rebuild():this.add(_)}addANewEditor(_){const I=()=>{this.addOrRebuild(_)},j=()=>{_.remove()};this.addCommands({cmd:I,undo:j,mustExec:!0})}addUndoableEditor(_){const I=()=>{this.addOrRebuild(_)},j=()=>{_.remove()};this.addCommands({cmd:I,undo:j,mustExec:!1})}getNextId(){return B(this,r).getId()}deserialize(_){switch(_.annotationType){case i.AnnotationEditorType.FREETEXT:return h.FreeTextEditor.deserialize(_,this);case i.AnnotationEditorType.INK:return b.InkEditor.deserialize(_,this)}return null}setSelected(_){B(this,r).setSelected(_)}toggleSelected(_){B(this,r).toggleSelected(_)}isSelected(_){return B(this,r).isSelected(_)}unselect(_){B(this,r).unselect(_)}pointerup(_){const I=n.KeyboardManager.platform.isMac;if(!(_.button!==0||_.ctrlKey&&I)&&_.target===this.div&&!!B(this,k)){if(yt(this,k,!1),!B(this,g)){yt(this,g,!0);return}mt(this,f,pe).call(this,_)}}pointerdown(_){const I=n.KeyboardManager.platform.isMac;if(_.button!==0||_.ctrlKey&&I||_.target!==this.div)return;yt(this,k,!0);const j=B(this,r).getActive();yt(this,g,!j||j.isEmpty())}drop(_){const I=_.dataTransfer.getData("text/plain"),j=B(this,r).getEditor(I);if(!j)return;_.preventDefault(),_.dataTransfer.dropEffect="move",mt(this,o,fe).call(this,j);const it=this.div.getBoundingClientRect(),Y=_.clientX-it.x,ot=_.clientY-it.y;j.translate(Y-j.startX,ot-j.startY),this.moveEditorInDOM(j),j.div.focus()}dragover(_){_.preventDefault()}destroy(){var _,I;((_=B(this,r).getActive())==null?void 0:_.parent)===this&&B(this,r).setActiveEditor(null);for(const j of B(this,P).values())(I=B(this,T))==null||I.removePointerInTextLayer(j.contentDiv),j.isAttachedToDOM=!1,j.div.remove(),j.parent=null;this.div=null,B(this,P).clear(),B(this,r).removeLayer(this)}render(_){this.viewport=_.viewport,(0,n.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const I of B(this,r).getEditors(this.pageIndex))this.add(I);this.updateMode()}update(_){this.viewport=_.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[_,I,j,it]=this.viewport.viewBox,Y=j-_,ot=it-I;return[Y,ot]}get viewportBaseDimensions(){const{width:_,height:I,rotation:j}=this.viewport;return j%180===0?[_,I]:[I,_]}setDimensions(){const{width:_,height:I,rotation:j}=this.viewport,it=j%180!==0,Y=Math.floor(_)+"px",ot=Math.floor(I)+"px";this.div.style.width=it?ot:Y,this.div.style.height=it?Y:ot,this.div.setAttribute("data-main-rotation",j)}};let R=d;T=new WeakMap,g=new WeakMap,x=new WeakMap,M=new WeakMap,P=new WeakMap,k=new WeakMap,m=new WeakMap,r=new WeakMap,o=new WeakSet,fe=function(_){var I;_.parent!==this&&(this.attach(_),_.pageIndex=this.pageIndex,(I=_.parent)==null||I.detach(_),_.parent=this,_.div&&_.isAttachedToDOM&&(_.div.remove(),this.div.append(_.div)))},w=new WeakSet,Re=function(_){switch(B(this,r).getMode()){case i.AnnotationEditorType.FREETEXT:return new h.FreeTextEditor(_);case i.AnnotationEditorType.INK:return new b.InkEditor(_)}return null},f=new WeakSet,pe=function(_){const I=this.getNextId(),j=mt(this,w,Re).call(this,{parent:this,id:I,x:_.offsetX,y:_.offsetY});return j&&this.add(j),j},O=new WeakSet,Fe=function(){yt(this,m,!0);for(const _ of B(this,P).values())_.isEmpty()&&_.remove();yt(this,m,!1)},It(R,"_initialized",!1),e.AnnotationEditorLayer=R},(t,e,s)=>{var R,T,g,x,M,P,k,m,Me,o,Oe,w,Ie,f,ge;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var n=s(1),i=s(7),h=s(6);const O=class extends h.AnnotationEditor{constructor(v){super({...v,name:"freeTextEditor"});pt(this,m);pt(this,o);pt(this,w);pt(this,f);pt(this,R,this.editorDivBlur.bind(this));pt(this,T,this.editorDivFocus.bind(this));pt(this,g,this.editorDivKeydown.bind(this));pt(this,x,void 0);pt(this,M,"");pt(this,P,!1);pt(this,k,void 0);yt(this,x,v.color||O._defaultColor||h.AnnotationEditor._defaultLineColor),yt(this,k,v.fontSize||O._defaultFontSize)}static initialize(v){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(I=>[I,v.get(I)]));const _=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(_.getPropertyValue("--freetext-padding"))}static updateDefaultParams(v,_){switch(v){case n.AnnotationEditorParamsType.FREETEXT_SIZE:O._defaultFontSize=_;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:O._defaultColor=_;break}}updateParams(v,_){switch(v){case n.AnnotationEditorParamsType.FREETEXT_SIZE:mt(this,m,Me).call(this,_);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:mt(this,o,Oe).call(this,_);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,O._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,O._defaultColor||h.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,B(this,k)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,B(this,x)]]}getInitialTranslation(){return[-O._internalPadding*this.parent.scaleFactor,-(O._internalPadding+B(this,k))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",B(this,g)),this.editorDiv.addEventListener("focus",B(this,T)),this.editorDiv.addEventListener("blur",B(this,R)))}disableEditMode(){!this.isInEditMode()||(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",B(this,g)),this.editorDiv.removeEventListener("focus",B(this,T)),this.editorDiv.removeEventListener("blur",B(this,R)),this.div.focus(),this.isEditing=!1)}focusin(v){super.focusin(v),v.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),B(this,P)||(yt(this,P,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),yt(this,M,mt(this,w,Ie).call(this).trimEnd()),mt(this,f,ge).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(v){this.enableEditMode(),this.editorDiv.focus()}keydown(v){v.target===this.div&&v.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(v){O._keyboardManager.exec(this,v)}editorDivFocus(v){this.isEditing=!0}editorDivBlur(v){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let v,_;this.width&&(v=this.x,_=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),O._l10nPromise.get("editor_free_text_aria_label").then(j=>{var it;return(it=this.editorDiv)==null?void 0:it.setAttribute("aria-label",j)}),O._l10nPromise.get("free_text_default_content").then(j=>{var it;return(it=this.editorDiv)==null?void 0:it.setAttribute("default-content",j)}),this.editorDiv.contentEditable=!0;const{style:I}=this.editorDiv;if(I.fontSize=`calc(${B(this,k)}px * var(--scale-factor))`,I.color=B(this,x),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[j,it]=this.parent.viewportBaseDimensions;this.setAt(v*j,_*it,this.width*j,this.height*it);for(const Y of B(this,M).split(`
`)){const ot=document.createElement("div");ot.append(Y?document.createTextNode(Y):document.createElement("br")),this.editorDiv.append(ot)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(v,_){const I=super.deserialize(v,_);return yt(I,k,v.fontSize),yt(I,x,n.Util.makeHexColor(...v.color)),yt(I,M,v.value),I}serialize(){if(this.isEmpty())return null;const v=O._internalPadding*this.parent.scaleFactor,_=this.getRect(v,v),I=h.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:n.AnnotationEditorType.FREETEXT,color:I,fontSize:B(this,k),value:B(this,M),pageIndex:this.parent.pageIndex,rect:_,rotation:this.rotation}}};let b=O;R=new WeakMap,T=new WeakMap,g=new WeakMap,x=new WeakMap,M=new WeakMap,P=new WeakMap,k=new WeakMap,m=new WeakSet,Me=function(v){const _=j=>{this.editorDiv.style.fontSize=`calc(${j}px * var(--scale-factor))`,this.translate(0,-(j-B(this,k))*this.parent.scaleFactor),yt(this,k,j),mt(this,f,ge).call(this)},I=B(this,k);this.parent.addCommands({cmd:()=>{_(v)},undo:()=>{_(I)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},o=new WeakSet,Oe=function(v){const _=B(this,x);this.parent.addCommands({cmd:()=>{yt(this,x,v),this.editorDiv.style.color=v},undo:()=>{yt(this,x,_),this.editorDiv.style.color=_},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},w=new WeakSet,Ie=function(){const v=this.editorDiv.getElementsByTagName("div");if(v.length===0)return this.editorDiv.innerText;const _=[];for(let I=0,j=v.length;I<j;I++){const Y=v[I].firstChild;(Y==null?void 0:Y.nodeName)==="#text"?_.push(Y.data):_.push("")}return _.join(`
`)},f=new WeakSet,ge=function(){const[v,_]=this.parent.viewportBaseDimensions,I=this.div.getBoundingClientRect();this.width=I.width/v,this.height=I.height/_},It(b,"_freeTextDefaultContent",""),It(b,"_l10nPromise"),It(b,"_internalPadding",0),It(b,"_defaultColor",null),It(b,"_defaultFontSize",10),It(b,"_keyboardManager",new i.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],O.prototype.commitOrRemove]])),It(b,"_type","freetext"),e.FreeTextEditor=b},(t,e,s)=>{var g,x,M,P,k,m,r,o,u,w,A,f,D,O,U,De,v,Le,I,Ne,it,Be,ot,me,G,je,ct,Ue,ft,He,S,Xt,N,_e,W,ne,st,se,l,Jt,a,be,E,ie,V,Ae,X,We,$,qe,ht,Ve,lt,ye,bt,re,Et,Qt,kt,ve;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0,Object.defineProperty(e,"fitCurve",{enumerable:!0,get:function(){return h.fitCurve}});var n=s(1),i=s(6),h=s(25),b=s(7);const R=16,wt=class extends i.AnnotationEditor{constructor(ut){super({...ut,name:"inkEditor"});pt(this,U);pt(this,v);pt(this,I);pt(this,it);pt(this,ot);pt(this,G);pt(this,ct);pt(this,ft);pt(this,S);pt(this,N);pt(this,W);pt(this,st);pt(this,l);pt(this,a);pt(this,E);pt(this,X);pt(this,$);pt(this,ht);pt(this,lt);pt(this,bt);pt(this,Et);pt(this,kt);pt(this,g,0);pt(this,x,0);pt(this,M,0);pt(this,P,this.canvasPointermove.bind(this));pt(this,k,this.canvasPointerleave.bind(this));pt(this,m,this.canvasPointerup.bind(this));pt(this,r,this.canvasPointerdown.bind(this));pt(this,o,!1);pt(this,u,!1);pt(this,w,null);pt(this,A,null);pt(this,f,0);pt(this,D,0);pt(this,O,null);this.color=ut.color||null,this.thickness=ut.thickness||null,this.opacity=ut.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(ut){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(_t=>[_t,ut.get(_t)]))}static updateDefaultParams(ut,_t){switch(ut){case n.AnnotationEditorParamsType.INK_THICKNESS:wt._defaultThickness=_t;break;case n.AnnotationEditorParamsType.INK_COLOR:wt._defaultColor=_t;break;case n.AnnotationEditorParamsType.INK_OPACITY:wt._defaultOpacity=_t/100;break}}updateParams(ut,_t){switch(ut){case n.AnnotationEditorParamsType.INK_THICKNESS:mt(this,U,De).call(this,_t);break;case n.AnnotationEditorParamsType.INK_COLOR:mt(this,v,Le).call(this,_t);break;case n.AnnotationEditorParamsType.INK_OPACITY:mt(this,I,Ne).call(this,_t);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,wt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,wt._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(wt._defaultOpacity*100)]]}get propertiesToUpdate(){var ut;return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||wt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||wt._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((ut=this.opacity)!=null?ut:wt._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(mt(this,W,ne).call(this),mt(this,st,se).call(this)),this.isAttachedToDOM||(this.parent.add(this),mt(this,l,Jt).call(this)),mt(this,Et,Qt).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,B(this,A).disconnect(),yt(this,A,null),super.remove())}enableEditMode(){B(this,o)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",B(this,r)),this.canvas.addEventListener("pointerup",B(this,m)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",B(this,r)),this.canvas.removeEventListener("pointerup",B(this,m)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){B(this,o)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),yt(this,o,!0),this.div.classList.add("disabled"),mt(this,Et,Qt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(ut){super.focusin(ut),this.enableEditMode()}canvasPointerdown(ut){ut.button!==0||!this.isInEditMode()||B(this,o)||(this.setInForeground(),ut.type!=="mouse"&&this.div.focus(),ut.stopPropagation(),this.canvas.addEventListener("pointerleave",B(this,k)),this.canvas.addEventListener("pointermove",B(this,P)),mt(this,G,je).call(this,ut.offsetX,ut.offsetY))}canvasPointermove(ut){ut.stopPropagation(),mt(this,ct,Ue).call(this,ut.offsetX,ut.offsetY)}canvasPointerup(ut){ut.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(ut.stopPropagation(),mt(this,N,_e).call(this,ut),this.setInBackground())}canvasPointerleave(ut){mt(this,N,_e).call(this,ut),this.setInBackground()}render(){if(this.div)return this.div;let ut,_t;this.width&&(ut=this.x,_t=this.y),super.render(),wt._l10nPromise.get("editor_ink_aria_label").then(vt=>{var Ct;return(Ct=this.div)==null?void 0:Ct.setAttribute("aria-label",vt)});const[at,J,Z,At]=mt(this,it,Be).call(this);if(this.setAt(at,J,0,0),this.setDims(Z,At),mt(this,W,ne).call(this),this.width){const[vt,Ct]=this.parent.viewportBaseDimensions;this.setAt(ut*vt,_t*Ct,this.width*vt,this.height*Ct),yt(this,u,!0),mt(this,l,Jt).call(this),this.setDims(this.width*vt,this.height*Ct),mt(this,S,Xt).call(this),mt(this,kt,ve).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return mt(this,st,se).call(this),this.div}setDimensions(ut,_t){const at=Math.round(ut),J=Math.round(_t);if(B(this,f)===at&&B(this,D)===J)return;yt(this,f,at),yt(this,D,J),this.canvas.style.visibility="hidden",B(this,g)&&Math.abs(B(this,g)-ut/_t)>.01&&(_t=Math.ceil(ut/B(this,g)),this.setDims(ut,_t));const[Z,At]=this.parent.viewportBaseDimensions;this.width=ut/Z,this.height=_t/At,B(this,o)&&mt(this,a,be).call(this,ut,_t),mt(this,l,Jt).call(this),mt(this,S,Xt).call(this),this.canvas.style.visibility="visible"}static deserialize(ut,_t){var Dt,Mt;const at=super.deserialize(ut,_t);at.thickness=ut.thickness,at.color=n.Util.makeHexColor(...ut.color),at.opacity=ut.opacity;const[J,Z]=_t.pageDimensions,At=at.width*J,vt=at.height*Z,Ct=_t.scaleFactor,Tt=ut.thickness/2;yt(at,g,At/vt),yt(at,o,!0),yt(at,f,Math.round(At)),yt(at,D,Math.round(vt));for(const{bezier:Pt}of ut.paths){const Nt=[];at.paths.push(Nt);let Lt=Ct*(Pt[0]-Tt),Ht=Ct*(vt-Pt[1]-Tt);for(let Bt=2,qt=Pt.length;Bt<qt;Bt+=6){const $t=Ct*(Pt[Bt]-Tt),Gt=Ct*(vt-Pt[Bt+1]-Tt),zt=Ct*(Pt[Bt+2]-Tt),jt=Ct*(vt-Pt[Bt+3]-Tt),Vt=Ct*(Pt[Bt+4]-Tt),Kt=Ct*(vt-Pt[Bt+5]-Tt);Nt.push([[Lt,Ht],[$t,Gt],[zt,jt],[Vt,Kt]]),Lt=Vt,Ht=Kt}const Ft=mt(this,V,Ae).call(this,Nt);at.bezierPath2D.push(Ft)}const Rt=mt(Dt=at,lt,ye).call(Dt);return yt(at,M,Math.max(R,Rt[2]-Rt[0])),yt(at,x,Math.max(R,Rt[3]-Rt[1])),mt(Mt=at,a,be).call(Mt,At,vt),at}serialize(){if(this.isEmpty())return null;const ut=this.getRect(0,0),_t=this.rotation%180===0?ut[3]-ut[1]:ut[2]-ut[0],at=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:at,thickness:this.thickness,opacity:this.opacity,paths:mt(this,X,We).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,_t),pageIndex:this.parent.pageIndex,rect:ut,rotation:this.rotation}}};let T=wt;g=new WeakMap,x=new WeakMap,M=new WeakMap,P=new WeakMap,k=new WeakMap,m=new WeakMap,r=new WeakMap,o=new WeakMap,u=new WeakMap,w=new WeakMap,A=new WeakMap,f=new WeakMap,D=new WeakMap,O=new WeakMap,U=new WeakSet,De=function(ut){const _t=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=ut,mt(this,Et,Qt).call(this)},undo:()=>{this.thickness=_t,mt(this,Et,Qt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},v=new WeakSet,Le=function(ut){const _t=this.color;this.parent.addCommands({cmd:()=>{this.color=ut,mt(this,S,Xt).call(this)},undo:()=>{this.color=_t,mt(this,S,Xt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},I=new WeakSet,Ne=function(ut){ut/=100;const _t=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=ut,mt(this,S,Xt).call(this)},undo:()=>{this.opacity=_t,mt(this,S,Xt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},it=new WeakSet,Be=function(){const{width:ut,height:_t,rotation:at}=this.parent.viewport;switch(at){case 90:return[0,ut,ut,_t];case 180:return[ut,_t,ut,_t];case 270:return[_t,0,ut,_t];default:return[0,0,ut,_t]}},ot=new WeakSet,me=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,b.opacityToHex)(this.opacity)}`},G=new WeakSet,je=function(ut,_t){var at;this.isEditing=!0,B(this,u)||(yt(this,u,!0),mt(this,l,Jt).call(this),this.thickness||(this.thickness=wt._defaultThickness),this.color||(this.color=wt._defaultColor||i.AnnotationEditor._defaultLineColor),(at=this.opacity)!=null||(this.opacity=wt._defaultOpacity)),this.currentPath.push([ut,_t]),yt(this,w,null),mt(this,ot,me).call(this),this.ctx.beginPath(),this.ctx.moveTo(ut,_t),yt(this,O,()=>{!B(this,O)||(B(this,w)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):mt(this,S,Xt).call(this),this.ctx.lineTo(...B(this,w)),yt(this,w,null),this.ctx.stroke()),window.requestAnimationFrame(B(this,O)))}),window.requestAnimationFrame(B(this,O))},ct=new WeakSet,Ue=function(ut,_t){const[at,J]=this.currentPath.at(-1);ut===at&&_t===J||(this.currentPath.push([ut,_t]),yt(this,w,[ut,_t]))},ft=new WeakSet,He=function(ut,_t){var Tt;this.ctx.closePath(),yt(this,O,null),ut=Math.min(Math.max(ut,0),this.canvas.width),_t=Math.min(Math.max(_t,0),this.canvas.height);const[at,J]=this.currentPath.at(-1);(ut!==at||_t!==J)&&this.currentPath.push([ut,_t]);let Z;if(this.currentPath.length!==1)Z=(0,h.fitCurve)(this.currentPath,30,null);else{const Rt=[ut,_t];Z=[[Rt,Rt.slice(),Rt.slice(),Rt]]}const At=mt(Tt=wt,V,Ae).call(Tt,Z);this.currentPath.length=0;const vt=()=>{this.paths.push(Z),this.bezierPath2D.push(At),this.rebuild()},Ct=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(mt(this,W,ne).call(this),mt(this,st,se).call(this)),mt(this,Et,Qt).call(this))};this.parent.addCommands({cmd:vt,undo:Ct,mustExec:!0})},S=new WeakSet,Xt=function(){if(this.isEmpty()){mt(this,E,ie).call(this);return}mt(this,ot,me).call(this);const{canvas:ut,ctx:_t}=this;_t.setTransform(1,0,0,1,0,0),_t.clearRect(0,0,ut.width,ut.height),mt(this,E,ie).call(this);for(const at of this.bezierPath2D)_t.stroke(at)},N=new WeakSet,_e=function(ut){mt(this,ft,He).call(this,ut.offsetX,ut.offsetY),this.canvas.removeEventListener("pointerleave",B(this,k)),this.canvas.removeEventListener("pointermove",B(this,P)),this.parent.addToAnnotationStorage(this)},W=new WeakSet,ne=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",wt._l10nPromise.get("editor_ink_canvas_aria_label").then(ut=>{var _t;return(_t=this.canvas)==null?void 0:_t.setAttribute("aria-label",ut)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},st=new WeakSet,se=function(){yt(this,A,new ResizeObserver(ut=>{const _t=ut[0].contentRect;_t.width&&_t.height&&this.setDimensions(_t.width,_t.height)})),B(this,A).observe(this.div)},l=new WeakSet,Jt=function(){if(!B(this,u))return;const[ut,_t]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*ut),this.canvas.height=Math.ceil(this.height*_t),mt(this,E,ie).call(this)},a=new WeakSet,be=function(ut,_t){const at=mt(this,bt,re).call(this),J=(ut-at)/B(this,M),Z=(_t-at)/B(this,x);this.scaleFactor=Math.min(J,Z)},E=new WeakSet,ie=function(){const ut=mt(this,bt,re).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ut,this.translationY*this.scaleFactor+ut)},V=new WeakSet,Ae=function(ut){const _t=new Path2D;for(let at=0,J=ut.length;at<J;at++){const[Z,At,vt,Ct]=ut[at];at===0&&_t.moveTo(...Z),_t.bezierCurveTo(At[0],At[1],vt[0],vt[1],Ct[0],Ct[1])}return _t},X=new WeakSet,We=function(ut,_t,at,J){const At=[],vt=this.thickness/2;let Ct,Tt;for(const Rt of this.paths){Ct=[],Tt=[];for(let Dt=0,Mt=Rt.length;Dt<Mt;Dt++){const[Pt,Nt,Lt,Ht]=Rt[Dt],Ft=ut*(Pt[0]+_t)+vt,Bt=J-ut*(Pt[1]+at)-vt,qt=ut*(Nt[0]+_t)+vt,$t=J-ut*(Nt[1]+at)-vt,Gt=ut*(Lt[0]+_t)+vt,zt=J-ut*(Lt[1]+at)-vt,jt=ut*(Ht[0]+_t)+vt,Vt=J-ut*(Ht[1]+at)-vt;Dt===0&&(Ct.push(Ft,Bt),Tt.push(Ft,Bt)),Ct.push(qt,$t,Gt,zt,jt,Vt),mt(this,$,qe).call(this,Ft,Bt,qt,$t,Gt,zt,jt,Vt,4,Tt)}At.push({bezier:Ct,points:Tt})}return At},$=new WeakSet,qe=function(ut,_t,at,J,Z,At,vt,Ct,Tt,Rt){if(mt(this,ht,Ve).call(this,ut,_t,at,J,Z,At,vt,Ct)){Rt.push(vt,Ct);return}for(let Dt=1;Dt<Tt-1;Dt++){const Mt=Dt/Tt,Pt=1-Mt;let Nt=Mt*ut+Pt*at,Lt=Mt*_t+Pt*J,Ht=Mt*at+Pt*Z,Ft=Mt*J+Pt*At;const Bt=Mt*Z+Pt*vt,qt=Mt*At+Pt*Ct;Nt=Mt*Nt+Pt*Ht,Lt=Mt*Lt+Pt*Ft,Ht=Mt*Ht+Pt*Bt,Ft=Mt*Ft+Pt*qt,Nt=Mt*Nt+Pt*Ht,Lt=Mt*Lt+Pt*Ft,Rt.push(Nt,Lt)}Rt.push(vt,Ct)},ht=new WeakSet,Ve=function(ut,_t,at,J,Z,At,vt,Ct){const Rt=(3*at-2*ut-vt)**2,Dt=(3*J-2*_t-Ct)**2,Mt=(3*Z-ut-2*vt)**2,Pt=(3*At-_t-2*Ct)**2;return Math.max(Rt,Mt)+Math.max(Dt,Pt)<=10},lt=new WeakSet,ye=function(){let ut=1/0,_t=-1/0,at=1/0,J=-1/0;for(const Z of this.paths)for(const[At,vt,Ct,Tt]of Z){const Rt=n.Util.bezierBoundingBox(...At,...vt,...Ct,...Tt);ut=Math.min(ut,Rt[0]),at=Math.min(at,Rt[1]),_t=Math.max(_t,Rt[2]),J=Math.max(J,Rt[3])}return[ut,at,_t,J]},bt=new WeakSet,re=function(){return B(this,o)?Math.ceil(this.thickness*this.parent.scaleFactor):0},Et=new WeakSet,Qt=function(ut=!1){if(this.isEmpty())return;if(!B(this,o)){mt(this,S,Xt).call(this);return}const _t=mt(this,lt,ye).call(this),at=mt(this,bt,re).call(this);yt(this,M,Math.max(R,_t[2]-_t[0])),yt(this,x,Math.max(R,_t[3]-_t[1]));const J=Math.ceil(at+B(this,M)*this.scaleFactor),Z=Math.ceil(at+B(this,x)*this.scaleFactor),[At,vt]=this.parent.viewportBaseDimensions;this.width=J/At,this.height=Z/vt,yt(this,g,J/Z),mt(this,kt,ve).call(this);const Ct=this.translationX,Tt=this.translationY;this.translationX=-_t[0],this.translationY=-_t[1],mt(this,l,Jt).call(this),mt(this,S,Xt).call(this),yt(this,f,J),yt(this,D,Z),this.setDims(J,Z);const Rt=ut?at/this.scaleFactor/2:0;this.translate(Ct-this.translationX-Rt,Tt-this.translationY-Rt)},kt=new WeakSet,ve=function(){const{style:ut}=this.div;B(this,g)>=1?(ut.minHeight=`${R}px`,ut.minWidth=`${Math.round(B(this,g)*R)}px`):(ut.minWidth=`${R}px`,ut.minHeight=`${Math.round(R/B(this,g))}px`)},pt(T,V),It(T,"_defaultColor",null),It(T,"_defaultOpacity",1),It(T,"_defaultThickness",1),It(T,"_l10nPromise"),It(T,"_type","ink"),e.InkEditor=T},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fitCurve=void 0;const n=s(26);e.fitCurve=n},t=>{function e(m,r,o){if(!Array.isArray(m))throw new TypeError("First argument should be an array");if(m.forEach(f=>{if(!Array.isArray(f)||f.some(D=>typeof D!="number")||f.length!==m[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),m=m.filter((f,D)=>D===0||!f.every((O,U)=>O===m[D-1][U])),m.length<2)return[];const u=m.length,w=M(m[1],m[0]),A=M(m[u-2],m[u-1]);return s(m,w,A,r,o)}function s(m,r,o,u,w){var f,D,O,U,d,v,_,I,j,it,Y,ot,et;if(m.length===2)return ot=P.vectorLen(P.subtract(m[0],m[1]))/3,f=[m[0],P.addArrays(m[0],P.mulItems(r,ot)),P.addArrays(m[1],P.mulItems(o,ot)),m[1]],[f];if(D=R(m),[f,U,v]=n(m,D,D,r,o,w),U===0||U<u)return[f];if(U<u*u)for(O=D,d=U,_=v,et=0;et<20;et++){if(O=h(f,m,O),[f,U,v]=n(m,D,O,r,o,w),U<u)return[f];if(v===_){let G=U/d;if(G>.9999&&G<1.0001)break}d=U,_=v}return Y=[],I=P.subtract(m[v-1],m[v+1]),I.every(G=>G===0)&&(I=P.subtract(m[v-1],m[v]),[I[0],I[1]]=[-I[1],I[0]]),j=P.normalize(I),it=P.mulItems(j,-1),Y=Y.concat(s(m.slice(0,v+1),r,j,u,w)),Y=Y.concat(s(m.slice(v),it,o,u,w)),Y}function n(m,r,o,u,w,A){var f,D,O;return f=i(m,o,u,w),[D,O]=T(m,f,r),A&&A({bez:f,points:m,params:r,maxErr:D,maxPoint:O}),[f,D,O]}function i(m,r,o,u){var w,A,f,D,O,U,d,v,_,I,j,it,Y,ot,et,G,nt,ct=m[0],dt=m[m.length-1];for(w=[ct,null,null,dt],A=P.zeros_Xx2x2(r.length),Y=0,ot=r.length;Y<ot;Y++)G=r[Y],nt=1-G,f=A[Y],f[0]=P.mulItems(o,3*G*(nt*nt)),f[1]=P.mulItems(u,3*nt*(G*G));for(D=[[0,0],[0,0]],O=[0,0],Y=0,ot=m.length;Y<ot;Y++)G=r[Y],f=A[Y],D[0][0]+=P.dot(f[0],f[0]),D[0][1]+=P.dot(f[0],f[1]),D[1][0]+=P.dot(f[0],f[1]),D[1][1]+=P.dot(f[1],f[1]),et=P.subtract(m[Y],k.q([ct,ct,dt,dt],G)),O[0]+=P.dot(f[0],et),O[1]+=P.dot(f[1],et);return U=D[0][0]*D[1][1]-D[1][0]*D[0][1],d=D[0][0]*O[1]-D[1][0]*O[0],v=O[0]*D[1][1]-O[1]*D[0][1],_=U===0?0:v/U,I=U===0?0:d/U,it=P.vectorLen(P.subtract(ct,dt)),j=1e-6*it,_<j||I<j?(w[1]=P.addArrays(ct,P.mulItems(o,it/3)),w[2]=P.addArrays(dt,P.mulItems(u,it/3))):(w[1]=P.addArrays(ct,P.mulItems(o,_)),w[2]=P.addArrays(dt,P.mulItems(u,I))),w}function h(m,r,o){return o.map((u,w)=>b(m,r[w],u))}function b(m,r,o){var u=P.subtract(k.q(m,o),r),w=k.qprime(m,o),A=P.mulMatrix(u,w),f=P.sum(P.squareItems(w))+2*P.mulMatrix(u,k.qprimeprime(m,o));return f===0?o:o-A/f}function R(m){var r=[],o,u,w;return m.forEach((A,f)=>{o=f?u+P.vectorLen(P.subtract(A,w)):0,r.push(o),u=o,w=A}),r=r.map(A=>A/u),r}function T(m,r,o){var u,w,A,f,D,O,U,d;w=0,A=Math.floor(m.length/2);const v=g(r,10);for(D=0,O=m.length;D<O;D++)U=m[D],d=x(r,o[D],v,10),f=P.subtract(k.q(r,d),U),u=f[0]*f[0]+f[1]*f[1],u>w&&(w=u,A=D);return[w,A]}var g=function(m,r){for(var o,u=[0],w=m[0],A=0,f=1;f<=r;f++)o=k.q(m,f/r),A+=P.vectorLen(P.subtract(o,w)),u.push(A),w=o;return u=u.map(D=>D/A),u};function x(m,r,o,u){if(r<0)return 0;if(r>1)return 1;for(var w,A,f,D,O,U=1;U<=u;U++)if(r<=o[U]){D=(U-1)/u,f=U/u,A=o[U-1],w=o[U],O=(r-A)/(w-A)*(f-D)+D;break}return O}function M(m,r){return P.normalize(P.subtract(m,r))}class P{static zeros_Xx2x2(r){for(var o=[];r--;)o.push([0,0]);return o}static mulItems(r,o){return r.map(u=>u*o)}static mulMatrix(r,o){return r.reduce((u,w,A)=>u+w*o[A],0)}static subtract(r,o){return r.map((u,w)=>u-o[w])}static addArrays(r,o){return r.map((u,w)=>u+o[w])}static addItems(r,o){return r.map(u=>u+o)}static sum(r){return r.reduce((o,u)=>o+u)}static dot(r,o){return P.mulMatrix(r,o)}static vectorLen(r){return Math.hypot(...r)}static divItems(r,o){return r.map(u=>u/o)}static squareItems(r){return r.map(o=>o*o)}static normalize(r){return this.divItems(r,this.vectorLen(r))}}class k{static q(r,o){var u=1-o,w=P.mulItems(r[0],u*u*u),A=P.mulItems(r[1],3*u*u*o),f=P.mulItems(r[2],3*u*o*o),D=P.mulItems(r[3],o*o*o);return P.addArrays(P.addArrays(w,A),P.addArrays(f,D))}static qprime(r,o){var u=1-o,w=P.mulItems(P.subtract(r[1],r[0]),3*u*u),A=P.mulItems(P.subtract(r[2],r[1]),6*u*o),f=P.mulItems(P.subtract(r[3],r[2]),3*o*o);return P.addArrays(P.addArrays(w,A),f)}static qprimeprime(r,o){return P.addArrays(P.mulItems(P.addArrays(P.subtract(r[2],P.mulItems(r[1],2)),r[0]),6*(1-o)),P.mulItems(P.addArrays(P.subtract(r[3],P.mulItems(r[2],2)),r[1]),6*o))}}t.exports=e,t.exports.fitCubic=s,t.exports.createTangent=M},(t,e,s)=>{var S,Se,N,Ee,W,Ce;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var n=s(1),i=s(8),h=s(5),b=s(28),R=s(29);const T=1e3,g=9,x=new WeakSet;function M(tt){return{width:tt[2]-tt[0],height:tt[3]-tt[1]}}class P{static create(l){switch(l.data.annotationType){case n.AnnotationType.LINK:return new m(l);case n.AnnotationType.TEXT:return new r(l);case n.AnnotationType.WIDGET:switch(l.data.fieldType){case"Tx":return new u(l);case"Btn":return l.data.radioButton?new A(l):l.data.checkBox?new w(l):new f(l);case"Ch":return new D(l)}return new o(l);case n.AnnotationType.POPUP:return new O(l);case n.AnnotationType.FREETEXT:return new d(l);case n.AnnotationType.LINE:return new v(l);case n.AnnotationType.SQUARE:return new _(l);case n.AnnotationType.CIRCLE:return new I(l);case n.AnnotationType.POLYLINE:return new j(l);case n.AnnotationType.CARET:return new Y(l);case n.AnnotationType.INK:return new ot(l);case n.AnnotationType.POLYGON:return new it(l);case n.AnnotationType.HIGHLIGHT:return new et(l);case n.AnnotationType.UNDERLINE:return new G(l);case n.AnnotationType.SQUIGGLY:return new nt(l);case n.AnnotationType.STRIKEOUT:return new ct(l);case n.AnnotationType.STAMP:return new dt(l);case n.AnnotationType.FILEATTACHMENT:return new ft(l);default:return new k(l)}}}class k{constructor(l,{isRenderable:C=!1,ignoreBorder:a=!1,createQuadrilaterals:c=!1}={}){this.isRenderable=C,this.data=l.data,this.layer=l.layer,this.page=l.page,this.viewport=l.viewport,this.linkService=l.linkService,this.downloadManager=l.downloadManager,this.imageResourcesPath=l.imageResourcesPath,this.renderForms=l.renderForms,this.svgFactory=l.svgFactory,this.annotationStorage=l.annotationStorage,this.enableScripting=l.enableScripting,this.hasJSActions=l.hasJSActions,this._fieldObjects=l.fieldObjects,this._mouseState=l.mouseState,C&&(this.container=this._createContainer(a)),c&&(this.quadrilaterals=this._createQuadrilaterals(a))}_createContainer(l=!1){const C=this.data,a=this.page,c=this.viewport,E=document.createElement("section"),{width:F,height:V}=M(C.rect),[rt,X,Q,$]=c.viewBox,K=Q-rt,ht=$-X;E.setAttribute("data-annotation-id",C.id);const L=n.Util.normalizeRect([C.rect[0],a.view[3]-C.rect[1]+a.view[1],C.rect[2],a.view[3]-C.rect[3]+a.view[1]]);if(!l&&C.borderStyle.width>0){E.style.borderWidth=`${C.borderStyle.width}px`;const gt=C.borderStyle.horizontalCornerRadius,bt=C.borderStyle.verticalCornerRadius;if(gt>0||bt>0){const Et=`calc(${gt}px * var(--scale-factor)) / calc(${bt}px * var(--scale-factor))`;E.style.borderRadius=Et}else if(this instanceof A){const Et=`calc(${F}px * var(--scale-factor)) / calc(${V}px * var(--scale-factor))`;E.style.borderRadius=Et}switch(C.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:E.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:E.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:E.style.borderBottomStyle="solid";break}const St=C.borderColor||null;St?E.style.borderColor=n.Util.makeHexColor(St[0]|0,St[1]|0,St[2]|0):E.style.borderWidth=0}E.style.left=`${100*(L[0]-rt)/K}%`,E.style.top=`${100*(L[1]-X)/ht}%`;const{rotation:lt}=C;return C.hasOwnCanvas||lt===0?(E.style.width=`${100*F/K}%`,E.style.height=`${100*V/ht}%`):this.setRotation(lt,E),E}setRotation(l,C=this.container){const[a,c,E,F]=this.viewport.viewBox,V=E-a,rt=F-c,{width:X,height:Q}=M(this.data.rect);let $,K;l%180===0?($=100*X/V,K=100*Q/rt):($=100*Q/V,K=100*X/rt),C.style.width=`${$}%`,C.style.height=`${K}%`,C.setAttribute("data-main-rotation",(360-l)%360)}get _commonActions(){const l=(C,a,c)=>{const E=c.detail[C];c.target.style[a]=b.ColorConverters[`${E[0]}_HTML`](E.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:C=>{const a=C.detail.display%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:a,print:C.detail.display===0||C.detail.display===3})},print:C=>{this.annotationStorage.setValue(this.data.id,{print:C.detail.print})},hidden:C=>{this.container.style.visibility=C.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:C.detail.hidden})},focus:C=>{setTimeout(()=>C.target.focus({preventScroll:!1}),0)},userName:C=>{C.target.title=C.detail.userName},readonly:C=>{C.detail.readonly?C.target.setAttribute("readonly",""):C.target.removeAttribute("readonly")},required:C=>{this._setRequired(C.target,C.detail.required)},bgColor:C=>{l("bgColor","backgroundColor",C)},fillColor:C=>{l("fillColor","backgroundColor",C)},fgColor:C=>{l("fgColor","color",C)},textColor:C=>{l("textColor","color",C)},borderColor:C=>{l("borderColor","borderColor",C)},strokeColor:C=>{l("strokeColor","borderColor",C)},rotation:C=>{const a=C.detail.rotation;this.setRotation(a),this.annotationStorage.setValue(this.data.id,{rotation:a})}})}_dispatchEventFromSandbox(l,C){const a=this._commonActions;for(const c of Object.keys(C.detail)){const E=l[c]||a[c];E&&E(C)}}_setDefaultPropertiesFromJS(l){if(!this.enableScripting)return;const C=this.annotationStorage.getRawValue(this.data.id);if(!C)return;const a=this._commonActions;for(const[c,E]of Object.entries(C)){const F=a[c];if(F){const V={detail:{[c]:E},target:l};F(V),delete C[c]}}}_createQuadrilaterals(l=!1){if(!this.data.quadPoints)return null;const C=[],a=this.data.rect;for(const c of this.data.quadPoints)this.data.rect=[c[2].x,c[2].y,c[1].x,c[1].y],C.push(this._createContainer(l));return this.data.rect=a,C}_createPopup(l,C){let a=this.container;this.quadrilaterals&&(l=l||this.quadrilaterals,a=this.quadrilaterals[0]),l||(l=document.createElement("div"),l.className="popupTriggerArea",a.append(l));const E=new U({container:a,trigger:l,color:C.color,titleObj:C.titleObj,modificationDate:C.modificationDate,contentsObj:C.contentsObj,richText:C.richText,hideWrapper:!0}).render();E.style.left="100%",a.append(E)}_renderQuadrilaterals(l){for(const C of this.quadrilaterals)C.className=l;return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(l,C=null){const a=[];if(this._fieldObjects){const c=this._fieldObjects[l];if(c)for(const{page:E,id:F,exportValues:V}of c){if(E===-1||F===C)continue;const rt=typeof V=="string"?V:null,X=document.querySelector(`[data-element-id="${F}"]`);if(X&&!x.has(X)){(0,n.warn)(`_getElementsByName - element not allowed: ${F}`);continue}a.push({id:F,exportValue:rt,domElement:X})}return a}for(const c of document.getElementsByName(l)){const{id:E,exportValue:F}=c;E!==C&&(!x.has(c)||a.push({id:E,exportValue:F,domElement:c}))}return a}static get platform(){const l=typeof navigator<"u"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:l.includes("Win"),isMac:l.includes("Mac")})}}class m extends k{constructor(l,C=null){super(l,{isRenderable:!0,ignoreBorder:!!(C!=null&&C.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=l.data.isTooltipOnly}render(){const{data:l,linkService:C}=this,a=document.createElement("a");a.setAttribute("data-element-id",l.id);let c=!1;return l.url?(C.addLinkAttributes(a,l.url,l.newWindow),c=!0):l.action?(this._bindNamedAction(a,l.action),c=!0):l.dest?(this._bindLink(a,l.dest),c=!0):(l.actions&&(l.actions.Action||l.actions["Mouse Up"]||l.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(a,l),c=!0),l.resetForm?(this._bindResetFormAction(a,l.resetForm),c=!0):this.isTooltipOnly&&!c&&(this._bindLink(a,""),c=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((E,F)=>{const V=F===0?a:a.cloneNode();return E.append(V),E}):(this.container.className="linkAnnotation",c&&this.container.append(a),this.container)}_bindLink(l,C){l.href=this.linkService.getDestinationHash(C),l.onclick=()=>(C&&this.linkService.goToDestination(C),!1),(C||C==="")&&(l.className="internalLink")}_bindNamedAction(l,C){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>(this.linkService.executeNamedAction(C),!1),l.className="internalLink"}_bindJSAction(l,C){l.href=this.linkService.getAnchorUrl("");const a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const c of Object.keys(C.actions)){const E=a.get(c);!E||(l[E]=()=>{var F;return(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C.id,name:c}}),!1})}l.onclick||(l.onclick=()=>!1),l.className="internalLink"}_bindResetFormAction(l,C){const a=l.onclick;if(a||(l.href=this.linkService.getAnchorUrl("")),l.className="internalLink",!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),a||(l.onclick=()=>!1);return}l.onclick=()=>{var Q;a&&a();const{fields:c,refs:E,include:F}=C,V=[];if(c.length!==0||E.length!==0){const $=new Set(E);for(const K of c){const ht=this._fieldObjects[K]||[];for(const{id:L}of ht)$.add(L)}for(const K of Object.values(this._fieldObjects))for(const ht of K)$.has(ht.id)===F&&V.push(ht)}else for(const $ of Object.values(this._fieldObjects))V.push(...$);const rt=this.annotationStorage,X=[];for(const $ of V){const{id:K}=$;switch(X.push(K),$.type){case"text":{const L=$.defaultValue||"";rt.setValue(K,{value:L});break}case"checkbox":case"radiobutton":{const L=$.defaultValue===$.exportValues;rt.setValue(K,{value:L});break}case"combobox":case"listbox":{const L=$.defaultValue||"";rt.setValue(K,{value:L});break}default:continue}const ht=document.querySelector(`[data-element-id="${K}"]`);if(ht){if(!x.has(ht)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${K}`);continue}}else continue;ht.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Q=this.linkService.eventBus)==null||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:X,name:"ResetForm"}})),!1}}}class r extends k{constructor(l){var a,c,E;const C=!!(l.data.hasPopup||((a=l.data.titleObj)==null?void 0:a.str)||((c=l.data.contentsObj)==null?void 0:c.str)||((E=l.data.richText)==null?void 0:E.str));super(l,{isRenderable:C})}render(){this.container.className="textAnnotation";const l=document.createElement("img");return l.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",l.alt="[{{type}} Annotation]",l.dataset.l10nId="text_annotation_type",l.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(l,this.data),this.container.append(l),this.container}}class o extends k{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(l){const{isWin:C,isMac:a}=k.platform;return C&&l.ctrlKey||a&&l.metaKey}_setEventListener(l,C,a,c){C.includes("mouse")?l.addEventListener(C,E=>{var F;(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:c(E),shift:E.shiftKey,modifier:this._getKeyModifier(E)}})}):l.addEventListener(C,E=>{var F;(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:c(E)}})})}_setEventListeners(l,C,a){var c;for(const[E,F]of C)(F==="Action"||((c=this.data.actions)==null?void 0:c[F]))&&this._setEventListener(l,E,F,a)}_setBackgroundColor(l){const C=this.data.backgroundColor||null;l.style.backgroundColor=C===null?"transparent":n.Util.makeHexColor(C[0],C[1],C[2])}_setTextStyle(l){const C=["left","center","right"],{fontColor:a}=this.data.defaultAppearanceData,c=this.data.defaultAppearanceData.fontSize||g,E=l.style;let F;if(this.data.multiLine){const V=Math.abs(this.data.rect[3]-this.data.rect[1]),rt=Math.round(V/(n.LINE_FACTOR*c))||1,X=V/rt;F=Math.min(c,Math.round(X/n.LINE_FACTOR))}else{const V=Math.abs(this.data.rect[3]-this.data.rect[1]);F=Math.min(c,Math.round(V/n.LINE_FACTOR))}E.fontSize=`calc(${F}px * var(--scale-factor))`,E.color=n.Util.makeHexColor(a[0],a[1],a[2]),this.data.textAlignment!==null&&(E.textAlign=C[this.data.textAlignment])}_setRequired(l,C){C?l.setAttribute("required",!0):l.removeAttribute("required"),l.setAttribute("aria-required",C)}}class u extends o{constructor(l){const C=l.renderForms||!l.data.hasAppearance&&!!l.data.fieldValue;super(l,{isRenderable:C})}setPropertyOnSiblings(l,C,a,c){const E=this.annotationStorage;for(const F of this._getElementsByName(l.name,l.id))F.domElement&&(F.domElement[C]=a),E.setValue(F.id,{[c]:a})}render(){var c;const l=this.annotationStorage,C=this.data.id;this.container.className="textWidgetAnnotation";let a=null;if(this.renderForms){const E=l.getValue(C,{value:this.data.fieldValue});let F=E.formattedValue||E.value||"";const V=l.getValue(C,{charLimit:this.data.maxLen}).charLimit;V&&F.length>V&&(F=F.slice(0,V));const rt={userValue:F,formattedValue:null,valueOnFocus:""};this.data.multiLine?(a=document.createElement("textarea"),a.textContent=F,this.data.doNotScroll&&(a.style.overflowY="hidden")):(a=document.createElement("input"),a.type="text",a.setAttribute("value",F),this.data.doNotScroll&&(a.style.overflowX="hidden")),x.add(a),a.setAttribute("data-element-id",C),a.disabled=this.data.readOnly,a.name=this.data.fieldName,a.tabIndex=T,this._setRequired(a,this.data.required),V&&(a.maxLength=V),a.addEventListener("input",Q=>{l.setValue(C,{value:Q.target.value}),this.setPropertyOnSiblings(a,"value",Q.target.value,"value")}),a.addEventListener("resetform",Q=>{var K;const $=(K=this.data.defaultFieldValue)!=null?K:"";a.value=rt.userValue=$,rt.formattedValue=null});let X=Q=>{const{formattedValue:$}=rt;$!=null&&(Q.target.value=$),Q.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){a.addEventListener("focus",$=>{rt.userValue&&($.target.value=rt.userValue),rt.valueOnFocus=$.target.value}),a.addEventListener("updatefromsandbox",$=>{const K={value(ht){var L;rt.userValue=(L=ht.detail.value)!=null?L:"",l.setValue(C,{value:rt.userValue.toString()}),ht.target.value=rt.userValue},formattedValue(ht){const{formattedValue:L}=ht.detail;rt.formattedValue=L,L!=null&&ht.target!==document.activeElement&&(ht.target.value=L),l.setValue(C,{formattedValue:L})},selRange(ht){ht.target.setSelectionRange(...ht.detail.selRange)},charLimit:ht=>{var bt;const{charLimit:L}=ht.detail,{target:lt}=ht;if(L===0){lt.removeAttribute("maxLength");return}lt.setAttribute("maxLength",L);let gt=rt.userValue;!gt||gt.length<=L||(gt=gt.slice(0,L),lt.value=rt.userValue=gt,l.setValue(C,{value:gt}),(bt=this.linkService.eventBus)==null||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:gt,willCommit:!0,commitKey:1,selStart:lt.selectionStart,selEnd:lt.selectionEnd}}))}};this._dispatchEventFromSandbox(K,$)}),a.addEventListener("keydown",$=>{var L;let K=-1;if($.key==="Escape"?K=0:$.key==="Enter"?K=2:$.key==="Tab"&&(K=3),K===-1)return;const{value:ht}=$.target;rt.valueOnFocus!==ht&&(rt.userValue=ht,(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:ht,willCommit:!0,commitKey:K,selStart:$.target.selectionStart,selEnd:$.target.selectionEnd}}))});const Q=X;X=null,a.addEventListener("blur",$=>{var ht;const{value:K}=$.target;rt.userValue=K,this._mouseState.isDown&&rt.valueOnFocus!==K&&((ht=this.linkService.eventBus)==null||ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:K,willCommit:!0,commitKey:1,selStart:$.target.selectionStart,selEnd:$.target.selectionEnd}})),Q($)}),(c=this.data.actions)!=null&&c.Keystroke&&a.addEventListener("beforeinput",$=>{var Et;const{data:K,target:ht}=$,{value:L,selectionStart:lt,selectionEnd:gt}=ht;let bt=lt,St=gt;switch($.inputType){case"deleteWordBackward":{const xt=L.substring(0,lt).match(/\w*[^\w]*$/);xt&&(bt-=xt[0].length);break}case"deleteWordForward":{const xt=L.substring(lt).match(/^[^\w]*\w*/);xt&&(St+=xt[0].length);break}case"deleteContentBackward":lt===gt&&(bt-=1);break;case"deleteContentForward":lt===gt&&(St+=1);break}$.preventDefault(),(Et=this.linkService.eventBus)==null||Et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:L,change:K||"",willCommit:!1,selStart:bt,selEnd:St}})}),this._setEventListeners(a,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],$=>$.target.value)}if(X&&a.addEventListener("blur",X),this.data.comb){const $=(this.data.rect[2]-this.data.rect[0])/V;a.classList.add("comb"),a.style.letterSpacing=`calc(${$}px * var(--scale-factor) - 1ch)`}}else a=document.createElement("div"),a.textContent=this.data.fieldValue,a.style.verticalAlign="middle",a.style.display="table-cell";return this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class w extends o{constructor(l){super(l,{isRenderable:l.renderForms})}render(){const l=this.annotationStorage,C=this.data,a=C.id;let c=l.getValue(a,{value:C.exportValue===C.fieldValue}).value;typeof c=="string"&&(c=c!=="Off",l.setValue(a,{value:c})),this.container.className="buttonWidgetAnnotation checkBox";const E=document.createElement("input");return x.add(E),E.setAttribute("data-element-id",a),E.disabled=C.readOnly,this._setRequired(E,this.data.required),E.type="checkbox",E.name=C.fieldName,c&&E.setAttribute("checked",!0),E.setAttribute("exportValue",C.exportValue),E.tabIndex=T,E.addEventListener("change",F=>{const{name:V,checked:rt}=F.target;for(const X of this._getElementsByName(V,a)){const Q=rt&&X.exportValue===C.exportValue;X.domElement&&(X.domElement.checked=Q),l.setValue(X.id,{value:Q})}l.setValue(a,{value:rt})}),E.addEventListener("resetform",F=>{const V=C.defaultFieldValue||"Off";F.target.checked=V===C.exportValue}),this.enableScripting&&this.hasJSActions&&(E.addEventListener("updatefromsandbox",F=>{const V={value(rt){rt.target.checked=rt.detail.value!=="Off",l.setValue(a,{value:rt.target.checked})}};this._dispatchEventFromSandbox(V,F)}),this._setEventListeners(E,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],F=>F.target.checked)),this._setBackgroundColor(E),this._setDefaultPropertiesFromJS(E),this.container.append(E),this.container}}class A extends o{constructor(l){super(l,{isRenderable:l.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const l=this.annotationStorage,C=this.data,a=C.id;let c=l.getValue(a,{value:C.fieldValue===C.buttonValue}).value;typeof c=="string"&&(c=c!==C.buttonValue,l.setValue(a,{value:c}));const E=document.createElement("input");if(x.add(E),E.setAttribute("data-element-id",a),E.disabled=C.readOnly,this._setRequired(E,this.data.required),E.type="radio",E.name=C.fieldName,c&&E.setAttribute("checked",!0),E.tabIndex=T,E.addEventListener("change",F=>{const{name:V,checked:rt}=F.target;for(const X of this._getElementsByName(V,a))l.setValue(X.id,{value:!1});l.setValue(a,{value:rt})}),E.addEventListener("resetform",F=>{const V=C.defaultFieldValue;F.target.checked=V!=null&&V===C.buttonValue}),this.enableScripting&&this.hasJSActions){const F=C.buttonValue;E.addEventListener("updatefromsandbox",V=>{const rt={value:X=>{const Q=F===X.detail.value;for(const $ of this._getElementsByName(X.target.name)){const K=Q&&$.id===a;$.domElement&&($.domElement.checked=K),l.setValue($.id,{value:K})}}};this._dispatchEventFromSandbox(rt,V)}),this._setEventListeners(E,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],V=>V.target.checked)}return this._setBackgroundColor(E),this._setDefaultPropertiesFromJS(E),this.container.append(E),this.container}}class f extends m{constructor(l){super(l,{ignoreBorder:l.data.hasAppearance})}render(){const l=super.render();l.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(l.title=this.data.alternativeText);const C=l.lastChild;return this.enableScripting&&this.hasJSActions&&C&&(this._setDefaultPropertiesFromJS(C),C.addEventListener("updatefromsandbox",a=>{this._dispatchEventFromSandbox({},a)})),l}}class D extends o{constructor(l){super(l,{isRenderable:l.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const l=this.annotationStorage,C=this.data.id,a=l.getValue(C,{value:this.data.fieldValue}),c=document.createElement("select");x.add(c),c.setAttribute("data-element-id",C),c.disabled=this.data.readOnly,this._setRequired(c,this.data.required),c.name=this.data.fieldName,c.tabIndex=T;let E=this.data.combo&&this.data.options.length>0;this.data.combo||(c.size=this.data.options.length,this.data.multiSelect&&(c.multiple=!0)),c.addEventListener("resetform",X=>{const Q=this.data.defaultFieldValue;for(const $ of c.options)$.selected=$.value===Q});for(const X of this.data.options){const Q=document.createElement("option");Q.textContent=X.displayValue,Q.value=X.exportValue,a.value.includes(X.exportValue)&&(Q.setAttribute("selected",!0),E=!1),c.append(Q)}let F=null;if(E){const X=document.createElement("option");X.value=" ",X.setAttribute("hidden",!0),X.setAttribute("selected",!0),c.prepend(X),F=()=>{X.remove(),c.removeEventListener("input",F),F=null},c.addEventListener("input",F)}const V=(X,Q)=>{const $=Q?"value":"textContent",K=X.target.options;return X.target.multiple?Array.prototype.filter.call(K,ht=>ht.selected).map(ht=>ht[$]):K.selectedIndex===-1?null:K[K.selectedIndex][$]},rt=X=>{const Q=X.target.options;return Array.prototype.map.call(Q,$=>({displayValue:$.textContent,exportValue:$.value}))};return this.enableScripting&&this.hasJSActions?(c.addEventListener("updatefromsandbox",X=>{const Q={value($){F==null||F();const K=$.detail.value,ht=new Set(Array.isArray(K)?K:[K]);for(const L of c.options)L.selected=ht.has(L.value);l.setValue(C,{value:V($,!0)})},multipleSelection($){c.multiple=!0},remove($){const K=c.options,ht=$.detail.remove;K[ht].selected=!1,c.remove(ht),K.length>0&&Array.prototype.findIndex.call(K,lt=>lt.selected)===-1&&(K[0].selected=!0),l.setValue(C,{value:V($,!0),items:rt($)})},clear($){for(;c.length!==0;)c.remove(0);l.setValue(C,{value:null,items:[]})},insert($){const{index:K,displayValue:ht,exportValue:L}=$.detail.insert,lt=c.children[K],gt=document.createElement("option");gt.textContent=ht,gt.value=L,lt?lt.before(gt):c.append(gt),l.setValue(C,{value:V($,!0),items:rt($)})},items($){const{items:K}=$.detail;for(;c.length!==0;)c.remove(0);for(const ht of K){const{displayValue:L,exportValue:lt}=ht,gt=document.createElement("option");gt.textContent=L,gt.value=lt,c.append(gt)}c.options.length>0&&(c.options[0].selected=!0),l.setValue(C,{value:V($,!0),items:rt($)})},indices($){const K=new Set($.detail.indices);for(const ht of $.target.options)ht.selected=K.has(ht.index);l.setValue(C,{value:V($,!0)})},editable($){$.target.disabled=!$.detail.editable}};this._dispatchEventFromSandbox(Q,X)}),c.addEventListener("input",X=>{var K;const Q=V(X,!0),$=V(X,!1);l.setValue(C,{value:Q}),(K=this.linkService.eventBus)==null||K.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C,name:"Keystroke",value:$,changeEx:Q,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],X=>X.target.checked)):c.addEventListener("input",function(X){l.setValue(C,{value:V(X,!0)})}),this.data.combo&&this._setTextStyle(c),this._setBackgroundColor(c),this._setDefaultPropertiesFromJS(c),this.container.append(c),this.container}}class O extends k{constructor(l){var a,c,E;const C=!!(((a=l.data.titleObj)==null?void 0:a.str)||((c=l.data.contentsObj)==null?void 0:c.str)||((E=l.data.richText)==null?void 0:E.str));super(l,{isRenderable:C})}render(){const l=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",l.includes(this.data.parentType))return this.container;const C=`[data-annotation-id="${this.data.parentId}"]`,a=this.layer.querySelectorAll(C);if(a.length===0)return this.container;const c=new U({container:this.container,trigger:Array.from(a),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),E=this.page,F=n.Util.normalizeRect([this.data.parentRect[0],E.view[3]-this.data.parentRect[1]+E.view[1],this.data.parentRect[2],E.view[3]-this.data.parentRect[3]+E.view[1]]),V=F[0]+this.data.parentRect[2]-this.data.parentRect[0],rt=F[1],[X,Q,$,K]=this.viewport.viewBox,ht=$-X,L=K-Q;return this.container.style.left=`${100*(V-X)/ht}%`,this.container.style.top=`${100*(rt-Q)/L}%`,this.container.append(c.render()),this.container}}class U{constructor(l){this.container=l.container,this.trigger=l.trigger,this.color=l.color,this.titleObj=l.titleObj,this.modificationDate=l.modificationDate,this.contentsObj=l.contentsObj,this.richText=l.richText,this.hideWrapper=l.hideWrapper||!1,this.pinned=!1}render(){var V,rt;const C=document.createElement("div");C.className="popupWrapper",this.hideElement=this.hideWrapper?C:this.container,this.hideElement.hidden=!0;const a=document.createElement("div");a.className="popup";const c=this.color;if(c){const X=.7*(255-c[0])+c[0],Q=.7*(255-c[1])+c[1],$=.7*(255-c[2])+c[2];a.style.backgroundColor=n.Util.makeHexColor(X|0,Q|0,$|0)}const E=document.createElement("h1");E.dir=this.titleObj.dir,E.textContent=this.titleObj.str,a.append(E);const F=i.PDFDateString.toDateObject(this.modificationDate);if(F){const X=document.createElement("span");X.className="popupDate",X.textContent="{{date}}, {{time}}",X.dataset.l10nId="annotation_date_string",X.dataset.l10nArgs=JSON.stringify({date:F.toLocaleDateString(),time:F.toLocaleTimeString()}),a.append(X)}if(((V=this.richText)==null?void 0:V.str)&&(!((rt=this.contentsObj)!=null&&rt.str)||this.contentsObj.str===this.richText.str))R.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:a}),a.lastChild.className="richText popupContent";else{const X=this._formatContents(this.contentsObj);a.append(X)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const X of this.trigger)X.addEventListener("click",this._toggle.bind(this)),X.addEventListener("mouseover",this._show.bind(this,!1)),X.addEventListener("mouseout",this._hide.bind(this,!1));return a.addEventListener("click",this._hide.bind(this,!0)),C.append(a),C}_formatContents({str:l,dir:C}){const a=document.createElement("p");a.className="popupContent",a.dir=C;const c=l.split(/(?:\r\n?|\n)/);for(let E=0,F=c.length;E<F;++E){const V=c[E];a.append(document.createTextNode(V)),E<F-1&&a.append(document.createElement("br"))}return a}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(l=!1){l&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(l=!0){l&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class d extends k{constructor(l){var a,c,E;const C=!!(l.data.hasPopup||((a=l.data.titleObj)==null?void 0:a.str)||((c=l.data.contentsObj)==null?void 0:c.str)||((E=l.data.richText)==null?void 0:E.str));super(l,{isRenderable:C,ignoreBorder:!0}),this.textContent=l.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const l=document.createElement("div");l.className="annotationTextContent",l.setAttribute("role","comment");for(const C of this.textContent){const a=document.createElement("span");a.textContent=C,l.append(a)}this.container.append(l)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class v extends k{constructor(l){var a,c,E;const C=!!(l.data.hasPopup||((a=l.data.titleObj)==null?void 0:a.str)||((c=l.data.contentsObj)==null?void 0:c.str)||((E=l.data.richText)==null?void 0:E.str));super(l,{isRenderable:C,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const l=this.data,{width:C,height:a}=M(l.rect),c=this.svgFactory.create(C,a,!0),E=this.svgFactory.createElement("svg:line");return E.setAttribute("x1",l.rect[2]-l.lineCoordinates[0]),E.setAttribute("y1",l.rect[3]-l.lineCoordinates[1]),E.setAttribute("x2",l.rect[2]-l.lineCoordinates[2]),E.setAttribute("y2",l.rect[3]-l.lineCoordinates[3]),E.setAttribute("stroke-width",l.borderStyle.width||1),E.setAttribute("stroke","transparent"),E.setAttribute("fill","transparent"),c.append(E),this.container.append(c),this._createPopup(E,l),this.container}}class _ extends k{constructor(l){var a,c,E;const C=!!(l.data.hasPopup||((a=l.data.titleObj)==null?void 0:a.str)||((c=l.data.contentsObj)==null?void 0:c.str)||((E=l.data.richText)==null?void 0:E.str));super(l,{isRenderable:C,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const l=this.data,{width:C,height:a}=M(l.rect),c=this.svgFactory.create(C,a,!0),E=l.borderStyle.width,F=this.svgFactory.createElement("svg:rect");return F.setAttribute("x",E/2),F.setAttribute("y",E/2),F.setAttribute("width",C-E),F.setAttribute("height",a-E),F.setAttribute("stroke-width",E||1),F.setAttribute("stroke","transparent"),F.setAttribute("fill","transparent"),c.append(F),this.container.append(c),this._createPopup(F,l),this.container}}class I extends k{constructor(l){var a,c,E;const C=!!(l.data.hasPopup||((a=l.data.titleObj)==null?void 0:a.str)||((c=l.data.contentsObj)==null?void 0:c.str)||((E=l.data.richText)==null?void 0:E.str));super(l,{isRenderable:C,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const l=this.data,{width:C,height:a}=M(l.rect),c=this.svgFactory.create(C,a,!0),E=l.borderStyle.width,F=this.svgFactory.createElement("svg:ellipse");return F.setAttribute("cx",C/2),F.setAttribute("cy",a/2),F.setAttribute("rx",C/2-E/2),F.setAttribute("ry",a/2-E/2),F.setAttribute("stroke-width",E||1),F.setAttribute("stroke","transparent"),F.setAttribute("fill","transparent"),c.append(F),this.container.append(c),this._createPopup(F,l),this.container}}class j extends k{constructor(l){var a,c,E;const C=!!(l.data.hasPopup||((a=l.data.titleObj)==null?void 0:a.str)||((c=l.data.contentsObj)==null?void 0:c.str)||((E=l.data.richText)==null?void 0:E.str));super(l,{isRenderable:C,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const l=this.data,{width:C,height:a}=M(l.rect),c=this.svgFactory.create(C,a,!0);let E=[];for(const V of l.vertices){const rt=V.x-l.rect[0],X=l.rect[3]-V.y;E.push(rt+","+X)}E=E.join(" ");const F=this.svgFactory.createElement(this.svgElementName);return F.setAttribute("points",E),F.setAttribute("stroke-width",l.borderStyle.width||1),F.setAttribute("stroke","transparent"),F.setAttribute("fill","transparent"),c.append(F),this.container.append(c),this._createPopup(F,l),this.container}}class it extends j{constructor(l){super(l),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Y extends k{constructor(l){var a,c,E;const C=!!(l.data.hasPopup||((a=l.data.titleObj)==null?void 0:a.str)||((c=l.data.contentsObj)==null?void 0:c.str)||((E=l.data.richText)==null?void 0:E.str));super(l,{isRenderable:C,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ot extends k{constructor(l){var a,c,E;const C=!!(l.data.hasPopup||((a=l.data.titleObj)==null?void 0:a.str)||((c=l.data.contentsObj)==null?void 0:c.str)||((E=l.data.richText)==null?void 0:E.str));super(l,{isRenderable:C,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const l=this.data,{width:C,height:a}=M(l.rect),c=this.svgFactory.create(C,a,!0);for(const E of l.inkLists){let F=[];for(const rt of E){const X=rt.x-l.rect[0],Q=l.rect[3]-rt.y;F.push(`${X},${Q}`)}F=F.join(" ");const V=this.svgFactory.createElement(this.svgElementName);V.setAttribute("points",F),V.setAttribute("stroke-width",l.borderStyle.width||1),V.setAttribute("stroke","transparent"),V.setAttribute("fill","transparent"),this._createPopup(V,l),c.append(V)}return this.container.append(c),this.container}}class et extends k{constructor(l){var a,c,E;const C=!!(l.data.hasPopup||((a=l.data.titleObj)==null?void 0:a.str)||((c=l.data.contentsObj)==null?void 0:c.str)||((E=l.data.richText)==null?void 0:E.str));super(l,{isRenderable:C,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class G extends k{constructor(l){var a,c,E;const C=!!(l.data.hasPopup||((a=l.data.titleObj)==null?void 0:a.str)||((c=l.data.contentsObj)==null?void 0:c.str)||((E=l.data.richText)==null?void 0:E.str));super(l,{isRenderable:C,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class nt extends k{constructor(l){var a,c,E;const C=!!(l.data.hasPopup||((a=l.data.titleObj)==null?void 0:a.str)||((c=l.data.contentsObj)==null?void 0:c.str)||((E=l.data.richText)==null?void 0:E.str));super(l,{isRenderable:C,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class ct extends k{constructor(l){var a,c,E;const C=!!(l.data.hasPopup||((a=l.data.titleObj)==null?void 0:a.str)||((c=l.data.contentsObj)==null?void 0:c.str)||((E=l.data.richText)==null?void 0:E.str));super(l,{isRenderable:C,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class dt extends k{constructor(l){var a,c,E;const C=!!(l.data.hasPopup||((a=l.data.titleObj)==null?void 0:a.str)||((c=l.data.contentsObj)==null?void 0:c.str)||((E=l.data.richText)==null?void 0:E.str));super(l,{isRenderable:C,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ft extends k{constructor(l){var c;super(l,{isRenderable:!0});const{filename:C,content:a}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(C),this.content=a,(c=this.linkService.eventBus)==null||c.dispatch("fileattachmentannotation",{source:this,filename:C,content:a})}render(){var C,a;this.container.className="fileAttachmentAnnotation";const l=document.createElement("div");return l.className="popupTriggerArea",l.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((C=this.data.titleObj)==null?void 0:C.str)||((a=this.data.contentsObj)==null?void 0:a.str)||this.data.richText)&&this._createPopup(l,this.data),this.container.append(l),this.container}_download(){var l;(l=this.downloadManager)==null||l.openOrDownloadData(this.container,this.content,this.filename)}}const st=class{static render(l){var V,rt;const{annotations:C,div:a,viewport:c,accessibilityManager:E}=l;mt(this,N,Ee).call(this,a,c);let F=0;for(const X of C){if(X.annotationType!==n.AnnotationType.POPUP){const{width:$,height:K}=M(X.rect);if($<=0||K<=0)continue}const Q=P.create({data:X,layer:a,page:l.page,viewport:c,linkService:l.linkService,downloadManager:l.downloadManager,imageResourcesPath:l.imageResourcesPath||"",renderForms:l.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:l.annotationStorage||new h.AnnotationStorage,enableScripting:l.enableScripting,hasJSActions:l.hasJSActions,fieldObjects:l.fieldObjects,mouseState:l.mouseState||{isDown:!1}});if(Q.isRenderable){const $=Q.render();if(X.hidden&&($.style.visibility="hidden"),Array.isArray($))for(const K of $)K.style.zIndex=F++,mt(V=st,S,Se).call(V,K,X.id,a,E);else $.style.zIndex=F++,Q instanceof O?a.prepend($):mt(rt=st,S,Se).call(rt,$,X.id,a,E)}}mt(this,W,Ce).call(this,a,l.annotationCanvasMap)}static update(l){const{annotationCanvasMap:C,div:a,viewport:c}=l;mt(this,N,Ee).call(this,a,c),mt(this,W,Ce).call(this,a,C),a.hidden=!1}};let H=st;S=new WeakSet,Se=function(l,C,a,c){const E=l.firstChild||l;E.id=`${i.AnnotationPrefix}${C}`,a.append(l),c==null||c.moveElementInDOM(a,l,E,!1)},N=new WeakSet,Ee=function(l,{width:C,height:a,rotation:c}){const{style:E}=l,F=c%180!==0,V=Math.floor(C)+"px",rt=Math.floor(a)+"px";E.width=F?rt:V,E.height=F?V:rt,l.setAttribute("data-main-rotation",c)},W=new WeakSet,Ce=function(l,C){if(!!C){for(const[a,c]of C){const E=l.querySelector(`[data-annotation-id="${a}"]`);if(!E)continue;const{firstChild:F}=E;F?F.nodeName==="CANVAS"?F.replaceWith(c):F.before(c):E.append(c)}C.clear()}},pt(H,S),pt(H,N),pt(H,W),e.AnnotationLayer=H},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function s(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}class n{static CMYK_G([h,b,R,T]){return["G",1-Math.min(1,.3*h+.59*R+.11*b+T)]}static G_CMYK([h]){return["CMYK",0,0,0,1-h]}static G_RGB([h]){return["RGB",h,h,h]}static G_HTML([h]){const b=s(h);return`#${b}${b}${b}`}static RGB_G([h,b,R]){return["G",.3*h+.59*b+.11*R]}static RGB_HTML([h,b,R]){const T=s(h),g=s(b),x=s(R);return`#${T}${g}${x}`}static T_HTML(){return"#00000000"}static CMYK_RGB([h,b,R,T]){return["RGB",1-Math.min(1,h+T),1-Math.min(1,R+T),1-Math.min(1,b+T)]}static CMYK_HTML(h){const b=this.CMYK_RGB(h).slice(1);return this.RGB_HTML(b)}static RGB_CMYK([h,b,R]){const T=1-h,g=1-b,x=1-R,M=Math.min(T,g,x);return["CMYK",T,g,x,M]}}e.ColorConverters=n},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var n=s(20);class i{static setupStorage(b,R,T,g,x){const M=g.getValue(R,{value:null});switch(T.name){case"textarea":if(M.value!==null&&(b.textContent=M.value),x==="print")break;b.addEventListener("input",P=>{g.setValue(R,{value:P.target.value})});break;case"input":if(T.attributes.type==="radio"||T.attributes.type==="checkbox"){if(M.value===T.attributes.xfaOn?b.setAttribute("checked",!0):M.value===T.attributes.xfaOff&&b.removeAttribute("checked"),x==="print")break;b.addEventListener("change",P=>{g.setValue(R,{value:P.target.checked?P.target.getAttribute("xfaOn"):P.target.getAttribute("xfaOff")})})}else{if(M.value!==null&&b.setAttribute("value",M.value),x==="print")break;b.addEventListener("input",P=>{g.setValue(R,{value:P.target.value})})}break;case"select":if(M.value!==null)for(const P of T.children)P.attributes.value===M.value&&(P.attributes.selected=!0);b.addEventListener("input",P=>{const k=P.target.options,m=k.selectedIndex===-1?"":k[k.selectedIndex].value;g.setValue(R,{value:m})});break}}static setAttributes({html:b,element:R,storage:T=null,intent:g,linkService:x}){const{attributes:M}=R,P=b instanceof HTMLAnchorElement;M.type==="radio"&&(M.name=`${M.name}-${g}`);for(const[k,m]of Object.entries(M))if(m!=null)switch(k){case"class":m.length&&b.setAttribute(k,m.join(" "));break;case"dataId":break;case"id":b.setAttribute("data-element-id",m);break;case"style":Object.assign(b.style,m);break;case"textContent":b.textContent=m;break;default:(!P||k!=="href"&&k!=="newWindow")&&b.setAttribute(k,m)}P&&x.addLinkAttributes(b,M.href,M.newWindow),T&&M.dataId&&this.setupStorage(b,M.dataId,R,T)}static render(b){var r;const R=b.annotationStorage,T=b.linkService,g=b.xfaHtml,x=b.intent||"display",M=document.createElement(g.name);g.attributes&&this.setAttributes({html:M,element:g,intent:x,linkService:T});const P=[[g,-1,M]],k=b.div;if(k.append(M),b.viewport){const o=`matrix(${b.viewport.transform.join(",")})`;k.style.transform=o}x!=="richText"&&k.setAttribute("class","xfaLayer xfaFont");const m=[];for(;P.length>0;){const[o,u,w]=P.at(-1);if(u+1===o.children.length){P.pop();continue}const A=o.children[++P.at(-1)[1]];if(A===null)continue;const{name:f}=A;if(f==="#text"){const O=document.createTextNode(A.value);m.push(O),w.append(O);continue}let D;if((r=A==null?void 0:A.attributes)!=null&&r.xmlns?D=document.createElementNS(A.attributes.xmlns,f):D=document.createElement(f),w.append(D),A.attributes&&this.setAttributes({html:D,element:A,storage:R,intent:x,linkService:T}),A.children&&A.children.length>0)P.push([A,-1,D]);else if(A.value){const O=document.createTextNode(A.value);n.XfaText.shouldBuildText(f)&&m.push(O),D.append(O)}}for(const o of k.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))o.setAttribute("readOnly",!0);return{textDivs:m}}static update(b){const R=`matrix(${b.viewport.transform.join(",")})`;b.div.style.transform=R,b.div.hidden=!1}}e.XfaLayer=i},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=w;var n=s(1),i=s(8);const h=1e5,b=30,R=.8,T=new Map,g=/^\s+$/g;function x(A,f){const D=T.get(A);if(D)return D;f.save(),f.font=`${b}px ${A}`;const O=f.measureText("");let U=O.fontBoundingBoxAscent,d=Math.abs(O.fontBoundingBoxDescent);if(U){f.restore();const _=U/(U+d);return T.set(A,_),_}f.strokeStyle="red",f.clearRect(0,0,b,b),f.strokeText("g",0,0);let v=f.getImageData(0,0,b,b).data;d=0;for(let _=v.length-1-3;_>=0;_-=4)if(v[_]>0){d=Math.ceil(_/4/b);break}f.clearRect(0,0,b,b),f.strokeText("A",0,b),v=f.getImageData(0,0,b,b).data,U=0;for(let _=0,I=v.length;_<I;_+=4)if(v[_]>0){U=b-Math.floor(_/4/b);break}if(f.restore(),U){const _=U/(U+d);return T.set(A,_),_}return T.set(A,R),R}function M(A,f,D,O){const U=document.createElement("span"),d=A._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:f.str!=="",hasEOL:f.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:f.str!=="",hasEOL:f.hasEOL,fontSize:0};A._textDivs.push(U);const v=n.Util.transform(A._viewport.transform,f.transform);let _=Math.atan2(v[1],v[0]);const I=D[f.fontName];I.vertical&&(_+=Math.PI/2);const j=Math.hypot(v[2],v[3]),it=j*x(I.fontFamily,O);let Y,ot;_===0?(Y=v[4],ot=v[5]-it):(Y=v[4]+it*Math.sin(_),ot=v[5]-it*Math.cos(_)),U.style.left=`${Y}px`,U.style.top=`${ot}px`,U.style.fontSize=`${j}px`,U.style.fontFamily=I.fontFamily,d.fontSize=j,U.setAttribute("role","presentation"),U.textContent=f.str,U.dir=f.dir,A._fontInspectorEnabled&&(U.dataset.fontName=f.fontName),_!==0&&(d.angle=_*(180/Math.PI));let et=!1;if(f.str.length>1||A._enhanceTextSelection&&g.test(f.str))et=!0;else if(f.str!==" "&&f.transform[0]!==f.transform[3]){const G=Math.abs(f.transform[0]),nt=Math.abs(f.transform[3]);G!==nt&&Math.max(G,nt)/Math.min(G,nt)>1.5&&(et=!0)}if(et&&(I.vertical?d.canvasWidth=f.height*A._viewport.scale:d.canvasWidth=f.width*A._viewport.scale),A._textDivProperties.set(U,d),A._textContentStream&&A._layoutText(U),A._enhanceTextSelection&&d.hasText){let G=1,nt=0;_!==0&&(G=Math.cos(_),nt=Math.sin(_));const ct=(I.vertical?f.height:f.width)*A._viewport.scale,dt=j;let ft,H;_!==0?(ft=[G,nt,-nt,G,Y,ot],H=n.Util.getAxialAlignedBoundingBox([0,0,ct,dt],ft)):H=[Y,ot,Y+ct,ot+dt],A._bounds.push({left:H[0],top:H[1],right:H[2],bottom:H[3],div:U,size:[ct,dt],m:ft})}}function P(A){if(A._canceled)return;const f=A._textDivs,D=A._capability,O=f.length;if(O>h){A._renderingDone=!0,D.resolve();return}if(!A._textContentStream)for(let U=0;U<O;U++)A._layoutText(f[U]);A._renderingDone=!0,D.resolve()}function k(A,f,D){let O=0;for(let U=0;U<D;U++){const d=A[f++];d>0&&(O=O?Math.min(d,O):d)}return O}function m(A){const f=A._bounds,D=A._viewport,O=r(D.width,D.height,f);for(let U=0;U<O.length;U++){const d=f[U].div,v=A._textDivProperties.get(d);if(v.angle===0){v.paddingLeft=f[U].left-O[U].left,v.paddingTop=f[U].top-O[U].top,v.paddingRight=O[U].right-f[U].right,v.paddingBottom=O[U].bottom-f[U].bottom,A._textDivProperties.set(d,v);continue}const _=O[U],I=f[U],j=I.m,it=j[0],Y=j[1],ot=[[0,0],[0,I.size[1]],[I.size[0],0],I.size],et=new Float64Array(64);for(let nt=0,ct=ot.length;nt<ct;nt++){const dt=n.Util.applyTransform(ot[nt],j);et[nt+0]=it&&(_.left-dt[0])/it,et[nt+4]=Y&&(_.top-dt[1])/Y,et[nt+8]=it&&(_.right-dt[0])/it,et[nt+12]=Y&&(_.bottom-dt[1])/Y,et[nt+16]=Y&&(_.left-dt[0])/-Y,et[nt+20]=it&&(_.top-dt[1])/it,et[nt+24]=Y&&(_.right-dt[0])/-Y,et[nt+28]=it&&(_.bottom-dt[1])/it,et[nt+32]=it&&(_.left-dt[0])/-it,et[nt+36]=Y&&(_.top-dt[1])/-Y,et[nt+40]=it&&(_.right-dt[0])/-it,et[nt+44]=Y&&(_.bottom-dt[1])/-Y,et[nt+48]=Y&&(_.left-dt[0])/Y,et[nt+52]=it&&(_.top-dt[1])/-it,et[nt+56]=Y&&(_.right-dt[0])/Y,et[nt+60]=it&&(_.bottom-dt[1])/-it}const G=1+Math.min(Math.abs(it),Math.abs(Y));v.paddingLeft=k(et,32,16)/G,v.paddingTop=k(et,48,16)/G,v.paddingRight=k(et,0,16)/G,v.paddingBottom=k(et,16,16)/G,A._textDivProperties.set(d,v)}}function r(A,f,D){const O=D.map(function(d,v){return{x1:d.left,y1:d.top,x2:d.right,y2:d.bottom,index:v,x1New:void 0,x2New:void 0}});o(A,O);const U=new Array(D.length);for(const d of O){const v=d.index;U[v]={left:d.x1New,top:0,right:d.x2New,bottom:0}}D.map(function(d,v){const _=U[v],I=O[v];I.x1=d.top,I.y1=A-_.right,I.x2=d.bottom,I.y2=A-_.left,I.index=v,I.x1New=void 0,I.x2New=void 0}),o(f,O);for(const d of O){const v=d.index;U[v].top=d.x1New,U[v].bottom=d.x2New}return U}function o(A,f){f.sort(function(U,d){return U.x1-d.x1||U.index-d.index});const O=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const U of f){let d=0;for(;d<O.length&&O[d].end<=U.y1;)d++;let v=O.length-1;for(;v>=0&&O[v].start>=U.y2;)v--;let _,I,j,it,Y=-1/0;for(j=d;j<=v;j++){_=O[j],I=_.boundary;let G;I.x2>U.x1?G=I.index>U.index?I.x1New:U.x1:I.x2New===void 0?G=(I.x2+U.x1)/2:G=I.x2New,G>Y&&(Y=G)}for(U.x1New=Y,j=d;j<=v;j++)_=O[j],I=_.boundary,I.x2New===void 0?I.x2>U.x1?I.index>U.index&&(I.x2New=I.x2):I.x2New=Y:I.x2New>Y&&(I.x2New=Math.max(Y,I.x2));const ot=[];let et=null;for(j=d;j<=v;j++){_=O[j],I=_.boundary;const G=I.x2>U.x2?I:U;et===G?ot.at(-1).end=_.end:(ot.push({start:_.start,end:_.end,boundary:G}),et=G)}for(O[d].start<U.y1&&(ot[0].start=U.y1,ot.unshift({start:O[d].start,end:U.y1,boundary:O[d].boundary})),U.y2<O[v].end&&(ot.at(-1).end=U.y2,ot.push({start:U.y2,end:O[v].end,boundary:O[v].boundary})),j=d;j<=v;j++){if(_=O[j],I=_.boundary,I.x2New!==void 0)continue;let G=!1;for(it=d-1;!G&&it>=0&&O[it].start>=I.y1;it--)G=O[it].boundary===I;for(it=v+1;!G&&it<O.length&&O[it].end<=I.y2;it++)G=O[it].boundary===I;for(it=0;!G&&it<ot.length;it++)G=ot[it].boundary===I;G||(I.x2New=Y)}Array.prototype.splice.apply(O,[d,v-d+1,...ot])}for(const U of O){const d=U.boundary;d.x2New===void 0&&(d.x2New=Math.max(A,d.x2))}}class u{constructor({textContent:f,textContentStream:D,container:O,viewport:U,textDivs:d,textContentItemsStr:v,enhanceTextSelection:_}){var I;_&&(0,i.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=f,this._textContentStream=D,this._container=O,this._document=O.ownerDocument,this._viewport=U,this._textDivs=d||[],this._textContentItemsStr=v||[],this._enhanceTextSelection=!!_,this._fontInspectorEnabled=!!((I=globalThis.FontInspector)!=null&&I.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,n.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(f,D){for(let O=0,U=f.length;O<U;O++){if(f[O].str===void 0){if(f[O].type==="beginMarkedContentProps"||f[O].type==="beginMarkedContent"){const d=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),f[O].id!==null&&this._container.setAttribute("id",`${f[O].id}`),d.append(this._container)}else f[O].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(f[O].str),M(this,f[O],D,this._layoutTextCtx)}}_layoutText(f){const D=this._textDivProperties.get(f);let O="";if(D.canvasWidth!==0&&D.hasText){const{fontFamily:U}=f.style,{fontSize:d}=D;(d!==this._layoutTextLastFontSize||U!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${d*this._devicePixelRatio}px ${U}`,this._layoutTextLastFontSize=d,this._layoutTextLastFontFamily=U);const{width:v}=this._layoutTextCtx.measureText(f.textContent);if(v>0){const _=this._devicePixelRatio*D.canvasWidth/v;this._enhanceTextSelection&&(D.scale=_),O=`scaleX(${_})`}}if(D.angle!==0&&(O=`rotate(${D.angle}deg) ${O}`),O.length>0&&(this._enhanceTextSelection&&(D.originalTransform=O),f.style.transform=O),D.hasText&&this._container.append(f),D.hasEOL){const U=document.createElement("br");U.setAttribute("role","presentation"),this._container.append(U)}}_render(f=0){const D=(0,n.createPromiseCapability)();let O=Object.create(null);const U=this._document.createElement("canvas");if(U.height=U.width=b,this._layoutTextCtx=U.getContext("2d",{alpha:!1}),this._textContent){const d=this._textContent.items,v=this._textContent.styles;this._processItems(d,v),D.resolve()}else if(this._textContentStream){const d=()=>{this._reader.read().then(({value:v,done:_})=>{if(_){D.resolve();return}Object.assign(O,v.styles),this._processItems(v.items,O),d()},D.reject)};this._reader=this._textContentStream.getReader(),d()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');D.promise.then(()=>{O=null,f?this._renderTimer=setTimeout(()=>{P(this),this._renderTimer=null},f):P(this)},this._capability.reject)}expandTextDivs(f=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(m(this),this._bounds=null);const D=[],O=[];for(let U=0,d=this._textDivs.length;U<d;U++){const v=this._textDivs[U],_=this._textDivProperties.get(v);!_.hasText||(f?(D.length=0,O.length=0,_.originalTransform&&D.push(_.originalTransform),_.paddingTop>0?(O.push(`${_.paddingTop}px`),D.push(`translateY(${-_.paddingTop}px)`)):O.push(0),_.paddingRight>0?O.push(`${_.paddingRight/_.scale}px`):O.push(0),_.paddingBottom>0?O.push(`${_.paddingBottom}px`):O.push(0),_.paddingLeft>0?(O.push(`${_.paddingLeft/_.scale}px`),D.push(`translateX(${-_.paddingLeft/_.scale}px)`)):O.push(0),v.style.padding=O.join(" "),D.length&&(v.style.transform=D.join(" "))):(v.style.padding=null,v.style.transform=_.originalTransform))}}}e.TextLayerRenderTask=u;function w(A){const f=new u({textContent:A.textContent,textContentStream:A.textContentStream,container:A.container,viewport:A.viewport,textDivs:A.textDivs,textContentItemsStr:A.textContentItemsStr,enhanceTextSelection:A.enhanceTextSelection});return f._render(A.timeout),f}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var n=s(8),i=s(1),h=s(3);let b=class{constructor(){(0,i.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=b;{let w=function(d){let v=[];const _=[];for(const I of d){if(I.fn==="save"){v.push({fnId:92,fn:"group",items:[]}),_.push(v),v=v.at(-1).items;continue}I.fn==="restore"?v=_.pop():v.push(I)}return v},A=function(d){if(Number.isInteger(d))return d.toString();const v=d.toFixed(10);let _=v.length-1;if(v[_]!=="0")return v;do _--;while(v[_]==="0");return v.substring(0,v[_]==="."?_:_+1)},f=function(d){if(d[4]===0&&d[5]===0){if(d[1]===0&&d[2]===0)return d[0]===1&&d[3]===1?"":`scale(${A(d[0])} ${A(d[3])})`;if(d[0]===d[3]&&d[1]===-d[2]){const v=Math.acos(d[0])*180/Math.PI;return`rotate(${A(v)})`}}else if(d[0]===1&&d[1]===0&&d[2]===0&&d[3]===1)return`translate(${A(d[4])} ${A(d[5])})`;return`matrix(${A(d[0])} ${A(d[1])} ${A(d[2])} ${A(d[3])} ${A(d[4])} ${A(d[5])})`};var g=w,R=A,T=f;const x={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},M="http://www.w3.org/XML/1998/namespace",P="http://www.w3.org/1999/xlink",k=["butt","round","square"],m=["miter","round","bevel"],r=function(d,v="",_=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!_)return URL.createObjectURL(new Blob([d],{type:v}));const I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let j=`data:${v};base64,`;for(let it=0,Y=d.length;it<Y;it+=3){const ot=d[it]&255,et=d[it+1]&255,G=d[it+2]&255,nt=ot>>2,ct=(ot&3)<<4|et>>4,dt=it+1<Y?(et&15)<<2|G>>6:64,ft=it+2<Y?G&63:64;j+=I[nt]+I[ct]+I[dt]+I[ft]}return j},o=function(){const d=new Uint8Array([137,80,78,71,13,10,26,10]),v=12,_=new Int32Array(256);for(let G=0;G<256;G++){let nt=G;for(let ct=0;ct<8;ct++)nt&1?nt=3988292384^nt>>1&2147483647:nt=nt>>1&2147483647;_[G]=nt}function I(G,nt,ct){let dt=-1;for(let ft=nt;ft<ct;ft++){const H=(dt^G[ft])&255,S=_[H];dt=dt>>>8^S}return dt^-1}function j(G,nt,ct,dt){let ft=dt;const H=nt.length;ct[ft]=H>>24&255,ct[ft+1]=H>>16&255,ct[ft+2]=H>>8&255,ct[ft+3]=H&255,ft+=4,ct[ft]=G.charCodeAt(0)&255,ct[ft+1]=G.charCodeAt(1)&255,ct[ft+2]=G.charCodeAt(2)&255,ct[ft+3]=G.charCodeAt(3)&255,ft+=4,ct.set(nt,ft),ft+=nt.length;const S=I(ct,dt+4,ft);ct[ft]=S>>24&255,ct[ft+1]=S>>16&255,ct[ft+2]=S>>8&255,ct[ft+3]=S&255}function it(G,nt,ct){let dt=1,ft=0;for(let H=nt;H<ct;++H)dt=(dt+(G[H]&255))%65521,ft=(ft+dt)%65521;return ft<<16|dt}function Y(G){if(!h.isNodeJS)return ot(G);try{let nt;parseInt(process.versions.node)>=8?nt=G:nt=Buffer.from(G);const ct=require$$5.deflateSync(nt,{level:9});return ct instanceof Uint8Array?ct:new Uint8Array(ct)}catch(nt){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+nt)}return ot(G)}function ot(G){let nt=G.length;const ct=65535,dt=Math.ceil(nt/ct),ft=new Uint8Array(2+nt+dt*5+4);let H=0;ft[H++]=120,ft[H++]=156;let S=0;for(;nt>ct;)ft[H++]=0,ft[H++]=255,ft[H++]=255,ft[H++]=0,ft[H++]=0,ft.set(G.subarray(S,S+ct),H),H+=ct,S+=ct,nt-=ct;ft[H++]=1,ft[H++]=nt&255,ft[H++]=nt>>8&255,ft[H++]=~nt&65535&255,ft[H++]=(~nt&65535)>>8&255,ft.set(G.subarray(S),H),H+=G.length-S;const y=it(G,0,G.length);return ft[H++]=y>>24&255,ft[H++]=y>>16&255,ft[H++]=y>>8&255,ft[H++]=y&255,ft}function et(G,nt,ct,dt){const ft=G.width,H=G.height;let S,y,N;const q=G.data;switch(nt){case i.ImageKind.GRAYSCALE_1BPP:y=0,S=1,N=ft+7>>3;break;case i.ImageKind.RGB_24BPP:y=2,S=8,N=ft*3;break;case i.ImageKind.RGBA_32BPP:y=6,S=8,N=ft*4;break;default:throw new Error("invalid format")}const W=new Uint8Array((1+N)*H);let z=0,st=0;for(let E=0;E<H;++E)W[z++]=0,W.set(q.subarray(st,st+N),z),st+=N,z+=N;if(nt===i.ImageKind.GRAYSCALE_1BPP&&dt){z=0;for(let E=0;E<H;E++){z++;for(let F=0;F<N;F++)W[z++]^=255}}const tt=new Uint8Array([ft>>24&255,ft>>16&255,ft>>8&255,ft&255,H>>24&255,H>>16&255,H>>8&255,H&255,S,y,0,0,0]),l=Y(W),C=d.length+v*3+tt.length+l.length,a=new Uint8Array(C);let c=0;return a.set(d,c),c+=d.length,j("IHDR",tt,a,c),c+=v+tt.length,j("IDATA",l,a,c),c+=v+l.length,j("IEND",new Uint8Array(0),a,c),r(a,"image/png",ct)}return function(nt,ct,dt){const ft=nt.kind===void 0?i.ImageKind.GRAYSCALE_1BPP:nt.kind;return et(nt,ft,ct,dt)}}();class u{constructor(){this.fontSizeScale=1,this.fontWeight=x.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=x.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(v,_){this.x=v,this.y=_}}let D=0,O=0,U=0;e.SVGGraphics=b=class{constructor(d,v,_=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new u,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=d,this.objs=v,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!_,this._operatorIdMapping=[];for(const I in i.OPS)this._operatorIdMapping[i.OPS[I]]=I}save(){this.transformStack.push(this.transformMatrix);const d=this.current;this.extraStack.push(d),this.current=d.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(d){this.save(),this.executeOpTree(d),this.restore()}loadDependencies(d){const v=d.fnArray,_=d.argsArray;for(let I=0,j=v.length;I<j;I++)if(v[I]===i.OPS.dependency)for(const it of _[I]){const Y=it.startsWith("g_")?this.commonObjs:this.objs,ot=new Promise(et=>{Y.get(it,et)});this.current.dependencies.push(ot)}return Promise.all(this.current.dependencies)}transform(d,v,_,I,j,it){const Y=[d,v,_,I,j,it];this.transformMatrix=i.Util.transform(this.transformMatrix,Y),this.tgrp=null}getSVG(d,v){this.viewport=v;const _=this._initialize(v);return this.loadDependencies(d).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(d)),_))}convertOpList(d){const v=this._operatorIdMapping,_=d.argsArray,I=d.fnArray,j=[];for(let it=0,Y=I.length;it<Y;it++){const ot=I[it];j.push({fnId:ot,fn:v[ot],args:_[it]})}return w(j)}executeOpTree(d){for(const v of d){const _=v.fn,I=v.fnId,j=v.args;switch(I|0){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(j);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(j[0],j[1]);break;case i.OPS.setFont:this.setFont(j);break;case i.OPS.showText:this.showText(j[0]);break;case i.OPS.showSpacedText:this.showText(j[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(j[0],j[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(j[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(j[0]);break;case i.OPS.setHScale:this.setHScale(j[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(j[0],j[1],j[2],j[3],j[4],j[5]);break;case i.OPS.setTextRise:this.setTextRise(j[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(j[0]);break;case i.OPS.setLineWidth:this.setLineWidth(j[0]);break;case i.OPS.setLineJoin:this.setLineJoin(j[0]);break;case i.OPS.setLineCap:this.setLineCap(j[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(j[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(j[0],j[1],j[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(j[0],j[1],j[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(j);break;case i.OPS.setFillColorN:this.setFillColorN(j);break;case i.OPS.shadingFill:this.shadingFill(j[0]);break;case i.OPS.setDash:this.setDash(j[0],j[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(j[0]);break;case i.OPS.setFlatness:this.setFlatness(j[0]);break;case i.OPS.setGState:this.setGState(j[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(j[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(j[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(j[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(j[0],j[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(j[0],j[1],j[2],j[3],j[4],j[5]);break;case i.OPS.constructPath:this.constructPath(j[0],j[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(v.items);break;default:(0,i.warn)(`Unimplemented operator ${_}`);break}}}setWordSpacing(d){this.current.wordSpacing=d}setCharSpacing(d){this.current.charSpacing=d}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(d,v,_,I,j,it){const Y=this.current;Y.textMatrix=Y.lineMatrix=[d,v,_,I,j,it],Y.textMatrixScale=Math.hypot(d,v),Y.x=Y.lineX=0,Y.y=Y.lineY=0,Y.xcoords=[],Y.ycoords=[],Y.tspan=this.svgFactory.createElement("svg:tspan"),Y.tspan.setAttributeNS(null,"font-family",Y.fontFamily),Y.tspan.setAttributeNS(null,"font-size",`${A(Y.fontSize)}px`),Y.tspan.setAttributeNS(null,"y",A(-Y.y)),Y.txtElement=this.svgFactory.createElement("svg:text"),Y.txtElement.append(Y.tspan)}beginText(){const d=this.current;d.x=d.lineX=0,d.y=d.lineY=0,d.textMatrix=i.IDENTITY_MATRIX,d.lineMatrix=i.IDENTITY_MATRIX,d.textMatrixScale=1,d.tspan=this.svgFactory.createElement("svg:tspan"),d.txtElement=this.svgFactory.createElement("svg:text"),d.txtgrp=this.svgFactory.createElement("svg:g"),d.xcoords=[],d.ycoords=[]}moveText(d,v){const _=this.current;_.x=_.lineX+=d,_.y=_.lineY+=v,_.xcoords=[],_.ycoords=[],_.tspan=this.svgFactory.createElement("svg:tspan"),_.tspan.setAttributeNS(null,"font-family",_.fontFamily),_.tspan.setAttributeNS(null,"font-size",`${A(_.fontSize)}px`),_.tspan.setAttributeNS(null,"y",A(-_.y))}showText(d){const v=this.current,_=v.font,I=v.fontSize;if(I===0)return;const j=v.fontSizeScale,it=v.charSpacing,Y=v.wordSpacing,ot=v.fontDirection,et=v.textHScale*ot,G=_.vertical,nt=G?1:-1,ct=_.defaultVMetrics,dt=I*v.fontMatrix[0];let ft=0;for(const y of d){if(y===null){ft+=ot*Y;continue}else if(typeof y=="number"){ft+=nt*y*I/1e3;continue}const N=(y.isSpace?Y:0)+it,q=y.fontChar;let W,z,st=y.width;if(G){let l;const C=y.vmetric||ct;l=y.vmetric?C[1]:st*.5,l=-l*dt;const a=C[2]*dt;st=C?-C[0]:st,W=l/j,z=(ft+a)/j}else W=ft/j,z=0;(y.isInFont||_.missingFile)&&(v.xcoords.push(v.x+W),G&&v.ycoords.push(-v.y+z),v.tspan.textContent+=q);let tt;G?tt=st*dt-N*ot:tt=st*dt+N*ot,ft+=tt}v.tspan.setAttributeNS(null,"x",v.xcoords.map(A).join(" ")),G?v.tspan.setAttributeNS(null,"y",v.ycoords.map(A).join(" ")):v.tspan.setAttributeNS(null,"y",A(-v.y)),G?v.y-=ft:v.x+=ft*et,v.tspan.setAttributeNS(null,"font-family",v.fontFamily),v.tspan.setAttributeNS(null,"font-size",`${A(v.fontSize)}px`),v.fontStyle!==x.fontStyle&&v.tspan.setAttributeNS(null,"font-style",v.fontStyle),v.fontWeight!==x.fontWeight&&v.tspan.setAttributeNS(null,"font-weight",v.fontWeight);const H=v.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(H===i.TextRenderingMode.FILL||H===i.TextRenderingMode.FILL_STROKE?(v.fillColor!==x.fillColor&&v.tspan.setAttributeNS(null,"fill",v.fillColor),v.fillAlpha<1&&v.tspan.setAttributeNS(null,"fill-opacity",v.fillAlpha)):v.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?v.tspan.setAttributeNS(null,"fill","transparent"):v.tspan.setAttributeNS(null,"fill","none"),H===i.TextRenderingMode.STROKE||H===i.TextRenderingMode.FILL_STROKE){const y=1/(v.textMatrixScale||1);this._setStrokeAttributes(v.tspan,y)}let S=v.textMatrix;v.textRise!==0&&(S=S.slice(),S[5]+=v.textRise),v.txtElement.setAttributeNS(null,"transform",`${f(S)} scale(${A(et)}, -1)`),v.txtElement.setAttributeNS(M,"xml:space","preserve"),v.txtElement.append(v.tspan),v.txtgrp.append(v.txtElement),this._ensureTransformGroup().append(v.txtElement)}setLeadingMoveText(d,v){this.setLeading(-v),this.moveText(d,v)}addFontStyle(d){if(!d.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const v=r(d.data,d.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${d.loadedName}"; src: url(${v}); }
`}setFont(d){const v=this.current,_=this.commonObjs.get(d[0]);let I=d[1];v.font=_,this.embedFonts&&!_.missingFile&&!this.embeddedFonts[_.loadedName]&&(this.addFontStyle(_),this.embeddedFonts[_.loadedName]=_),v.fontMatrix=_.fontMatrix||i.FONT_IDENTITY_MATRIX;let j="normal";_.black?j="900":_.bold&&(j="bold");const it=_.italic?"italic":"normal";I<0?(I=-I,v.fontDirection=-1):v.fontDirection=1,v.fontSize=I,v.fontFamily=_.loadedName,v.fontWeight=j,v.fontStyle=it,v.tspan=this.svgFactory.createElement("svg:tspan"),v.tspan.setAttributeNS(null,"y",A(-v.y)),v.xcoords=[],v.ycoords=[]}endText(){var v;const d=this.current;d.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&((v=d.txtElement)==null?void 0:v.hasChildNodes())&&(d.element=d.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(d){d>0&&(this.current.lineWidth=d)}setLineCap(d){this.current.lineCap=k[d]}setLineJoin(d){this.current.lineJoin=m[d]}setMiterLimit(d){this.current.miterLimit=d}setStrokeAlpha(d){this.current.strokeAlpha=d}setStrokeRGBColor(d,v,_){this.current.strokeColor=i.Util.makeHexColor(d,v,_)}setFillAlpha(d){this.current.fillAlpha=d}setFillRGBColor(d,v,_){this.current.fillColor=i.Util.makeHexColor(d,v,_),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(d){this.current.strokeColor=this._makeColorN_Pattern(d)}setFillColorN(d){this.current.fillColor=this._makeColorN_Pattern(d)}shadingFill(d){const v=this.viewport.width,_=this.viewport.height,I=i.Util.inverseTransform(this.transformMatrix),j=i.Util.applyTransform([0,0],I),it=i.Util.applyTransform([0,_],I),Y=i.Util.applyTransform([v,0],I),ot=i.Util.applyTransform([v,_],I),et=Math.min(j[0],it[0],Y[0],ot[0]),G=Math.min(j[1],it[1],Y[1],ot[1]),nt=Math.max(j[0],it[0],Y[0],ot[0]),ct=Math.max(j[1],it[1],Y[1],ot[1]),dt=this.svgFactory.createElement("svg:rect");dt.setAttributeNS(null,"x",et),dt.setAttributeNS(null,"y",G),dt.setAttributeNS(null,"width",nt-et),dt.setAttributeNS(null,"height",ct-G),dt.setAttributeNS(null,"fill",this._makeShadingPattern(d)),this.current.fillAlpha<1&&dt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(dt)}_makeColorN_Pattern(d){return d[0]==="TilingPattern"?this._makeTilingPattern(d):this._makeShadingPattern(d)}_makeTilingPattern(d){const v=d[1],_=d[2],I=d[3]||i.IDENTITY_MATRIX,[j,it,Y,ot]=d[4],et=d[5],G=d[6],nt=d[7],ct=`shading${U++}`,[dt,ft,H,S]=i.Util.normalizeRect([...i.Util.applyTransform([j,it],I),...i.Util.applyTransform([Y,ot],I)]),[y,N]=i.Util.singularValueDecompose2dScale(I),q=et*y,W=G*N,z=this.svgFactory.createElement("svg:pattern");z.setAttributeNS(null,"id",ct),z.setAttributeNS(null,"patternUnits","userSpaceOnUse"),z.setAttributeNS(null,"width",q),z.setAttributeNS(null,"height",W),z.setAttributeNS(null,"x",`${dt}`),z.setAttributeNS(null,"y",`${ft}`);const st=this.svg,tt=this.transformMatrix,l=this.current.fillColor,C=this.current.strokeColor,a=this.svgFactory.create(H-dt,S-ft);if(this.svg=a,this.transformMatrix=I,nt===2){const c=i.Util.makeHexColor(...v);this.current.fillColor=c,this.current.strokeColor=c}return this.executeOpTree(this.convertOpList(_)),this.svg=st,this.transformMatrix=tt,this.current.fillColor=l,this.current.strokeColor=C,z.append(a.childNodes[0]),this.defs.append(z),`url(#${ct})`}_makeShadingPattern(d){switch(typeof d=="string"&&(d=this.objs.get(d)),d[0]){case"RadialAxial":const v=`shading${U++}`,_=d[3];let I;switch(d[1]){case"axial":const j=d[4],it=d[5];I=this.svgFactory.createElement("svg:linearGradient"),I.setAttributeNS(null,"id",v),I.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),I.setAttributeNS(null,"x1",j[0]),I.setAttributeNS(null,"y1",j[1]),I.setAttributeNS(null,"x2",it[0]),I.setAttributeNS(null,"y2",it[1]);break;case"radial":const Y=d[4],ot=d[5],et=d[6],G=d[7];I=this.svgFactory.createElement("svg:radialGradient"),I.setAttributeNS(null,"id",v),I.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),I.setAttributeNS(null,"cx",ot[0]),I.setAttributeNS(null,"cy",ot[1]),I.setAttributeNS(null,"r",G),I.setAttributeNS(null,"fx",Y[0]),I.setAttributeNS(null,"fy",Y[1]),I.setAttributeNS(null,"fr",et);break;default:throw new Error(`Unknown RadialAxial type: ${d[1]}`)}for(const j of _){const it=this.svgFactory.createElement("svg:stop");it.setAttributeNS(null,"offset",j[0]),it.setAttributeNS(null,"stop-color",j[1]),I.append(it)}return this.defs.append(I),`url(#${v})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${d[0]}`)}}setDash(d,v){this.current.dashArray=d,this.current.dashPhase=v}constructPath(d,v){const _=this.current;let I=_.x,j=_.y,it=[],Y=0;for(const ot of d)switch(ot|0){case i.OPS.rectangle:I=v[Y++],j=v[Y++];const et=v[Y++],G=v[Y++],nt=I+et,ct=j+G;it.push("M",A(I),A(j),"L",A(nt),A(j),"L",A(nt),A(ct),"L",A(I),A(ct),"Z");break;case i.OPS.moveTo:I=v[Y++],j=v[Y++],it.push("M",A(I),A(j));break;case i.OPS.lineTo:I=v[Y++],j=v[Y++],it.push("L",A(I),A(j));break;case i.OPS.curveTo:I=v[Y+4],j=v[Y+5],it.push("C",A(v[Y]),A(v[Y+1]),A(v[Y+2]),A(v[Y+3]),A(I),A(j)),Y+=6;break;case i.OPS.curveTo2:it.push("C",A(I),A(j),A(v[Y]),A(v[Y+1]),A(v[Y+2]),A(v[Y+3])),I=v[Y+2],j=v[Y+3],Y+=4;break;case i.OPS.curveTo3:I=v[Y+2],j=v[Y+3],it.push("C",A(v[Y]),A(v[Y+1]),A(I),A(j),A(I),A(j)),Y+=4;break;case i.OPS.closePath:it.push("Z");break}it=it.join(" "),_.path&&d.length>0&&d[0]!==i.OPS.rectangle&&d[0]!==i.OPS.moveTo?it=_.path.getAttributeNS(null,"d")+it:(_.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(_.path)),_.path.setAttributeNS(null,"d",it),_.path.setAttributeNS(null,"fill","none"),_.element=_.path,_.setCurrentPoint(I,j)}endPath(){const d=this.current;if(d.path=null,!this.pendingClip)return;if(!d.element){this.pendingClip=null;return}const v=`clippath${D++}`,_=this.svgFactory.createElement("svg:clipPath");_.setAttributeNS(null,"id",v),_.setAttributeNS(null,"transform",f(this.transformMatrix));const I=d.element.cloneNode(!0);if(this.pendingClip==="evenodd"?I.setAttributeNS(null,"clip-rule","evenodd"):I.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,_.append(I),this.defs.append(_),d.activeClipUrl){d.clipGroup=null;for(const j of this.extraStack)j.clipGroup=null;_.setAttributeNS(null,"clip-path",d.activeClipUrl)}d.activeClipUrl=`url(#${v})`,this.tgrp=null}clip(d){this.pendingClip=d}closePath(){const d=this.current;if(d.path){const v=`${d.path.getAttributeNS(null,"d")}Z`;d.path.setAttributeNS(null,"d",v)}}setLeading(d){this.current.leading=-d}setTextRise(d){this.current.textRise=d}setTextRenderingMode(d){this.current.textRenderingMode=d}setHScale(d){this.current.textHScale=d/100}setRenderingIntent(d){}setFlatness(d){}setGState(d){for(const[v,_]of d)switch(v){case"LW":this.setLineWidth(_);break;case"LC":this.setLineCap(_);break;case"LJ":this.setLineJoin(_);break;case"ML":this.setMiterLimit(_);break;case"D":this.setDash(_[0],_[1]);break;case"RI":this.setRenderingIntent(_);break;case"FL":this.setFlatness(_);break;case"Font":this.setFont(_);break;case"CA":this.setStrokeAlpha(_);break;case"ca":this.setFillAlpha(_);break;default:(0,i.warn)(`Unimplemented graphic state operator ${v}`);break}}fill(){const d=this.current;d.element&&(d.element.setAttributeNS(null,"fill",d.fillColor),d.element.setAttributeNS(null,"fill-opacity",d.fillAlpha),this.endPath())}stroke(){const d=this.current;d.element&&(this._setStrokeAttributes(d.element),d.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(d,v=1){const _=this.current;let I=_.dashArray;v!==1&&I.length>0&&(I=I.map(function(j){return v*j})),d.setAttributeNS(null,"stroke",_.strokeColor),d.setAttributeNS(null,"stroke-opacity",_.strokeAlpha),d.setAttributeNS(null,"stroke-miterlimit",A(_.miterLimit)),d.setAttributeNS(null,"stroke-linecap",_.lineCap),d.setAttributeNS(null,"stroke-linejoin",_.lineJoin),d.setAttributeNS(null,"stroke-width",A(v*_.lineWidth)+"px"),d.setAttributeNS(null,"stroke-dasharray",I.map(A).join(" ")),d.setAttributeNS(null,"stroke-dashoffset",A(v*_.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const d=this.svgFactory.createElement("svg:rect");d.setAttributeNS(null,"x","0"),d.setAttributeNS(null,"y","0"),d.setAttributeNS(null,"width","1px"),d.setAttributeNS(null,"height","1px"),d.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(d)}paintImageXObject(d){const v=d.startsWith("g_")?this.commonObjs.get(d):this.objs.get(d);if(!v){(0,i.warn)(`Dependent image with object ID ${d} is not ready yet`);return}this.paintInlineImageXObject(v)}paintInlineImageXObject(d,v){const _=d.width,I=d.height,j=o(d,this.forceDataSchema,!!v),it=this.svgFactory.createElement("svg:rect");it.setAttributeNS(null,"x","0"),it.setAttributeNS(null,"y","0"),it.setAttributeNS(null,"width",A(_)),it.setAttributeNS(null,"height",A(I)),this.current.element=it,this.clip("nonzero");const Y=this.svgFactory.createElement("svg:image");Y.setAttributeNS(P,"xlink:href",j),Y.setAttributeNS(null,"x","0"),Y.setAttributeNS(null,"y",A(-I)),Y.setAttributeNS(null,"width",A(_)+"px"),Y.setAttributeNS(null,"height",A(I)+"px"),Y.setAttributeNS(null,"transform",`scale(${A(1/_)} ${A(-1/I)})`),v?v.append(Y):this._ensureTransformGroup().append(Y)}paintImageMaskXObject(d){const v=this.current,_=d.width,I=d.height,j=v.fillColor;v.maskId=`mask${O++}`;const it=this.svgFactory.createElement("svg:mask");it.setAttributeNS(null,"id",v.maskId);const Y=this.svgFactory.createElement("svg:rect");Y.setAttributeNS(null,"x","0"),Y.setAttributeNS(null,"y","0"),Y.setAttributeNS(null,"width",A(_)),Y.setAttributeNS(null,"height",A(I)),Y.setAttributeNS(null,"fill",j),Y.setAttributeNS(null,"mask",`url(#${v.maskId})`),this.defs.append(it),this._ensureTransformGroup().append(Y),this.paintInlineImageXObject(d,it)}paintFormXObjectBegin(d,v){if(Array.isArray(d)&&d.length===6&&this.transform(d[0],d[1],d[2],d[3],d[4],d[5]),v){const _=v[2]-v[0],I=v[3]-v[1],j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x",v[0]),j.setAttributeNS(null,"y",v[1]),j.setAttributeNS(null,"width",A(_)),j.setAttributeNS(null,"height",A(I)),this.current.element=j,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(d){const v=this.svgFactory.create(d.width,d.height),_=this.svgFactory.createElement("svg:defs");v.append(_),this.defs=_;const I=this.svgFactory.createElement("svg:g");return I.setAttributeNS(null,"transform",f(d.transform)),v.append(I),this.svg=I,v}_ensureClipGroup(){if(!this.current.clipGroup){const d=this.svgFactory.createElement("svg:g");d.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(d),this.current.clipGroup=d}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",f(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var n=s(1),i=s(33);const h=require$$5,b=require$$5,R=require$$5,T=require$$5,g=/^file:\/\/\/[a-zA-Z]:\//;function x(A){const f=T.parse(A);return f.protocol==="file:"||f.host?f:/^[a-z]:[/\\]/i.test(A)?T.parse(`file:///${A}`):(f.host||(f.protocol="file:"),f)}class M{constructor(f){this.source=f,this.url=x(f.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&f.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var f,D;return(D=(f=this._fullRequestReader)==null?void 0:f._loaded)!=null?D:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new u(this):new r(this),this._fullRequestReader}getRangeReader(f,D){if(D<=this._progressiveDataLength)return null;const O=this.isFsUrl?new w(this,f,D):new o(this,f,D);return this._rangeRequestReaders.push(O),O}cancelAllRequests(f){this._fullRequestReader&&this._fullRequestReader.cancel(f);for(const D of this._rangeRequestReaders.slice(0))D.cancel(f)}}e.PDFNodeStream=M;class P{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null;const D=f.source;this._contentLength=D.length,this._loaded=0,this._filename=null,this._disableRange=D.disableRange||!1,this._rangeChunkSize=D.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!D.disableStream,this._isRangeSupported=!D.disableRange,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)(),this._headersCapability=(0,n.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return f===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=f.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){if(!this._readableStream){this._error(f);return}this._readableStream.destroy(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",D=>{this._error(D)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class k{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)();const D=f.source;this._isStreamingSupported=!D.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return f===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=f.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){if(!this._readableStream){this._error(f);return}this._readableStream.destroy(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",D=>{this._error(D)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function m(A,f){return{protocol:A.protocol,auth:A.auth,host:A.hostname,port:A.port,path:A.path,method:"GET",headers:f}}class r extends P{constructor(f){super(f);const D=O=>{if(O.statusCode===404){const _=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=_,this._headersCapability.reject(_);return}this._headersCapability.resolve(),this._setReadableStream(O);const U=_=>this._readableStream.headers[_.toLowerCase()],{allowRangeRequests:d,suggestedLength:v}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:U,isHttp:f.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=d,this._contentLength=v||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(U)};this._request=null,this._url.protocol==="http:"?this._request=b.request(m(this._url,f.httpHeaders),D):this._request=R.request(m(this._url,f.httpHeaders),D),this._request.on("error",O=>{this._storedError=O,this._headersCapability.reject(O)}),this._request.end()}}class o extends k{constructor(f,D,O){super(f),this._httpHeaders={};for(const d in f.httpHeaders){const v=f.httpHeaders[d];typeof v>"u"||(this._httpHeaders[d]=v)}this._httpHeaders.Range=`bytes=${D}-${O-1}`;const U=d=>{if(d.statusCode===404){const v=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=v;return}this._setReadableStream(d)};this._request=null,this._url.protocol==="http:"?this._request=b.request(m(this._url,this._httpHeaders),U):this._request=R.request(m(this._url,this._httpHeaders),U),this._request.on("error",d=>{this._storedError=d}),this._request.end()}}class u extends P{constructor(f){super(f);let D=decodeURIComponent(this._url.path);g.test(this._url.href)&&(D=D.replace(/^\//,"")),h.lstat(D,(O,U)=>{if(O){O.code==="ENOENT"&&(O=new n.MissingPDFException(`Missing PDF "${D}".`)),this._storedError=O,this._headersCapability.reject(O);return}this._contentLength=U.size,this._setReadableStream(h.createReadStream(D)),this._headersCapability.resolve()})}}class w extends k{constructor(f,D,O){super(f);let U=decodeURIComponent(this._url.path);g.test(this._url.href)&&(U=U.replace(/^\//,"")),this._setReadableStream(h.createReadStream(U,{start:D,end:O-1}))}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=T,e.extractFilenameFromHeader=R,e.validateRangeRequestCapabilities=b,e.validateResponseStatus=g;var n=s(1),i=s(34),h=s(8);function b({getResponseHeader:x,isHttp:M,rangeChunkSize:P,disableRange:k}){const m={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(x("Content-Length"),10);return!Number.isInteger(r)||(m.suggestedLength=r,r<=2*P)||k||!M||x("Accept-Ranges")!=="bytes"||(x("Content-Encoding")||"identity")!=="identity"||(m.allowRangeRequests=!0),m}function R(x){const M=x("Content-Disposition");if(M){let P=(0,i.getFilenameFromContentDispositionHeader)(M);if(P.includes("%"))try{P=decodeURIComponent(P)}catch{}if((0,h.isPdfFile)(P))return P}return null}function T(x,M){return x===404||x===0&&M.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+M+'".'):new n.UnexpectedResponseException(`Unexpected server response (${x}) while retrieving PDF "${M}".`,x)}function g(x){return x===200||x===206}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=i;var n=s(1);function i(h){let b=!0,R=T("filename\\*","i").exec(h);if(R){R=R[1];let r=P(R);return r=unescape(r),r=k(r),r=m(r),x(r)}if(R=M(h),R){const r=m(R);return x(r)}if(R=T("filename","i").exec(h),R){R=R[1];let r=P(R);return r=m(r),x(r)}function T(r,o){return new RegExp("(?:^|;)\\s*"+r+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',o)}function g(r,o){if(r){if(!/^[\x00-\xFF]+$/.test(o))return o;try{const u=new TextDecoder(r,{fatal:!0}),w=(0,n.stringToBytes)(o);o=u.decode(w),b=!1}catch{}}return o}function x(r){return b&&/[\x80-\xff]/.test(r)&&(r=g("utf-8",r),b&&(r=g("iso-8859-1",r))),r}function M(r){const o=[];let u;const w=T("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(u=w.exec(r))!==null;){let[,f,D,O]=u;if(f=parseInt(f,10),f in o){if(f===0)break;continue}o[f]=[D,O]}const A=[];for(let f=0;f<o.length&&f in o;++f){let[D,O]=o[f];O=P(O),D&&(O=unescape(O),f===0&&(O=k(O))),A.push(O)}return A.join("")}function P(r){if(r.startsWith('"')){const o=r.slice(1).split('\\"');for(let u=0;u<o.length;++u){const w=o[u].indexOf('"');w!==-1&&(o[u]=o[u].slice(0,w),o.length=u+1),o[u]=o[u].replace(/\\(.)/g,"$1")}r=o.join('"')}return r}function k(r){const o=r.indexOf("'");if(o===-1)return r;const u=r.slice(0,o),A=r.slice(o+1).replace(/^[^']*'/,"");return g(u,A)}function m(r){return!r.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(r)?r:r.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(o,u,w,A){if(w==="q"||w==="Q")return A=A.replace(/_/g," "),A=A.replace(/=([0-9a-fA-F]{2})/g,function(f,D){return String.fromCharCode(parseInt(D,16))}),g(u,A);try{A=atob(A)}catch{}return g(u,A)})}return""}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var n=s(1),i=s(33);const h=200,b=206;function R(P){const k=P.response;return typeof k!="string"?k:(0,n.stringToBytes)(k).buffer}class T{constructor(k,m={}){this.url=k,this.isHttp=/^https?:/i.test(k),this.httpHeaders=this.isHttp&&m.httpHeaders||Object.create(null),this.withCredentials=m.withCredentials||!1,this.getXhr=m.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(k,m,r){const o={begin:k,end:m};for(const u in r)o[u]=r[u];return this.request(o)}requestFull(k){return this.request(k)}request(k){const m=this.getXhr(),r=this.currXhrId++,o=this.pendingRequests[r]={xhr:m};m.open("GET",this.url),m.withCredentials=this.withCredentials;for(const u in this.httpHeaders){const w=this.httpHeaders[u];typeof w>"u"||m.setRequestHeader(u,w)}return this.isHttp&&"begin"in k&&"end"in k?(m.setRequestHeader("Range",`bytes=${k.begin}-${k.end-1}`),o.expectedStatus=b):o.expectedStatus=h,m.responseType="arraybuffer",k.onError&&(m.onerror=function(u){k.onError(m.status)}),m.onreadystatechange=this.onStateChange.bind(this,r),m.onprogress=this.onProgress.bind(this,r),o.onHeadersReceived=k.onHeadersReceived,o.onDone=k.onDone,o.onError=k.onError,o.onProgress=k.onProgress,m.send(null),r}onProgress(k,m){var o;const r=this.pendingRequests[k];!r||(o=r.onProgress)==null||o.call(r,m)}onStateChange(k,m){var f,D,O;const r=this.pendingRequests[k];if(!r)return;const o=r.xhr;if(o.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),o.readyState!==4||!(k in this.pendingRequests))return;if(delete this.pendingRequests[k],o.status===0&&this.isHttp){(f=r.onError)==null||f.call(r,o.status);return}const u=o.status||h;if(!(u===h&&r.expectedStatus===b)&&u!==r.expectedStatus){(D=r.onError)==null||D.call(r,o.status);return}const A=R(o);if(u===b){const U=o.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(U);r.onDone({begin:parseInt(d[1],10),chunk:A})}else A?r.onDone({begin:0,chunk:A}):(O=r.onError)==null||O.call(r,o.status)}getRequestXhr(k){return this.pendingRequests[k].xhr}isPendingRequest(k){return k in this.pendingRequests}abortRequest(k){const m=this.pendingRequests[k].xhr;delete this.pendingRequests[k],m.abort()}}class g{constructor(k){this._source=k,this._manager=new T(k.url,{httpHeaders:k.httpHeaders,withCredentials:k.withCredentials}),this._rangeChunkSize=k.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(k){const m=this._rangeRequestReaders.indexOf(k);m>=0&&this._rangeRequestReaders.splice(m,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new x(this._manager,this._source),this._fullRequestReader}getRangeReader(k,m){const r=new M(this._manager,k,m);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(k){var m;(m=this._fullRequestReader)==null||m.cancel(k);for(const r of this._rangeRequestReaders.slice(0))r.cancel(k)}}e.PDFNetworkStream=g;class x{constructor(k,m){this._manager=k;const r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=m.url,this._fullRequestId=k.requestFull(r),this._headersReceivedCapability=(0,n.createPromiseCapability)(),this._disableRange=m.disableRange||!1,this._contentLength=m.length,this._rangeChunkSize=m.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const k=this._fullRequestId,m=this._manager.getRequestXhr(k),r=w=>m.getResponseHeader(w),{allowRangeRequests:o,suggestedLength:u}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(r),this._isRangeSupported&&this._manager.abortRequest(k),this._headersReceivedCapability.resolve()}_onDone(k){if(k&&(this._requests.length>0?this._requests.shift().resolve({value:k.chunk,done:!1}):this._cachedChunks.push(k.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(k){this._storedError=(0,i.createResponseStatusError)(k,this._url),this._headersReceivedCapability.reject(this._storedError);for(const m of this._requests)m.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(k){var m;(m=this.onProgress)==null||m.call(this,{loaded:k.loaded,total:k.lengthComputable?k.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const k=(0,n.createPromiseCapability)();return this._requests.push(k),k.promise}cancel(k){this._done=!0,this._headersReceivedCapability.reject(k);for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class M{constructor(k,m,r){this._manager=k;const o={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=k.url,this._requestId=k.requestRange(m,r,o),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var k;(k=this.onClosed)==null||k.call(this,this)}_onDone(k){const m=k.chunk;this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunk=m,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(k){this._storedError=(0,i.createResponseStatusError)(k,this._url);for(const m of this._requests)m.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(k){var m;this.isStreamingSupported||(m=this.onProgress)==null||m.call(this,{loaded:k.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const m=this._queuedChunk;return this._queuedChunk=null,{value:m,done:!1}}if(this._done)return{value:void 0,done:!0};const k=(0,n.createPromiseCapability)();return this._requests.push(k),k.promise}cancel(k){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var n=s(1),i=s(33);function h(x,M,P){return{method:"GET",headers:x,signal:P.signal,mode:"cors",credentials:M?"include":"same-origin",redirect:"follow"}}function b(x){const M=new Headers;for(const P in x){const k=x[P];typeof k>"u"||M.append(P,k)}return M}class R{constructor(M){this.source=M,this.isHttp=/^https?:/i.test(M.url),this.httpHeaders=this.isHttp&&M.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var M,P;return(P=(M=this._fullRequestReader)==null?void 0:M._loaded)!=null?P:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new T(this),this._fullRequestReader}getRangeReader(M,P){if(P<=this._progressiveDataLength)return null;const k=new g(this,M,P);return this._rangeRequestReaders.push(k),k}cancelAllRequests(M){this._fullRequestReader&&this._fullRequestReader.cancel(M);for(const P of this._rangeRequestReaders.slice(0))P.cancel(M)}}e.PDFFetchStream=R;class T{constructor(M){this._stream=M,this._reader=null,this._loaded=0,this._filename=null;const P=M.source;this._withCredentials=P.withCredentials||!1,this._contentLength=P.length,this._headersCapability=(0,n.createPromiseCapability)(),this._disableRange=P.disableRange||!1,this._rangeChunkSize=P.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!P.disableStream,this._isRangeSupported=!P.disableRange,this._headers=b(this._stream.httpHeaders);const k=P.url;fetch(k,h(this._headers,this._withCredentials,this._abortController)).then(m=>{if(!(0,i.validateResponseStatus)(m.status))throw(0,i.createResponseStatusError)(m.status,k);this._reader=m.body.getReader(),this._headersCapability.resolve();const r=w=>m.headers.get(w),{allowRangeRequests:o,suggestedLength:u}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=u||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:M,done:P}=await this._reader.read();return P?{value:M,done:P}:(this._loaded+=M.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(M).buffer,done:!1})}cancel(M){this._reader&&this._reader.cancel(M),this._abortController.abort()}}class g{constructor(M,P,k){this._stream=M,this._reader=null,this._loaded=0;const m=M.source;this._withCredentials=m.withCredentials||!1,this._readCapability=(0,n.createPromiseCapability)(),this._isStreamingSupported=!m.disableStream,this._abortController=new AbortController,this._headers=b(this._stream.httpHeaders),this._headers.append("Range",`bytes=${P}-${k-1}`);const r=m.url;fetch(r,h(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!(0,i.validateResponseStatus)(o.status))throw(0,i.createResponseStatusError)(o.status,r);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:M,done:P}=await this._reader.read();return P?{value:M,done:P}:(this._loaded+=M.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(M).buffer,done:!1})}cancel(M){this._reader&&this._reader.cancel(M),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var s=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return i.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return h.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return b.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return R.GlobalWorkerOptions}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function(){return s.LoopbackPort}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return x.SVGGraphics}}),Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return M.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return g.renderTextLayer}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return s.version}});var e=__w_pdfjs_require__(1),s=__w_pdfjs_require__(4),n=__w_pdfjs_require__(8),i=__w_pdfjs_require__(22),h=__w_pdfjs_require__(7),b=__w_pdfjs_require__(27),R=__w_pdfjs_require__(15),T=__w_pdfjs_require__(3),g=__w_pdfjs_require__(30),x=__w_pdfjs_require__(31),M=__w_pdfjs_require__(29);if(T.isNodeJS){const{PDFNodeStream:P}=__w_pdfjs_require__(32);(0,s.setPDFNetworkStreamFactory)(k=>new P(k))}else{const{PDFNetworkStream:P}=__w_pdfjs_require__(35),{PDFFetchStream:k}=__w_pdfjs_require__(36);(0,s.setPDFNetworkStreamFactory)(m=>(0,n.isValidFetchUrl)(m.url)?new k(m):new P(m))}})(),__webpack_exports__})())})(pdf);function WorkerWrapper(){return new Worker("/noriben/assets/pdf.worker.c47c7887.js")}const _withScopeId=t=>(pushScopeId("data-v-c36dc867"),t=t(),popScopeId(),t),_hoisted_1={key:0},_hoisted_2=_withScopeId(()=>createBaseVNode("p",null,"\u2193select pdf\u2193",-1)),_hoisted_3={key:1},_hoisted_4={key:2},_hoisted_5=_withScopeId(()=>createBaseVNode("p",null,"\u2193PNG\u2193",-1)),_hoisted_6=["src"],_sfc_main$1=defineComponent({__name:"Main",setup(t){const e="../../node_modules/pdfjs-dist/cmaps/";pdf.exports.GlobalWorkerOptions.workerPort=new WorkerWrapper;const s=ref(!1),n=ref(""),i=ref(!1),h=ref(new Image),b=ref({}),R={start:{x:0,y:0},current:{x:0,y:0},isDragging:!1},T=[];onMounted(()=>{g()});const g=async()=>{const o=b.value.getContext("2d");if(o.fillStyle="rgba(0,0,0,0)",o.fillRect(0,0,b.value.width,b.value.height),h.value.src&&o.drawImage(h.value,0,0),o.fillStyle="rgb(0, 0, 0)",R.isDragging){const u=R.start.x,w=R.start.y,A=R.current.x,f=R.current.y;o.fillRect(u,w,A-u,f-w)}T.forEach(u=>{o.fillRect(u.startX,u.startY,u.endX-u.startX,u.endY-u.startY)}),i.value&&(i.value=!1,n.value=b.value.toDataURL("image/png")),requestAnimationFrame(g)},x=async o=>{const u=o.target;if(!u.files||!u.files.length)return;s.value=!0;const w=u.files[0],A=URL.createObjectURL(w),D=await(await pdf.exports.getDocument({url:A,cMapUrl:e,cMapPacked:!0,useWorkerFetch:!1})).promise;await M(D)},M=async o=>{const u=b.value.getContext("2d"),w=await o.getPage(1),A=w.getViewport({scale:b.value.width/w.getViewport({scale:1}).width});b.value.height=A.height;const f={canvasContext:u,viewport:A};await w.render(f).promise,h.value.src=b.value.toDataURL("image/png")},P=()=>{n.value="",s.value=!1,T.splice(0),h.value.src=""},k=o=>{R.isDragging=!0,R.start.x=o.offsetX,R.start.y=o.offsetY,R.current.x=o.offsetX,R.current.y=o.offsetY},m=o=>{R.isDragging=!1,T.push({startX:R.start.x,startY:R.start.y,endX:o.offsetX,endY:o.offsetY})},r=o=>{R.current.x=o.offsetX,R.current.y=o.offsetY};return(o,u)=>(openBlock(),createElementBlock(Fragment,null,[s.value?(openBlock(),createElementBlock("div",_hoisted_3,[createBaseVNode("button",{onClick:P},"reset"),createBaseVNode("button",{onClick:u[0]||(u[0]=w=>i.value=!0)},"to png")])):(openBlock(),createElementBlock("div",_hoisted_1,[_hoisted_2,createBaseVNode("input",{type:"file",onChange:x,accept:".pdf"},null,32)])),n.value.length?(openBlock(),createElementBlock("div",_hoisted_4,[_hoisted_5,createBaseVNode("img",{src:n.value,alt:""},null,8,_hoisted_6)])):createCommentVNode("",!0),withDirectives(createBaseVNode("canvas",{id:"canvas",ref_key:"canvas",ref:b,onMousedown:k,onMouseup:m,onMousemove:r,width:"800"},null,544),[[vShow,!n.value.length&&s.value]])],64))}}),Main_vue_vue_type_style_index_0_scoped_c36dc867_lang="",_export_sfc=(t,e)=>{const s=t.__vccOpts||t;for(const[n,i]of e)s[n]=i;return s},Main=_export_sfc(_sfc_main$1,[["__scopeId","data-v-c36dc867"]]),_sfc_main=defineComponent({__name:"App",setup(t){return(e,s)=>(openBlock(),createBlock(Main))}});createApp(_sfc_main).mount("#app");
